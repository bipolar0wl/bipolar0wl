import{S as U,i as X,s as Q,k as b,q as A,l as y,m as k,r as P,h as p,n as d,b as M,G as h,I as ve,u as F,B as Y,g as de,J as me,K as be,d as pe,f as D,t as T,o as re,L,M as N,e as O,w as j,x as z,y as J,N as S,z as K,a as $,c as H,O as ye,P as oe}from"../../chunks/index-981bc336.js";import{b as se,p as he,c as ke}from"../../chunks/store-69d22bd8.js";import{P as Ce}from"../../chunks/ProductList-4a1e70a6.js";function Ee(c){let e,t=c[1].name+"",s,r,o,a,l,n;return{c(){e=b("a"),s=A(t),this.h()},l(i){e=y(i,"A",{href:!0,"data-category-name":!0,class:!0});var g=k(e);s=P(g,t),g.forEach(p),this.h()},h(){d(e,"href",r="#"+c[1].name),d(e,"data-category-name",o=c[1].name),d(e,"class",a="category "+(c[0].id===c[1].id?"category--active":"")+" svelte-1c0y5ce")},m(i,g){M(i,e,g),h(e,s),l||(n=ve(e,"click",c[3]),l=!0)},p(i,[g]){g&2&&t!==(t=i[1].name+"")&&F(s,t),g&2&&r!==(r="#"+i[1].name)&&d(e,"href",r),g&2&&o!==(o=i[1].name)&&d(e,"data-category-name",o),g&3&&a!==(a="category "+(i[0].id===i[1].id?"category--active":"")+" svelte-1c0y5ce")&&d(e,"class",a)},i:Y,o:Y,d(i){i&&p(e),l=!1,n()}}}const ie=40;function Be(c,e,t){let{category:s={id:0,name:""}}=e,{currentCategory:r={id:0,name:""}}=e;function o(){let l=document.getElementById(s.name);setTimeout(()=>{document.documentElement.clientHeight==document.body.scrollHeight-window.pageYOffset||window.pageYOffset+ie==l.offsetTop?(t(0,r=s),setTimeout(()=>{t(0,r=s)},100)):o()},100)}const a=l=>{l.preventDefault();let n=document.getElementById(s.name),i=n?n.offsetTop:0;window.scrollTo({top:i-ie,behavior:"smooth"}),o()};return c.$$set=l=>{"category"in l&&t(1,s=l.category),"currentCategory"in l&&t(0,r=l.currentCategory)},[r,s,o,a]}class we extends U{constructor(e){super(),X(this,e,Be,Ee,Q,{category:1,currentCategory:0})}}function ce(c,e,t){const s=c.slice();return s[3]=e[t],s}function ue(c,e){let t,s,r,o;function a(n){e[2](n)}let l={category:e[3]};return e[0]!==void 0&&(l.currentCategory=e[0]),s=new we({props:l}),L.push(()=>N(s,"currentCategory",a)),{key:c,first:null,c(){t=O(),j(s.$$.fragment),this.h()},l(n){t=O(),z(s.$$.fragment,n),this.h()},h(){this.first=t},m(n,i){M(n,t,i),J(s,n,i),o=!0},p(n,i){e=n;const g={};i&2&&(g.category=e[3]),!r&&i&1&&(r=!0,g.currentCategory=e[0],S(()=>r=!1)),s.$set(g)},i(n){o||(D(s.$$.fragment,n),o=!0)},o(n){T(s.$$.fragment,n),o=!1},d(n){n&&p(t),K(s,n)}}}function Ie(c){let e,t=[],s=new Map,r,o=c[1];const a=l=>l[3].id;for(let l=0;l<o.length;l+=1){let n=ce(c,o,l),i=a(n);s.set(i,t[l]=ue(i,n))}return{c(){e=b("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=y(l,"DIV",{class:!0});var n=k(e);for(let i=0;i<t.length;i+=1)t[i].l(n);n.forEach(p),this.h()},h(){d(e,"class","categories svelte-xbh343")},m(l,n){M(l,e,n);for(let i=0;i<t.length;i+=1)t[i].m(e,null);r=!0},p(l,[n]){n&3&&(o=l[1],de(),t=me(t,n,a,1,l,o,s,e,be,ue,null,ce),pe())},i(l){if(!r){for(let n=0;n<o.length;n+=1)D(t[n]);r=!0}},o(l){for(let n=0;n<t.length;n+=1)T(t[n]);r=!1},d(l){l&&p(e);for(let n=0;n<t.length;n+=1)t[n].d()}}}function Me(c,e,t){let{categories:s=[]}=e,{currentCategory:r={id:0,name:""}}=e;re(()=>{let a=document.getElementsByClassName("category");[].forEach.call(a,function(l,n,i){})});function o(a){r=a,t(0,r)}return c.$$set=a=>{"categories"in a&&t(1,s=a.categories),"currentCategory"in a&&t(0,r=a.currentCategory)},[r,s,o]}class De extends U{constructor(e){super(),X(this,e,Me,Ie,Q,{categories:1,currentCategory:0})}}function _e(c,e,t){const s=c.slice();return s[3]=e[t],s}function fe(c){let e,t,s,r,o,a,l,n,i=c[3].name+"",g,u,m=(c[0][c[3].id]||0)+"",_,B,f,v,I=c[3].description+"",w,Z,V,q=c[3].price*c[0][c[3].id]+"",G,x;return{c(){e=b("div"),t=b("div"),s=b("img"),o=$(),a=b("div"),l=b("div"),n=b("span"),g=A(i),u=b("span"),_=A(m),B=A("x"),f=$(),v=b("span"),w=A(I),Z=$(),V=b("div"),G=A(q),x=$(),this.h()},l(C){e=y(C,"DIV",{class:!0});var E=k(e);t=y(E,"DIV",{class:!0});var R=k(t);s=y(R,"IMG",{class:!0,src:!0,alt:!0}),o=H(R),a=y(R,"DIV",{class:!0});var W=k(a);l=y(W,"DIV",{class:!0});var ee=k(l);n=y(ee,"SPAN",{class:!0});var ae=k(n);g=P(ae,i),ae.forEach(p),u=y(ee,"SPAN",{class:!0});var te=k(u);_=P(te,m),B=P(te,"x"),te.forEach(p),ee.forEach(p),f=H(W),v=y(W,"SPAN",{class:!0});var le=k(v);w=P(le,I),le.forEach(p),W.forEach(p),R.forEach(p),Z=H(E),V=y(E,"DIV",{class:!0});var ne=k(V);G=P(ne,q),ne.forEach(p),x=H(E),E.forEach(p),this.h()},h(){d(s,"class","item__img svelte-1m2r319"),oe(s.src,r="/bipolar0wl/"+c[3].image)||d(s,"src",r),d(s,"alt",""),d(n,"class","item__name svelte-1m2r319"),d(u,"class","item__count svelte-1m2r319"),d(l,"class","svelte-1m2r319"),d(v,"class","item__description svelte-1m2r319"),d(a,"class","item__text svelte-1m2r319"),d(t,"class","item__info svelte-1m2r319"),d(V,"class","item__price svelte-1m2r319"),d(e,"class","item svelte-1m2r319")},m(C,E){M(C,e,E),h(e,t),h(t,s),h(t,o),h(t,a),h(a,l),h(l,n),h(n,g),h(l,u),h(u,_),h(u,B),h(a,f),h(a,v),h(v,w),h(e,Z),h(e,V),h(V,G),h(e,x)},p(C,E){E&2&&!oe(s.src,r="/bipolar0wl/"+C[3].image)&&d(s,"src",r),E&2&&i!==(i=C[3].name+"")&&F(g,i),E&3&&m!==(m=(C[0][C[3].id]||0)+"")&&F(_,m),E&2&&I!==(I=C[3].description+"")&&F(w,I),E&3&&q!==(q=C[3].price*C[0][C[3].id]+"")&&F(G,q)},d(C){C&&p(e)}}}function ge(c,e){let t,s,r=e[0][e[3].id]!=null&&fe(e);return{key:c,first:null,c(){t=O(),r&&r.c(),s=O(),this.h()},l(o){t=O(),r&&r.l(o),s=O(),this.h()},h(){this.first=t},m(o,a){M(o,t,a),r&&r.m(o,a),M(o,s,a)},p(o,a){e=o,e[0][e[3].id]!=null?r?r.p(e,a):(r=fe(e),r.c(),r.m(s.parentNode,s)):r&&(r.d(1),r=null)},d(o){o&&p(t),r&&r.d(o),o&&p(s)}}}function Te(c){let e,t,s,r=[],o=new Map,a,l,n,i=c[1];const g=u=>u[3].id;for(let u=0;u<i.length;u+=1){let m=_e(c,i,u),_=g(m);o.set(_,r[u]=ge(_,m))}return{c(){e=b("div"),t=b("div"),s=b("div");for(let u=0;u<r.length;u+=1)r[u].c();a=$(),l=b("div"),n=b("textarea"),this.h()},l(u){e=y(u,"DIV",{class:!0});var m=k(e);t=y(m,"DIV",{class:!0});var _=k(t);s=y(_,"DIV",{class:!0});var B=k(s);for(let v=0;v<r.length;v+=1)r[v].l(B);B.forEach(p),_.forEach(p),a=H(m),l=y(m,"DIV",{class:!0});var f=k(l);n=y(f,"TEXTAREA",{class:!0,type:!0,placeholder:!0}),k(n).forEach(p),f.forEach(p),m.forEach(p),this.h()},h(){d(s,"class","basket__order__list svelte-1m2r319"),d(t,"class","basket__order svelte-1m2r319"),d(n,"class","basket__comment svelte-1m2r319"),d(n,"type","text"),d(n,"placeholder","\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439"),d(l,"class","svelte-1m2r319"),d(e,"class","basket svelte-1m2r319")},m(u,m){M(u,e,m),h(e,t),h(t,s);for(let _=0;_<r.length;_+=1)r[_].m(s,null);h(e,a),h(e,l),h(l,n)},p(u,[m]){m&3&&(i=u[1],r=me(r,m,g,1,u,i,o,s,ye,ge,null,_e))},i:Y,o:Y,d(u){u&&p(e);for(let m=0;m<r.length;m+=1)r[m].d()}}}function Ve(c,e,t){let{page:s=1}=e,r={};se.subscribe(a=>{t(0,r=a)});let o=[];return he.subscribe(a=>{t(1,o=a)}),re(async()=>{let a=window.Telegram.WebApp;a.BackButton.show(),a.BackButton.onClick(()=>{t(2,s=0),a.BackButton.hide()}),a.MainButton.setText(`\u041A \u043E\u0444\u043E\u0440\u043C\u043B\u0435\u043D\u0438\u044E ${r.reduce((i,g)=>i+g,0)} \u20BD`);for(var l=document.querySelectorAll(".basket__back a"),n=0;n<l.length;n++)l[n].addEventListener("click",function(){t(2,s=s==0?1:0)});a.MainButton.onClick(()=>{alert(1),a.HapticFeedback.impactOccurred("light"),alert(2);let i=a.createInvoiceLink(title="\u041E\u043F\u043B\u0430\u0442\u0430",currency="RUB");alert(i)})}),c.$$set=a=>{"page"in a&&t(2,s=a.page)},[r,o,s]}class Ae extends U{constructor(e){super(),X(this,e,Ve,Te,Q,{page:2})}}function Pe(c){let e,t,s;function r(a){c[9](a)}let o={};return c[4]!==void 0&&(o.page=c[4]),e=new Ae({props:o}),L.push(()=>N(e,"page",r)),{c(){j(e.$$.fragment)},l(a){z(e.$$.fragment,a)},m(a,l){J(e,a,l),s=!0},p(a,l){const n={};!t&&l&16&&(t=!0,n.page=a[4],S(()=>t=!1)),e.$set(n)},i(a){s||(D(e.$$.fragment,a),s=!0)},o(a){T(e.$$.fragment,a),s=!1},d(a){K(e,a)}}}function Le(c){let e,t,s,r,o,a,l,n;function i(f){c[5](f)}function g(f){c[6](f)}let u={};c[1]!==void 0&&(u.categories=c[1]),c[3]!==void 0&&(u.currentCategory=c[3]),e=new De({props:u}),L.push(()=>N(e,"categories",i)),L.push(()=>N(e,"currentCategory",g));function m(f){c[7](f)}function _(f){c[8](f)}let B={products:c[2],categories:c[1]};return c[0]!==void 0&&(B.basket=c[0]),c[3]!==void 0&&(B.currentCategory=c[3]),o=new Ce({props:B}),L.push(()=>N(o,"basket",m)),L.push(()=>N(o,"currentCategory",_)),{c(){j(e.$$.fragment),r=$(),j(o.$$.fragment)},l(f){z(e.$$.fragment,f),r=H(f),z(o.$$.fragment,f)},m(f,v){J(e,f,v),M(f,r,v),J(o,f,v),n=!0},p(f,v){const I={};!t&&v&2&&(t=!0,I.categories=f[1],S(()=>t=!1)),!s&&v&8&&(s=!0,I.currentCategory=f[3],S(()=>s=!1)),e.$set(I);const w={};v&4&&(w.products=f[2]),v&2&&(w.categories=f[1]),!a&&v&1&&(a=!0,w.basket=f[0],S(()=>a=!1)),!l&&v&8&&(l=!0,w.currentCategory=f[3],S(()=>l=!1)),o.$set(w)},i(f){n||(D(e.$$.fragment,f),D(o.$$.fragment,f),n=!0)},o(f){T(e.$$.fragment,f),T(o.$$.fragment,f),n=!1},d(f){K(e,f),f&&p(r),K(o,f)}}}function Ne(c){let e,t,s,r,o;const a=[Le,Pe],l=[];function n(i,g){return i[4]==0?0:1}return s=n(c),r=l[s]=a[s](c),{c(){e=b("main"),t=b("div"),r.c(),this.h()},l(i){e=y(i,"MAIN",{class:!0});var g=k(e);t=y(g,"DIV",{class:!0});var u=k(t);r.l(u),u.forEach(p),g.forEach(p),this.h()},h(){d(t,"class","app svelte-plkv"),d(e,"class","svelte-plkv")},m(i,g){M(i,e,g),h(e,t),l[s].m(t,null),o=!0},p(i,[g]){let u=s;s=n(i),s===u?l[s].p(i,g):(de(),T(l[u],1,1,()=>{l[u]=null}),pe(),r=l[s],r?r.p(i,g):(r=l[s]=a[s](i),r.c()),D(r,1),r.m(t,null))},i(i){o||(D(r),o=!0)},o(i){T(r),o=!1},d(i){i&&p(e),l[s].d()}}}function Oe(c,e,t){let s=[],r=[],o={},a={},l=0;ke.subscribe(_=>{t(1,s=_)}),he.subscribe(_=>{t(2,r=_)}),re(async()=>{let _=window.Telegram.WebApp;t(3,o=s[0]),_.expand(),_.MainButton.setText("\u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0437\u0430\u043A\u0430\u0437"),_.MainButton.setParams({color:"#31b545"}),_.setBackgroundColor("secondary_bg_color"),_.MainButton.onClick(()=>{_.HapticFeedback.impactOccurred("light"),l==0&&t(4,l=1)}),se.subscribe(B=>{t(0,a=B),Object.keys(a).length!==0?_.MainButton.show():_.MainButton.hide()})});function n(_){s=_,t(1,s)}function i(_){o=_,t(3,o)}function g(_){a=_,t(0,a)}function u(_){o=_,t(3,o)}function m(_){l=_,t(4,l)}return c.$$.update=()=>{c.$$.dirty&1&&se.set(a)},[a,s,r,o,l,n,i,g,u,m]}class qe extends U{constructor(e){super(),X(this,e,Oe,Ne,Q,{})}}export{qe as default};
