import{S as ae,i as le,s as oe,k as p,q as N,l as v,m as b,r as S,h as g,n as d,b as O,G as u,I as Be,u as Q,B as x,g as Ce,J as Ee,K as Ie,d as je,f as G,t as W,o as ce,L as z,M as F,e as J,w as ee,x as te,y as se,N as K,z as re,a as T,c as P,O as Ae,P as me}from"../../chunks/index-981bc336.js";import{b as ie,p as we,c as De}from"../../chunks/store-69d22bd8.js";import{P as Ve}from"../../chunks/ProductList-a1545b35.js";function Me(c){let e,t=c[1].name+"",s,l,n,r,a,o;return{c(){e=p("a"),s=N(t),this.h()},l(i){e=v(i,"A",{href:!0,"data-category-name":!0,class:!0});var _=b(e);s=S(_,t),_.forEach(g),this.h()},h(){d(e,"href",l="#"+c[1].name),d(e,"data-category-name",n=c[1].name),d(e,"class",r="category "+(c[0].id===c[1].id?"category--active":"")+" svelte-adoked")},m(i,_){O(i,e,_),u(e,s),a||(o=Be(e,"click",c[3]),a=!0)},p(i,[_]){_&2&&t!==(t=i[1].name+"")&&Q(s,t),_&2&&l!==(l="#"+i[1].name)&&d(e,"href",l),_&2&&n!==(n=i[1].name)&&d(e,"data-category-name",n),_&3&&r!==(r="category "+(i[0].id===i[1].id?"category--active":"")+" svelte-adoked")&&d(e,"class",r)},i:x,o:x,d(i){i&&g(e),a=!1,o()}}}const he=40;function Te(c,e,t){let{category:s={id:0,name:""}}=e,{currentCategory:l={id:0,name:""}}=e;function n(){let a=document.getElementById(s.name);setTimeout(()=>{document.documentElement.clientHeight==document.body.scrollHeight-window.pageYOffset||window.pageYOffset+he==a.offsetTop?(t(0,l=s),setTimeout(()=>{t(0,l=s)},100)):n()},100)}const r=a=>{a.preventDefault();let o=document.getElementById(s.name),i=o?o.offsetTop:0;window.scrollTo({top:i-he,behavior:"smooth"}),n()};return c.$$set=a=>{"category"in a&&t(1,s=a.category),"currentCategory"in a&&t(0,l=a.currentCategory)},[l,s,n,r]}class Pe extends ae{constructor(e){super(),le(this,e,Te,Me,oe,{category:1,currentCategory:0})}}function pe(c,e,t){const s=c.slice();return s[3]=e[t],s}function ve(c,e){let t,s,l,n;function r(o){e[2](o)}let a={category:e[3]};return e[0]!==void 0&&(a.currentCategory=e[0]),s=new Pe({props:a}),z.push(()=>F(s,"currentCategory",r)),{key:c,first:null,c(){t=J(),ee(s.$$.fragment),this.h()},l(o){t=J(),te(s.$$.fragment,o),this.h()},h(){this.first=t},m(o,i){O(o,t,i),se(s,o,i),n=!0},p(o,i){e=o;const _={};i&2&&(_.category=e[3]),!l&&i&1&&(l=!0,_.currentCategory=e[0],K(()=>l=!1)),s.$set(_)},i(o){n||(G(s.$$.fragment,o),n=!0)},o(o){W(s.$$.fragment,o),n=!1},d(o){o&&g(t),re(s,o)}}}function Ne(c){let e,t=[],s=new Map,l,n=c[1];const r=a=>a[3].id;for(let a=0;a<n.length;a+=1){let o=pe(c,n,a),i=r(o);s.set(i,t[a]=ve(i,o))}return{c(){e=p("div");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=v(a,"DIV",{class:!0});var o=b(e);for(let i=0;i<t.length;i+=1)t[i].l(o);o.forEach(g),this.h()},h(){d(e,"class","categories svelte-xbh343")},m(a,o){O(a,e,o);for(let i=0;i<t.length;i+=1)t[i].m(e,null);l=!0},p(a,[o]){o&3&&(n=a[1],Ce(),t=Ee(t,o,r,1,a,n,s,e,Ie,ve,null,pe),je())},i(a){if(!l){for(let o=0;o<n.length;o+=1)G(t[o]);l=!0}},o(a){for(let o=0;o<t.length;o+=1)W(t[o]);l=!1},d(a){a&&g(e);for(let o=0;o<t.length;o+=1)t[o].d()}}}function Se(c,e,t){let{categories:s=[]}=e,{currentCategory:l={id:0,name:""}}=e;ce(()=>{let r=document.getElementsByClassName("category");[].forEach.call(r,function(a,o,i){})});function n(r){l=r,t(0,l)}return c.$$set=r=>{"categories"in r&&t(1,s=r.categories),"currentCategory"in r&&t(0,l=r.currentCategory)},[l,s,n]}class Le extends ae{constructor(e){super(),le(this,e,Se,Ne,oe,{categories:1,currentCategory:0})}}function be(c,e,t){const s=c.slice();return s[3]=e[t],s}function ye(c){let e,t,s,l,n,r,a,o,i=c[3].name+"",_,h,D=(c[0][c[3].id]||0)+"",m,w,f,E,B=c[3].description+"",C,Y,L,V=c[3].price+"",M,q;return{c(){e=p("div"),t=p("div"),s=p("img"),n=T(),r=p("div"),a=p("div"),o=p("span"),_=N(i),h=p("span"),m=N(D),w=N("x"),f=T(),E=p("span"),C=N(B),Y=T(),L=p("div"),M=N(V),q=T(),this.h()},l(j){e=v(j,"DIV",{class:!0});var I=b(e);t=v(I,"DIV",{class:!0});var $=b(t);s=v($,"IMG",{class:!0,src:!0,alt:!0}),n=P($),r=v($,"DIV",{class:!0});var H=b(r);a=v(H,"DIV",{class:!0});var y=b(a);o=v(y,"SPAN",{class:!0});var k=b(o);_=S(k,i),k.forEach(g),h=v(y,"SPAN",{class:!0});var A=b(h);m=S(A,D),w=S(A,"x"),A.forEach(g),y.forEach(g),f=P(H),E=v(H,"SPAN",{class:!0});var R=b(E);C=S(R,B),R.forEach(g),H.forEach(g),$.forEach(g),Y=P(I),L=v(I,"DIV",{class:!0});var X=b(L);M=S(X,V),X.forEach(g),q=P(I),I.forEach(g),this.h()},h(){d(s,"class","item__img svelte-mxor1j"),me(s.src,l=c[3].image)||d(s,"src",l),d(s,"alt",""),d(o,"class","item__name svelte-mxor1j"),d(h,"class","item__count svelte-mxor1j"),d(a,"class","svelte-mxor1j"),d(E,"class","item__description svelte-mxor1j"),d(r,"class","item__text svelte-mxor1j"),d(t,"class","item__info svelte-mxor1j"),d(L,"class","item__price svelte-mxor1j"),d(e,"class","item svelte-mxor1j")},m(j,I){O(j,e,I),u(e,t),u(t,s),u(t,n),u(t,r),u(r,a),u(a,o),u(o,_),u(a,h),u(h,m),u(h,w),u(r,f),u(r,E),u(E,C),u(e,Y),u(e,L),u(L,M),u(e,q)},p(j,I){I&2&&!me(s.src,l=j[3].image)&&d(s,"src",l),I&2&&i!==(i=j[3].name+"")&&Q(_,i),I&3&&D!==(D=(j[0][j[3].id]||0)+"")&&Q(m,D),I&2&&B!==(B=j[3].description+"")&&Q(C,B),I&2&&V!==(V=j[3].price+"")&&Q(M,V)},d(j){j&&g(e)}}}function ke(c,e){let t,s,l=e[0][e[3].id]!=null&&ye(e);return{key:c,first:null,c(){t=J(),l&&l.c(),s=J(),this.h()},l(n){t=J(),l&&l.l(n),s=J(),this.h()},h(){this.first=t},m(n,r){O(n,t,r),l&&l.m(n,r),O(n,s,r)},p(n,r){e=n,e[0][e[3].id]!=null?l?l.p(e,r):(l=ye(e),l.c(),l.m(s.parentNode,s)):l&&(l.d(1),l=null)},d(n){n&&g(t),l&&l.d(n),n&&g(s)}}}function $e(c){let e,t,s,l,n,r,a,o,i,_,h,D,m,w,f,E,B,C=[],Y=new Map,L,V,M,q,j,I,$=c[1];const H=y=>y[3].id;for(let y=0;y<$.length;y+=1){let k=be(c,$,y),A=H(k);Y.set(A,C[y]=ke(A,k))}return{c(){e=p("div"),t=p("div"),s=p("a"),l=N("\u2190"),n=T(),r=p("a"),a=N("\u041C\u0430\u0433\u0430\u0437\u0438\u043D"),o=T(),i=p("div"),_=p("div"),h=p("p"),D=N("\u0412\u0430\u0448 \u0437\u0430\u043A\u0430\u0437"),m=T(),w=p("a"),f=N("\u041D\u0430\u0437\u0430\u0434"),E=T(),B=p("div");for(let y=0;y<C.length;y+=1)C[y].c();L=T(),V=p("div"),M=p("textarea"),q=T(),j=p("a"),I=N("\u0417\u0430\u043A\u0430\u0437\u0430\u0442\u044C"),this.h()},l(y){e=v(y,"DIV",{class:!0});var k=b(e);t=v(k,"DIV",{class:!0});var A=b(t);s=v(A,"A",{href:!0,class:!0});var R=b(s);l=S(R,"\u2190"),R.forEach(g),n=P(A),r=v(A,"A",{href:!0,class:!0});var X=b(r);a=S(X,"\u041C\u0430\u0433\u0430\u0437\u0438\u043D"),X.forEach(g),A.forEach(g),o=P(k),i=v(k,"DIV",{class:!0});var U=b(i);_=v(U,"DIV",{class:!0});var Z=b(_);h=v(Z,"P",{class:!0});var ue=b(h);D=S(ue,"\u0412\u0430\u0448 \u0437\u0430\u043A\u0430\u0437"),ue.forEach(g),m=P(Z),w=v(Z,"A",{href:!0,class:!0});var _e=b(w);f=S(_e,"\u041D\u0430\u0437\u0430\u0434"),_e.forEach(g),Z.forEach(g),E=P(U),B=v(U,"DIV",{class:!0});var fe=b(B);for(let ne=0;ne<C.length;ne+=1)C[ne].l(fe);fe.forEach(g),U.forEach(g),L=P(k),V=v(k,"DIV",{class:!0});var de=b(V);M=v(de,"TEXTAREA",{class:!0,type:!0,placeholder:!0}),b(M).forEach(g),de.forEach(g),q=P(k),j=v(k,"A",{class:!0});var ge=b(j);I=S(ge,"\u0417\u0430\u043A\u0430\u0437\u0430\u0442\u044C"),ge.forEach(g),k.forEach(g),this.h()},h(){d(s,"href","/"),d(s,"class","svelte-mxor1j"),d(r,"href","/"),d(r,"class","svelte-mxor1j"),d(t,"class","basket__back svelte-mxor1j"),d(h,"class","basket__order__title svelte-mxor1j"),d(w,"href","/"),d(w,"class","svelte-mxor1j"),d(_,"class","basket__order__actions svelte-mxor1j"),d(B,"class","basket__order__list svelte-mxor1j"),d(i,"class","basket__order svelte-mxor1j"),d(M,"class","basket__comment svelte-mxor1j"),d(M,"type","text"),d(M,"placeholder","\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439"),d(V,"class","svelte-mxor1j"),d(j,"class","basket__buy svelte-mxor1j"),d(e,"class","basket svelte-mxor1j")},m(y,k){O(y,e,k),u(e,t),u(t,s),u(s,l),u(t,n),u(t,r),u(r,a),u(e,o),u(e,i),u(i,_),u(_,h),u(h,D),u(_,m),u(_,w),u(w,f),u(i,E),u(i,B);for(let A=0;A<C.length;A+=1)C[A].m(B,null);u(e,L),u(e,V),u(V,M),u(e,q),u(e,j),u(j,I)},p(y,[k]){k&3&&($=y[1],C=Ee(C,k,H,1,y,$,Y,B,Ae,ke,null,be))},i:x,o:x,d(y){y&&g(e);for(let k=0;k<C.length;k+=1)C[k].d()}}}function Oe(c,e,t){let{page:s=1}=e,l={};ie.subscribe(r=>{t(0,l=r)});let n=[];return we.subscribe(r=>{t(1,n=r)}),ce(async()=>{let r=window.Telegram.WebApp;r.BackButton.show(),r.BackButton.onClick(()=>{t(2,s=s==0?1:0),r.BackButton.hide()});for(var a=document.querySelectorAll(".basket__back a"),o=0;o<a.length;o++)a[o].addEventListener("click",function(){t(2,s=s==0?1:0)})}),c.$$set=r=>{"page"in r&&t(2,s=r.page)},[l,n,s]}class qe extends ae{constructor(e){super(),le(this,e,Oe,$e,oe,{page:2})}}function He(c){let e,t,s;function l(r){c[9](r)}let n={};return c[4]!==void 0&&(n.page=c[4]),e=new qe({props:n}),z.push(()=>F(e,"page",l)),{c(){ee(e.$$.fragment)},l(r){te(e.$$.fragment,r)},m(r,a){se(e,r,a),s=!0},p(r,a){const o={};!t&&a&16&&(t=!0,o.page=r[4],K(()=>t=!1)),e.$set(o)},i(r){s||(G(e.$$.fragment,r),s=!0)},o(r){W(e.$$.fragment,r),s=!1},d(r){re(e,r)}}}function Ge(c){let e,t,s,l,n,r,a,o;function i(f){c[5](f)}function _(f){c[6](f)}let h={};c[1]!==void 0&&(h.categories=c[1]),c[3]!==void 0&&(h.currentCategory=c[3]),e=new Le({props:h}),z.push(()=>F(e,"categories",i)),z.push(()=>F(e,"currentCategory",_));function D(f){c[7](f)}function m(f){c[8](f)}let w={products:c[2],categories:c[1]};return c[0]!==void 0&&(w.basket=c[0]),c[3]!==void 0&&(w.currentCategory=c[3]),n=new Ve({props:w}),z.push(()=>F(n,"basket",D)),z.push(()=>F(n,"currentCategory",m)),{c(){ee(e.$$.fragment),l=T(),ee(n.$$.fragment)},l(f){te(e.$$.fragment,f),l=P(f),te(n.$$.fragment,f)},m(f,E){se(e,f,E),O(f,l,E),se(n,f,E),o=!0},p(f,E){const B={};!t&&E&2&&(t=!0,B.categories=f[1],K(()=>t=!1)),!s&&E&8&&(s=!0,B.currentCategory=f[3],K(()=>s=!1)),e.$set(B);const C={};E&4&&(C.products=f[2]),E&2&&(C.categories=f[1]),!r&&E&1&&(r=!0,C.basket=f[0],K(()=>r=!1)),!a&&E&8&&(a=!0,C.currentCategory=f[3],K(()=>a=!1)),n.$set(C)},i(f){o||(G(e.$$.fragment,f),G(n.$$.fragment,f),o=!0)},o(f){W(e.$$.fragment,f),W(n.$$.fragment,f),o=!1},d(f){re(e,f),f&&g(l),re(n,f)}}}function We(c){let e,t,s,l,n;const r=[Ge,He],a=[];function o(i,_){return i[4]==0?0:1}return s=o(c),l=a[s]=r[s](c),{c(){e=p("main"),t=p("div"),l.c(),this.h()},l(i){e=v(i,"MAIN",{class:!0});var _=b(e);t=v(_,"DIV",{class:!0});var h=b(t);l.l(h),h.forEach(g),_.forEach(g),this.h()},h(){d(t,"class","app svelte-10l4d0h"),d(e,"class","svelte-10l4d0h")},m(i,_){O(i,e,_),u(e,t),a[s].m(t,null),n=!0},p(i,[_]){let h=s;s=o(i),s===h?a[s].p(i,_):(Ce(),W(a[h],1,1,()=>{a[h]=null}),je(),l=a[s],l?l.p(i,_):(l=a[s]=r[s](i),l.c()),G(l,1),l.m(t,null))},i(i){n||(G(l),n=!0)},o(i){W(l),n=!1},d(i){i&&g(e),a[s].d()}}}function Ye(c,e,t){let s=[],l=[],n={},r={},a=0;De.subscribe(m=>{t(1,s=m)}),we.subscribe(m=>{t(2,l=m)}),ce(async()=>{let m=window.Telegram.WebApp;t(3,n=s[0]),m.expand(),m.MainButton.setText("\u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0437\u0430\u043A\u0430\u0437"),m.MainButton.setParams({color:"#31b545"}),m.setBackgroundColor("secondary_bg_color"),m.MainButton.onClick(()=>{t(4,a=a==0?1:0)}),ie.subscribe(w=>{t(0,r=w),Object.keys(r).length!==0?m.MainButton.show():m.MainButton.hide()})});function o(m){s=m,t(1,s)}function i(m){n=m,t(3,n)}function _(m){r=m,t(0,r)}function h(m){n=m,t(3,n)}function D(m){a=m,t(4,a)}return c.$$.update=()=>{c.$$.dirty&1&&ie.set(r)},[r,s,l,n,a,o,i,_,h,D]}class Ke extends ae{constructor(e){super(),le(this,e,Ye,We,oe,{})}}export{Ke as default};
