import{S as X,i as Q,s as Z,k as y,q as M,l as k,m as C,r as D,h as v,n as h,b as I,G as m,I as de,u as F,B as z,g as he,J as pe,K as be,d as me,f as N,t as P,o as re,L as S,M as L,e as q,w as J,x as K,y as R,N as H,z as U,a as A,c as V,O as ye,P as oe}from"../../chunks/index-981bc336.js";import{b as se,p as ve,c as ke}from"../../chunks/store-69d22bd8.js";import{P as Ce}from"../../chunks/ProductList-4a1e70a6.js";function Ee(i){let e,t=i[1].name+"",s,a,o,r,n,l;return{c(){e=y("a"),s=M(t),this.h()},l(_){e=k(_,"A",{href:!0,"data-category-name":!0,class:!0});var p=C(e);s=D(p,t),p.forEach(v),this.h()},h(){h(e,"href",a="#"+i[1].name),h(e,"data-category-name",o=i[1].name),h(e,"class",r="category "+(i[0].id===i[1].id?"category--active":"")+" svelte-1c0y5ce")},m(_,p){I(_,e,p),m(e,s),n||(l=de(e,"click",i[3]),n=!0)},p(_,[p]){p&2&&t!==(t=_[1].name+"")&&F(s,t),p&2&&a!==(a="#"+_[1].name)&&h(e,"href",a),p&2&&o!==(o=_[1].name)&&h(e,"data-category-name",o),p&3&&r!==(r="category "+(_[0].id===_[1].id?"category--active":"")+" svelte-1c0y5ce")&&h(e,"class",r)},i:z,o:z,d(_){_&&v(e),n=!1,l()}}}const ie=40;function Be(i,e,t){let{category:s={id:0,name:""}}=e,{currentCategory:a={id:0,name:""}}=e;function o(){let n=document.getElementById(s.name);setTimeout(()=>{document.documentElement.clientHeight==document.body.scrollHeight-window.pageYOffset||window.pageYOffset+ie==n.offsetTop?(t(0,a=s),setTimeout(()=>{t(0,a=s)},100)):o()},100)}const r=n=>{n.preventDefault();let l=document.getElementById(s.name),_=l?l.offsetTop:0;window.scrollTo({top:_-ie,behavior:"smooth"}),o()};return i.$$set=n=>{"category"in n&&t(1,s=n.category),"currentCategory"in n&&t(0,a=n.currentCategory)},[a,s,o,r]}class we extends X{constructor(e){super(),Q(this,e,Be,Ee,Z,{category:1,currentCategory:0})}}function ce(i,e,t){const s=i.slice();return s[3]=e[t],s}function ue(i,e){let t,s,a,o;function r(l){e[2](l)}let n={category:e[3]};return e[0]!==void 0&&(n.currentCategory=e[0]),s=new we({props:n}),S.push(()=>L(s,"currentCategory",r)),{key:i,first:null,c(){t=q(),J(s.$$.fragment),this.h()},l(l){t=q(),K(s.$$.fragment,l),this.h()},h(){this.first=t},m(l,_){I(l,t,_),R(s,l,_),o=!0},p(l,_){e=l;const p={};_&2&&(p.category=e[3]),!a&&_&1&&(a=!0,p.currentCategory=e[0],H(()=>a=!1)),s.$set(p)},i(l){o||(N(s.$$.fragment,l),o=!0)},o(l){P(s.$$.fragment,l),o=!1},d(l){l&&v(t),U(s,l)}}}function Te(i){let e,t=[],s=new Map,a,o=i[1];const r=n=>n[3].id;for(let n=0;n<o.length;n+=1){let l=ce(i,o,n),_=r(l);s.set(_,t[n]=ue(_,l))}return{c(){e=y("div");for(let n=0;n<t.length;n+=1)t[n].c();this.h()},l(n){e=k(n,"DIV",{class:!0});var l=C(e);for(let _=0;_<t.length;_+=1)t[_].l(l);l.forEach(v),this.h()},h(){h(e,"class","categories svelte-xbh343")},m(n,l){I(n,e,l);for(let _=0;_<t.length;_+=1)t[_].m(e,null);a=!0},p(n,[l]){l&3&&(o=n[1],he(),t=pe(t,l,r,1,n,o,s,e,be,ue,null,ce),me())},i(n){if(!a){for(let l=0;l<o.length;l+=1)N(t[l]);a=!0}},o(n){for(let l=0;l<t.length;l+=1)P(t[l]);a=!1},d(n){n&&v(e);for(let l=0;l<t.length;l+=1)t[l].d()}}}function Ie(i,e,t){let{categories:s=[]}=e,{currentCategory:a={id:0,name:""}}=e;re(()=>{let r=document.getElementsByClassName("category");[].forEach.call(r,function(n,l,_){})});function o(r){a=r,t(0,a)}return i.$$set=r=>{"categories"in r&&t(1,s=r.categories),"currentCategory"in r&&t(0,a=r.currentCategory)},[a,s,o]}class Me extends X{constructor(e){super(),Q(this,e,Ie,Te,Z,{categories:1,currentCategory:0})}}function _e(i,e,t){const s=i.slice();return s[3]=e[t],s}function fe(i){let e,t,s,a,o,r,n,l,_=i[3].name+"",p,f,g=(i[0][i[3].id]||0)+"",b,c,u,d,w=i[3].description+"",T,$,O,W=i[3].price*i[0][i[3].id]+"",G,x;return{c(){e=y("div"),t=y("div"),s=y("img"),o=A(),r=y("div"),n=y("div"),l=y("span"),p=M(_),f=y("span"),b=M(g),c=M("x"),u=A(),d=y("span"),T=M(w),$=A(),O=y("div"),G=M(W),x=A(),this.h()},l(E){e=k(E,"DIV",{class:!0});var B=C(e);t=k(B,"DIV",{class:!0});var Y=C(t);s=k(Y,"IMG",{class:!0,src:!0,alt:!0}),o=V(Y),r=k(Y,"DIV",{class:!0});var j=C(r);n=k(j,"DIV",{class:!0});var ee=C(n);l=k(ee,"SPAN",{class:!0});var ae=C(l);p=D(ae,_),ae.forEach(v),f=k(ee,"SPAN",{class:!0});var te=C(f);b=D(te,g),c=D(te,"x"),te.forEach(v),ee.forEach(v),u=V(j),d=k(j,"SPAN",{class:!0});var ne=C(d);T=D(ne,w),ne.forEach(v),j.forEach(v),Y.forEach(v),$=V(B),O=k(B,"DIV",{class:!0});var le=C(O);G=D(le,W),le.forEach(v),x=V(B),B.forEach(v),this.h()},h(){h(s,"class","item__img svelte-11x6ndh"),oe(s.src,a="/bipolar0wl/"+i[3].image)||h(s,"src",a),h(s,"alt",""),h(l,"class","item__name svelte-11x6ndh"),h(f,"class","item__count svelte-11x6ndh"),h(n,"class","svelte-11x6ndh"),h(d,"class","item__description svelte-11x6ndh"),h(r,"class","item__text svelte-11x6ndh"),h(t,"class","item__info svelte-11x6ndh"),h(O,"class","item__price svelte-11x6ndh"),h(e,"class","item svelte-11x6ndh")},m(E,B){I(E,e,B),m(e,t),m(t,s),m(t,o),m(t,r),m(r,n),m(n,l),m(l,p),m(n,f),m(f,b),m(f,c),m(r,u),m(r,d),m(d,T),m(e,$),m(e,O),m(O,G),m(e,x)},p(E,B){B&2&&!oe(s.src,a="/bipolar0wl/"+E[3].image)&&h(s,"src",a),B&2&&_!==(_=E[3].name+"")&&F(p,_),B&3&&g!==(g=(E[0][E[3].id]||0)+"")&&F(b,g),B&2&&w!==(w=E[3].description+"")&&F(T,w),B&3&&W!==(W=E[3].price*E[0][E[3].id]+"")&&F(G,W)},d(E){E&&v(e)}}}function ge(i,e){let t,s,a=e[0][e[3].id]!=null&&fe(e);return{key:i,first:null,c(){t=q(),a&&a.c(),s=q(),this.h()},l(o){t=q(),a&&a.l(o),s=q(),this.h()},h(){this.first=t},m(o,r){I(o,t,r),a&&a.m(o,r),I(o,s,r)},p(o,r){e=o,e[0][e[3].id]!=null?a?a.p(e,r):(a=fe(e),a.c(),a.m(s.parentNode,s)):a&&(a.d(1),a=null)},d(o){o&&v(t),a&&a.d(o),o&&v(s)}}}function De(i){let e,t,s,a=[],o=new Map,r,n,l,_=i[1];const p=f=>f[3].id;for(let f=0;f<_.length;f+=1){let g=_e(i,_,f),b=p(g);o.set(b,a[f]=ge(b,g))}return{c(){e=y("div"),t=y("div"),s=y("div");for(let f=0;f<a.length;f+=1)a[f].c();r=A(),n=y("div"),l=y("textarea"),this.h()},l(f){e=k(f,"DIV",{class:!0});var g=C(e);t=k(g,"DIV",{class:!0});var b=C(t);s=k(b,"DIV",{class:!0});var c=C(s);for(let d=0;d<a.length;d+=1)a[d].l(c);c.forEach(v),b.forEach(v),r=V(g),n=k(g,"DIV",{class:!0});var u=C(n);l=k(u,"TEXTAREA",{class:!0,type:!0,placeholder:!0}),C(l).forEach(v),u.forEach(v),g.forEach(v),this.h()},h(){h(s,"class","basket__order__list svelte-11x6ndh"),h(t,"class","basket__order svelte-11x6ndh"),h(l,"class","basket__comment svelte-11x6ndh"),h(l,"type","text"),h(l,"placeholder","\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439"),h(n,"class","svelte-11x6ndh"),h(e,"class","basket svelte-11x6ndh")},m(f,g){I(f,e,g),m(e,t),m(t,s);for(let b=0;b<a.length;b+=1)a[b].m(s,null);m(e,r),m(e,n),m(n,l)},p(f,[g]){g&3&&(_=f[1],a=pe(a,g,p,1,f,_,o,s,ye,ge,null,_e))},i:z,o:z,d(f){f&&v(e);for(let g=0;g<a.length;g+=1)a[g].d()}}}function Ae(i,e,t){let{page:s=1}=e,a={};se.subscribe(r=>{t(0,a=r)});let o=[];return ve.subscribe(r=>{t(1,o=r)}),re(async()=>{let r=window.Telegram.WebApp;r.BackButton.show(),r.BackButton.onClick(()=>{t(2,s=0),r.BackButton.hide()});for(var n=document.querySelectorAll(".basket__back a"),l=0;l<n.length;l++)n[l].addEventListener("click",function(){t(2,s=s==0?1:0)})}),i.$$set=r=>{"page"in r&&t(2,s=r.page)},[a,o,s]}class Ve extends X{constructor(e){super(),Q(this,e,Ae,De,Z,{page:2})}}function Ne(i){let e,t,s;function a(r){i[10](r)}let o={};return i[4]!==void 0&&(o.page=i[4]),e=new Ve({props:o}),S.push(()=>L(e,"page",a)),{c(){J(e.$$.fragment)},l(r){K(e.$$.fragment,r)},m(r,n){R(e,r,n),s=!0},p(r,n){const l={};!t&&n&16&&(t=!0,l.page=r[4],H(()=>t=!1)),e.$set(l)},i(r){s||(N(e.$$.fragment,r),s=!0)},o(r){P(e.$$.fragment,r),s=!1},d(r){U(e,r)}}}function Pe(i){let e,t,s,a,o,r,n,l;function _(u){i[6](u)}function p(u){i[7](u)}let f={};i[1]!==void 0&&(f.categories=i[1]),i[3]!==void 0&&(f.currentCategory=i[3]),e=new Me({props:f}),S.push(()=>L(e,"categories",_)),S.push(()=>L(e,"currentCategory",p));function g(u){i[8](u)}function b(u){i[9](u)}let c={products:i[2],categories:i[1]};return i[0]!==void 0&&(c.basket=i[0]),i[3]!==void 0&&(c.currentCategory=i[3]),o=new Ce({props:c}),S.push(()=>L(o,"basket",g)),S.push(()=>L(o,"currentCategory",b)),{c(){J(e.$$.fragment),a=A(),J(o.$$.fragment)},l(u){K(e.$$.fragment,u),a=V(u),K(o.$$.fragment,u)},m(u,d){R(e,u,d),I(u,a,d),R(o,u,d),l=!0},p(u,d){const w={};!t&&d&2&&(t=!0,w.categories=u[1],H(()=>t=!1)),!s&&d&8&&(s=!0,w.currentCategory=u[3],H(()=>s=!1)),e.$set(w);const T={};d&4&&(T.products=u[2]),d&2&&(T.categories=u[1]),!r&&d&1&&(r=!0,T.basket=u[0],H(()=>r=!1)),!n&&d&8&&(n=!0,T.currentCategory=u[3],H(()=>n=!1)),o.$set(T)},i(u){l||(N(e.$$.fragment,u),N(o.$$.fragment,u),l=!0)},o(u){P(e.$$.fragment,u),P(o.$$.fragment,u),l=!1},d(u){U(e,u),u&&v(a),U(o,u)}}}function Oe(i){let e,t,s,a,o,r,n,l,_,p;const f=[Pe,Ne],g=[];function b(c,u){return c[4]==0?0:1}return s=b(i),a=g[s]=f[s](i),{c(){e=y("main"),t=y("div"),a.c(),o=A(),r=y("button"),n=M("click me"),this.h()},l(c){e=k(c,"MAIN",{class:!0});var u=C(e);t=k(u,"DIV",{class:!0});var d=C(t);a.l(d),o=V(d),r=k(d,"BUTTON",{class:!0});var w=C(r);n=D(w,"click me"),w.forEach(v),d.forEach(v),u.forEach(v),this.h()},h(){h(r,"class","svelte-plkv"),h(t,"class","app svelte-plkv"),h(e,"class","svelte-plkv")},m(c,u){I(c,e,u),m(e,t),g[s].m(t,null),m(t,o),m(t,r),m(r,n),l=!0,_||(p=de(r,"click",i[5]),_=!0)},p(c,[u]){let d=s;s=b(c),s===d?g[s].p(c,u):(he(),P(g[d],1,1,()=>{g[d]=null}),me(),a=g[s],a?a.p(c,u):(a=g[s]=f[s](c),a.c()),N(a,1),a.m(t,o))},i(c){l||(N(a),l=!0)},o(c){P(a),l=!1},d(c){c&&v(e),g[s].d(),_=!1,p()}}}function Se(i,e,t){let s=[],a=[],o={},r={},n=0;ke.subscribe(c=>{t(1,s=c)}),ve.subscribe(c=>{t(2,a=c)}),re(async()=>{let c=window.Telegram.WebApp;t(3,o=s[0]),c.expand(),c.MainButton.setText("\u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0437\u0430\u043A\u0430\u0437"),c.MainButton.setParams({color:"#31b545"}),c.setBackgroundColor("secondary_bg_color"),c.MainButton.onClick(()=>{alert(window.Telegram.WebApp.MainButton),c.HapticFeedback.impactOccurred("light"),n==0&&t(4,n=1)}),se.subscribe(u=>{t(0,r=u),Object.keys(r).length!==0?c.MainButton.show():c.MainButton.hide()}),c.onEvent("mainButtonClicked",function(){c.sendData("item"),n==0?(alert(0),t(4,n=1),alert(1),c.MainButton.setText(`\u041A \u043E\u0444\u043E\u0440\u043C\u043B\u0435\u043D\u0438\u044E ${r.reduce((u,d)=>u+d,0)} \u20BD`),alert(2)):(alert(3),t(4,n=0),alert(4),c.MainButton.setText("\u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0437\u0430\u043A\u0430\u0437"),alert(5))})});function l(){let c=window.Telegram.WebApp;n==0?(t(4,n=1),c.MainButton.setText(`\u041A \u043E\u0444\u043E\u0440\u043C\u043B\u0435\u043D\u0438\u044E ${r.reduce((u,d)=>u+d,0)} \u20BD`)):(t(4,n=0),c.MainButton.setText("\u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0437\u0430\u043A\u0430\u0437"))}function _(c){s=c,t(1,s)}function p(c){o=c,t(3,o)}function f(c){r=c,t(0,r)}function g(c){o=c,t(3,o)}function b(c){n=c,t(4,n)}return i.$$.update=()=>{i.$$.dirty&1&&se.set(r)},[r,s,a,o,n,l,_,p,f,g,b]}class We extends X{constructor(e){super(),Q(this,e,Se,Oe,Z,{})}}export{We as default};
