import{S as q,i as F,s as S,k as v,q as W,l as k,m as w,r as Q,h as m,n as d,b as M,G as A,I as R,u as U,B as V,g as X,J as Y,K as Z,d as x,f as B,t as E,o as J,L as p,M as b,e as j,w as $,x as D,y as N,N as C,z as P,a as ee,c as te}from"../../chunks/index-24e95d3e.js";import{c as re,p as ae,b as z}from"../../chunks/store-a10cd813.js";import{P as se}from"../../chunks/ProductList-26c401df.js";function ne(n){let t,e=n[1].name+"",a,l,c,o,s,r;return{c(){t=v("a"),a=W(e),this.h()},l(i){t=k(i,"A",{href:!0,"data-category-name":!0,class:!0});var _=w(t);a=Q(_,e),_.forEach(m),this.h()},h(){d(t,"href",l="#"+n[1].name),d(t,"data-category-name",c=n[1].name),d(t,"class",o="category "+(n[0].id===n[1].id?"category--active":"")+" svelte-adoked")},m(i,_){M(i,t,_),A(t,a),s||(r=R(t,"click",n[2]),s=!0)},p(i,[_]){_&2&&e!==(e=i[1].name+"")&&U(a,e),_&2&&l!==(l="#"+i[1].name)&&d(t,"href",l),_&2&&c!==(c=i[1].name)&&d(t,"data-category-name",c),_&3&&o!==(o="category "+(i[0].id===i[1].id?"category--active":"")+" svelte-adoked")&&d(t,"class",o)},i:V,o:V,d(i){i&&m(t),s=!1,r()}}}function oe(n,t,e){let{category:a={id:0,name:""}}=t,{currentCategory:l={id:0,name:""}}=t;const c=o=>{o.preventDefault();let s=document.getElementById(a.name),r=s?s.offsetTop:0;window.scrollTo({top:r-40,behavior:"smooth"}),setTimeout(()=>{e(0,l=a)},250)};return n.$$set=o=>{"category"in o&&e(1,a=o.category),"currentCategory"in o&&e(0,l=o.currentCategory)},[l,a,c]}class ie extends q{constructor(t){super(),F(this,t,oe,ne,S,{category:1,currentCategory:0})}}function G(n,t,e){const a=n.slice();return a[3]=t[e],a}function H(n,t){let e,a,l,c;function o(r){t[2](r)}let s={category:t[3]};return t[0]!==void 0&&(s.currentCategory=t[0]),a=new ie({props:s}),p.push(()=>b(a,"currentCategory",o)),{key:n,first:null,c(){e=j(),$(a.$$.fragment),this.h()},l(r){e=j(),D(a.$$.fragment,r),this.h()},h(){this.first=e},m(r,i){M(r,e,i),N(a,r,i),c=!0},p(r,i){t=r;const _={};i&2&&(_.category=t[3]),!l&&i&1&&(l=!0,_.currentCategory=t[0],C(()=>l=!1)),a.$set(_)},i(r){c||(B(a.$$.fragment,r),c=!0)},o(r){E(a.$$.fragment,r),c=!1},d(r){r&&m(e),P(a,r)}}}function ce(n){let t,e=[],a=new Map,l,c=n[1];const o=s=>s[3].id;for(let s=0;s<c.length;s+=1){let r=G(n,c,s),i=o(r);a.set(i,e[s]=H(i,r))}return{c(){t=v("div");for(let s=0;s<e.length;s+=1)e[s].c();this.h()},l(s){t=k(s,"DIV",{class:!0});var r=w(t);for(let i=0;i<e.length;i+=1)e[i].l(r);r.forEach(m),this.h()},h(){d(t,"class","categories svelte-1g98d80")},m(s,r){M(s,t,r);for(let i=0;i<e.length;i+=1)e[i].m(t,null);l=!0},p(s,[r]){r&3&&(c=s[1],X(),e=Y(e,r,o,1,s,c,a,t,Z,H,null,G),x())},i(s){if(!l){for(let r=0;r<c.length;r+=1)B(e[r]);l=!0}},o(s){for(let r=0;r<e.length;r+=1)E(e[r]);l=!1},d(s){s&&m(t);for(let r=0;r<e.length;r+=1)e[r].d()}}}function le(n,t,e){let{categories:a=[]}=t,{currentCategory:l={id:0,name:""}}=t;J(()=>{let o=document.getElementsByClassName("category");[].forEach.call(o,function(s,r,i){})});function c(o){l=o,e(0,l)}return n.$$set=o=>{"categories"in o&&e(1,a=o.categories),"currentCategory"in o&&e(0,l=o.currentCategory)},[l,a,c]}class ue extends q{constructor(t){super(),F(this,t,le,ce,S,{categories:1,currentCategory:0})}}function ge(n){let t,e,a,l,c,o,s,r,i,_;function g(u){n[4](u)}function I(u){n[5](u)}let L={};n[1]!==void 0&&(L.categories=n[1]),n[3]!==void 0&&(L.currentCategory=n[3]),a=new ue({props:L}),p.push(()=>b(a,"categories",g)),p.push(()=>b(a,"currentCategory",I));function K(u){n[6](u)}function O(u){n[7](u)}let T={products:n[2],categories:n[1]};return n[0]!==void 0&&(T.basket=n[0]),n[3]!==void 0&&(T.currentCategory=n[3]),s=new se({props:T}),p.push(()=>b(s,"basket",K)),p.push(()=>b(s,"currentCategory",O)),{c(){t=v("main"),e=v("div"),$(a.$$.fragment),o=ee(),$(s.$$.fragment),this.h()},l(u){t=k(u,"MAIN",{class:!0});var f=w(t);e=k(f,"DIV",{class:!0});var h=w(e);D(a.$$.fragment,h),o=te(h),D(s.$$.fragment,h),h.forEach(m),f.forEach(m),this.h()},h(){d(e,"class","app svelte-10l4d0h"),d(t,"class","svelte-10l4d0h")},m(u,f){M(u,t,f),A(t,e),N(a,e,null),A(e,o),N(s,e,null),_=!0},p(u,[f]){const h={};!l&&f&2&&(l=!0,h.categories=u[1],C(()=>l=!1)),!c&&f&8&&(c=!0,h.currentCategory=u[3],C(()=>c=!1)),a.$set(h);const y={};f&4&&(y.products=u[2]),f&2&&(y.categories=u[1]),!r&&f&1&&(r=!0,y.basket=u[0],C(()=>r=!1)),!i&&f&8&&(i=!0,y.currentCategory=u[3],C(()=>i=!1)),s.$set(y)},i(u){_||(B(a.$$.fragment,u),B(s.$$.fragment,u),_=!0)},o(u){E(a.$$.fragment,u),E(s.$$.fragment,u),_=!1},d(u){u&&m(t),P(a),P(s)}}}function _e(n,t,e){let a=[],l=[],c={},o={};re.subscribe(g=>{e(1,a=g)}),ae.subscribe(g=>{e(2,l=g)}),J(async()=>{let g=window.Telegram.WebApp;e(3,c=a[0]),g.setBackgroundColor("#ffa"),g.expand(),g.MainButton.setText("\u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0437\u0430\u043A\u0430\u0437"),g.setBackgroundColor("#C21C01"),g.bg_color="#F59000",g.secondary_bg_color="##29A800",z.subscribe(I=>{e(0,o=I),Object.keys(o).length!==0?g.MainButton.show():g.MainButton.hide()})});function s(g){a=g,e(1,a)}function r(g){c=g,e(3,c)}function i(g){o=g,e(0,o)}function _(g){c=g,e(3,c)}return n.$$.update=()=>{n.$$.dirty&1&&z.set(o)},[o,a,l,c,s,r,i,_]}class me extends q{constructor(t){super(),F(this,t,_e,ge,S,{})}}export{me as default};
