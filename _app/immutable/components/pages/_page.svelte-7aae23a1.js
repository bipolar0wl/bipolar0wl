import{S as N,i as S,s as q,k as v,q as W,l as k,m as w,r as Q,h,n as d,b as M,G as O,I as R,u as U,B as V,g as X,J as Z,K as x,d as ee,f as B,t as E,o as G,L as p,M as b,e as Y,w as P,x as A,y as D,N as C,z as H,a as te,c as re}from"../../chunks/index-24e95d3e.js";import{c as ae,p as se,b as $}from"../../chunks/store-a10cd813.js";import{P as ne}from"../../chunks/ProductList-bde7bc8d.js";function oe(n){let t,e=n[1].name+"",s,l,i,c,r,a;return{c(){t=v("a"),s=W(e),this.h()},l(o){t=k(o,"A",{href:!0,"data-category-name":!0,class:!0});var g=w(t);s=Q(g,e),g.forEach(h),this.h()},h(){d(t,"href",l="#"+n[1].name),d(t,"data-category-name",i=n[1].name),d(t,"class",c="category "+(n[0].id===n[1].id?"category--active":"")+" svelte-adoked")},m(o,g){M(o,t,g),O(t,s),r||(a=R(t,"click",n[3]),r=!0)},p(o,[g]){g&2&&e!==(e=o[1].name+"")&&U(s,e),g&2&&l!==(l="#"+o[1].name)&&d(t,"href",l),g&2&&i!==(i=o[1].name)&&d(t,"data-category-name",i),g&3&&c!==(c="category "+(o[0].id===o[1].id?"category--active":"")+" svelte-adoked")&&d(t,"class",c)},i:V,o:V,d(o){o&&h(t),r=!1,a()}}}const j=40;function ie(n,t,e){let{category:s={id:0,name:""}}=t,{currentCategory:l={id:0,name:""}}=t;function i(){let r=document.getElementById(s.name);setTimeout(()=>{document.documentElement.clientHeight==document.body.scrollHeight-window.pageYOffset||window.pageYOffset+j==r.offsetTop?(e(0,l=s),setTimeout(()=>{e(0,l=s)},100)):i()},100)}const c=r=>{r.preventDefault();let a=document.getElementById(s.name),o=a?a.offsetTop:0;window.scrollTo({top:o-j,behavior:"smooth"}),i()};return n.$$set=r=>{"category"in r&&e(1,s=r.category),"currentCategory"in r&&e(0,l=r.currentCategory)},[l,s,i,c]}class ce extends N{constructor(t){super(),S(this,t,ie,oe,q,{category:1,currentCategory:0})}}function z(n,t,e){const s=n.slice();return s[3]=t[e],s}function F(n,t){let e,s,l,i;function c(a){t[2](a)}let r={category:t[3]};return t[0]!==void 0&&(r.currentCategory=t[0]),s=new ce({props:r}),p.push(()=>b(s,"currentCategory",c)),{key:n,first:null,c(){e=Y(),P(s.$$.fragment),this.h()},l(a){e=Y(),A(s.$$.fragment,a),this.h()},h(){this.first=e},m(a,o){M(a,e,o),D(s,a,o),i=!0},p(a,o){t=a;const g={};o&2&&(g.category=t[3]),!l&&o&1&&(l=!0,g.currentCategory=t[0],C(()=>l=!1)),s.$set(g)},i(a){i||(B(s.$$.fragment,a),i=!0)},o(a){E(s.$$.fragment,a),i=!1},d(a){a&&h(e),H(s,a)}}}function le(n){let t,e=[],s=new Map,l,i=n[1];const c=r=>r[3].id;for(let r=0;r<i.length;r+=1){let a=z(n,i,r),o=c(a);s.set(o,e[r]=F(o,a))}return{c(){t=v("div");for(let r=0;r<e.length;r+=1)e[r].c();this.h()},l(r){t=k(r,"DIV",{class:!0});var a=w(t);for(let o=0;o<e.length;o+=1)e[o].l(a);a.forEach(h),this.h()},h(){d(t,"class","categories svelte-xbh343")},m(r,a){M(r,t,a);for(let o=0;o<e.length;o+=1)e[o].m(t,null);l=!0},p(r,[a]){a&3&&(i=r[1],X(),e=Z(e,a,c,1,r,i,s,t,x,F,null,z),ee())},i(r){if(!l){for(let a=0;a<i.length;a+=1)B(e[a]);l=!0}},o(r){for(let a=0;a<e.length;a+=1)E(e[a]);l=!1},d(r){r&&h(t);for(let a=0;a<e.length;a+=1)e[a].d()}}}function ue(n,t,e){let{categories:s=[]}=t,{currentCategory:l={id:0,name:""}}=t;G(()=>{let c=document.getElementsByClassName("category");[].forEach.call(c,function(r,a,o){})});function i(c){l=c,e(0,l)}return n.$$set=c=>{"categories"in c&&e(1,s=c.categories),"currentCategory"in c&&e(0,l=c.currentCategory)},[l,s,i]}class ge extends N{constructor(t){super(),S(this,t,ue,le,q,{categories:1,currentCategory:0})}}function fe(n){let t,e,s,l,i,c,r,a,o,g;function f(u){n[4](u)}function T(u){n[5](u)}let I={};n[1]!==void 0&&(I.categories=n[1]),n[3]!==void 0&&(I.currentCategory=n[3]),s=new ge({props:I}),p.push(()=>b(s,"categories",f)),p.push(()=>b(s,"currentCategory",T));function J(u){n[6](u)}function K(u){n[7](u)}let L={products:n[2],categories:n[1]};return n[0]!==void 0&&(L.basket=n[0]),n[3]!==void 0&&(L.currentCategory=n[3]),r=new ne({props:L}),p.push(()=>b(r,"basket",J)),p.push(()=>b(r,"currentCategory",K)),{c(){t=v("main"),e=v("div"),P(s.$$.fragment),c=te(),P(r.$$.fragment),this.h()},l(u){t=k(u,"MAIN",{class:!0});var _=w(t);e=k(_,"DIV",{class:!0});var m=w(e);A(s.$$.fragment,m),c=re(m),A(r.$$.fragment,m),m.forEach(h),_.forEach(h),this.h()},h(){d(e,"class","app svelte-10l4d0h"),d(t,"class","svelte-10l4d0h")},m(u,_){M(u,t,_),O(t,e),D(s,e,null),O(e,c),D(r,e,null),g=!0},p(u,[_]){const m={};!l&&_&2&&(l=!0,m.categories=u[1],C(()=>l=!1)),!i&&_&8&&(i=!0,m.currentCategory=u[3],C(()=>i=!1)),s.$set(m);const y={};_&4&&(y.products=u[2]),_&2&&(y.categories=u[1]),!a&&_&1&&(a=!0,y.basket=u[0],C(()=>a=!1)),!o&&_&8&&(o=!0,y.currentCategory=u[3],C(()=>o=!1)),r.$set(y)},i(u){g||(B(s.$$.fragment,u),B(r.$$.fragment,u),g=!0)},o(u){E(s.$$.fragment,u),E(r.$$.fragment,u),g=!1},d(u){u&&h(t),H(s),H(r)}}}function _e(n,t,e){let s=[],l=[],i={},c={};ae.subscribe(f=>{e(1,s=f)}),se.subscribe(f=>{e(2,l=f)}),G(async()=>{let f=window.Telegram.WebApp;e(3,i=s[0]),f.expand(),f.MainButton.setText("\u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0437\u0430\u043A\u0430\u0437"),f.MainButton.setParams({color:"#31b545"}),f.setBackgroundColor("secondary_bg_color"),$.subscribe(T=>{e(0,c=T),Object.keys(c).length!==0?f.MainButton.show():f.MainButton.hide()})});function r(f){s=f,e(1,s)}function a(f){i=f,e(3,i)}function o(f){c=f,e(0,c)}function g(f){i=f,e(3,i)}return n.$$.update=()=>{n.$$.dirty&1&&$.set(c)},[c,s,l,i,r,a,o,g]}class ye extends N{constructor(t){super(),S(this,t,_e,fe,q,{})}}export{ye as default};
