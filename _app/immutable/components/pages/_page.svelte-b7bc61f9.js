import{S as ae,i as le,s as oe,k as p,q as T,l as v,m as y,r as N,h as g,n as d,b as O,G as u,I as $e,u as R,B as U,g as ke,J as Ce,K as we,d as Ee,f as G,t as Y,o as je,L as W,M as X,e as F,w as ee,x as te,y as se,N as Q,z as re,a as M,c as P,O as De,P as ge}from"../../chunks/index-981bc336.js";import{b as ie,p as Ie,c as Be}from"../../chunks/store-6888a841.js";import{P as Ve}from"../../chunks/ProductList-8021890c.js";function Ae(i){let e,s=i[1].name+"",t,r,a,c,l,o;return{c(){e=p("a"),t=T(s),this.h()},l(n){e=v(n,"A",{href:!0,"data-category-name":!0,class:!0});var _=y(e);t=N(_,s),_.forEach(g),this.h()},h(){d(e,"href",r="#"+i[1].name),d(e,"data-category-name",a=i[1].name),d(e,"class",c="category "+(i[0].id===i[1].id?"category--active":"")+" svelte-adoked")},m(n,_){O(n,e,_),u(e,t),l||(o=$e(e,"click",i[3]),l=!0)},p(n,[_]){_&2&&s!==(s=n[1].name+"")&&R(t,s),_&2&&r!==(r="#"+n[1].name)&&d(e,"href",r),_&2&&a!==(a=n[1].name)&&d(e,"data-category-name",a),_&3&&c!==(c="category "+(n[0].id===n[1].id?"category--active":"")+" svelte-adoked")&&d(e,"class",c)},i:U,o:U,d(n){n&&g(e),l=!1,o()}}}const me=40;function Me(i,e,s){let{category:t={id:0,name:""}}=e,{currentCategory:r={id:0,name:""}}=e;function a(){let l=document.getElementById(t.name);setTimeout(()=>{document.documentElement.clientHeight==document.body.scrollHeight-window.pageYOffset||window.pageYOffset+me==l.offsetTop?(s(0,r=t),setTimeout(()=>{s(0,r=t)},100)):a()},100)}const c=l=>{l.preventDefault();let o=document.getElementById(t.name),n=o?o.offsetTop:0;window.scrollTo({top:n-me,behavior:"smooth"}),a()};return i.$$set=l=>{"category"in l&&s(1,t=l.category),"currentCategory"in l&&s(0,r=l.currentCategory)},[r,t,a,c]}class Pe extends ae{constructor(e){super(),le(this,e,Me,Ae,oe,{category:1,currentCategory:0})}}function he(i,e,s){const t=i.slice();return t[3]=e[s],t}function pe(i,e){let s,t,r,a;function c(o){e[2](o)}let l={category:e[3]};return e[0]!==void 0&&(l.currentCategory=e[0]),t=new Pe({props:l}),W.push(()=>X(t,"currentCategory",c)),{key:i,first:null,c(){s=F(),ee(t.$$.fragment),this.h()},l(o){s=F(),te(t.$$.fragment,o),this.h()},h(){this.first=s},m(o,n){O(o,s,n),se(t,o,n),a=!0},p(o,n){e=o;const _={};n&2&&(_.category=e[3]),!r&&n&1&&(r=!0,_.currentCategory=e[0],Q(()=>r=!1)),t.$set(_)},i(o){a||(G(t.$$.fragment,o),a=!0)},o(o){Y(t.$$.fragment,o),a=!1},d(o){o&&g(s),re(t,o)}}}function Te(i){let e,s=[],t=new Map,r,a=i[1];const c=l=>l[3].id;for(let l=0;l<a.length;l+=1){let o=he(i,a,l),n=c(o);t.set(n,s[l]=pe(n,o))}return{c(){e=p("div");for(let l=0;l<s.length;l+=1)s[l].c();this.h()},l(l){e=v(l,"DIV",{class:!0});var o=y(e);for(let n=0;n<s.length;n+=1)s[n].l(o);o.forEach(g),this.h()},h(){d(e,"class","categories svelte-xbh343")},m(l,o){O(l,e,o);for(let n=0;n<s.length;n+=1)s[n].m(e,null);r=!0},p(l,[o]){o&3&&(a=l[1],ke(),s=Ce(s,o,c,1,l,a,t,e,we,pe,null,he),Ee())},i(l){if(!r){for(let o=0;o<a.length;o+=1)G(s[o]);r=!0}},o(l){for(let o=0;o<s.length;o+=1)Y(s[o]);r=!1},d(l){l&&g(e);for(let o=0;o<s.length;o+=1)s[o].d()}}}function Ne(i,e,s){let{categories:t=[]}=e,{currentCategory:r={id:0,name:""}}=e;je(()=>{let c=document.getElementsByClassName("category");[].forEach.call(c,function(l,o,n){})});function a(c){r=c,s(0,r)}return i.$$set=c=>{"categories"in c&&s(1,t=c.categories),"currentCategory"in c&&s(0,r=c.currentCategory)},[r,t,a]}class Se extends ae{constructor(e){super(),le(this,e,Ne,Te,oe,{categories:1,currentCategory:0})}}function ve(i,e,s){const t=i.slice();return t[2]=e[s],t}function ye(i){let e,s,t,r,a,c,l,o,n=i[2].name+"",_,h,m=(i[0][i[2].id]||0)+"",B,w,f,E,I=i[2].description+"",C,z,S,V=i[2].price+"",A,q;return{c(){e=p("div"),s=p("div"),t=p("img"),a=M(),c=p("div"),l=p("div"),o=p("span"),_=T(n),h=p("span"),B=T(m),w=T("x"),f=M(),E=p("span"),C=T(I),z=M(),S=p("div"),A=T(V),q=M(),this.h()},l(j){e=v(j,"DIV",{class:!0});var $=y(e);s=v($,"DIV",{class:!0});var L=y(s);t=v(L,"IMG",{class:!0,src:!0,alt:!0}),a=P(L),c=v(L,"DIV",{class:!0});var H=y(c);l=v(H,"DIV",{class:!0});var b=y(l);o=v(b,"SPAN",{class:!0});var k=y(o);_=N(k,n),k.forEach(g),h=v(b,"SPAN",{class:!0});var D=y(h);B=N(D,m),w=N(D,"x"),D.forEach(g),b.forEach(g),f=P(H),E=v(H,"SPAN",{class:!0});var J=y(E);C=N(J,I),J.forEach(g),H.forEach(g),L.forEach(g),z=P($),S=v($,"DIV",{class:!0});var K=y(S);A=N(K,V),K.forEach(g),q=P($),$.forEach(g),this.h()},h(){d(t,"class","item__img svelte-mxor1j"),ge(t.src,r=i[2].image)||d(t,"src",r),d(t,"alt",""),d(o,"class","item__name svelte-mxor1j"),d(h,"class","item__count svelte-mxor1j"),d(l,"class","svelte-mxor1j"),d(E,"class","item__description svelte-mxor1j"),d(c,"class","item__text svelte-mxor1j"),d(s,"class","item__info svelte-mxor1j"),d(S,"class","item__price svelte-mxor1j"),d(e,"class","item svelte-mxor1j")},m(j,$){O(j,e,$),u(e,s),u(s,t),u(s,a),u(s,c),u(c,l),u(l,o),u(o,_),u(l,h),u(h,B),u(h,w),u(c,f),u(c,E),u(E,C),u(e,z),u(e,S),u(S,A),u(e,q)},p(j,$){$&2&&!ge(t.src,r=j[2].image)&&d(t,"src",r),$&2&&n!==(n=j[2].name+"")&&R(_,n),$&3&&m!==(m=(j[0][j[2].id]||0)+"")&&R(B,m),$&2&&I!==(I=j[2].description+"")&&R(C,I),$&2&&V!==(V=j[2].price+"")&&R(A,V)},d(j){j&&g(e)}}}function be(i,e){let s,t,r=e[0][e[2].id]!=null&&ye(e);return{key:i,first:null,c(){s=F(),r&&r.c(),t=F(),this.h()},l(a){s=F(),r&&r.l(a),t=F(),this.h()},h(){this.first=s},m(a,c){O(a,s,c),r&&r.m(a,c),O(a,t,c)},p(a,c){e=a,e[0][e[2].id]!=null?r?r.p(e,c):(r=ye(e),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},d(a){a&&g(s),r&&r.d(a),a&&g(t)}}}function Le(i){let e,s,t,r,a,c,l,o,n,_,h,m,B,w,f,E,I,C=[],z=new Map,S,V,A,q,j,$,L=i[1];const H=b=>b[2].id;for(let b=0;b<L.length;b+=1){let k=ve(i,L,b),D=H(k);z.set(D,C[b]=be(D,k))}return{c(){e=p("div"),s=p("div"),t=p("a"),r=T("\u2190"),a=M(),c=p("a"),l=T("\u041C\u0430\u0433\u0430\u0437\u0438\u043D"),o=M(),n=p("div"),_=p("div"),h=p("p"),m=T("\u0412\u0430\u0448 \u0437\u0430\u043A\u0430\u0437"),B=M(),w=p("a"),f=T("\u041D\u0430\u0437\u0430\u0434"),E=M(),I=p("div");for(let b=0;b<C.length;b+=1)C[b].c();S=M(),V=p("div"),A=p("textarea"),q=M(),j=p("a"),$=T("\u0417\u0430\u043A\u0430\u0437\u0430\u0442\u044C"),this.h()},l(b){e=v(b,"DIV",{class:!0});var k=y(e);s=v(k,"DIV",{class:!0});var D=y(s);t=v(D,"A",{href:!0,class:!0});var J=y(t);r=N(J,"\u2190"),J.forEach(g),a=P(D),c=v(D,"A",{href:!0,class:!0});var K=y(c);l=N(K,"\u041C\u0430\u0433\u0430\u0437\u0438\u043D"),K.forEach(g),D.forEach(g),o=P(k),n=v(k,"DIV",{class:!0});var Z=y(n);_=v(Z,"DIV",{class:!0});var x=y(_);h=v(x,"P",{class:!0});var ce=y(h);m=N(ce,"\u0412\u0430\u0448 \u0437\u0430\u043A\u0430\u0437"),ce.forEach(g),B=P(x),w=v(x,"A",{href:!0,class:!0});var ue=y(w);f=N(ue,"\u041D\u0430\u0437\u0430\u0434"),ue.forEach(g),x.forEach(g),E=P(Z),I=v(Z,"DIV",{class:!0});var _e=y(I);for(let ne=0;ne<C.length;ne+=1)C[ne].l(_e);_e.forEach(g),Z.forEach(g),S=P(k),V=v(k,"DIV",{class:!0});var fe=y(V);A=v(fe,"TEXTAREA",{class:!0,type:!0,placeholder:!0}),y(A).forEach(g),fe.forEach(g),q=P(k),j=v(k,"A",{class:!0});var de=y(j);$=N(de,"\u0417\u0430\u043A\u0430\u0437\u0430\u0442\u044C"),de.forEach(g),k.forEach(g),this.h()},h(){d(t,"href","/"),d(t,"class","svelte-mxor1j"),d(c,"href","/"),d(c,"class","svelte-mxor1j"),d(s,"class","basket__back svelte-mxor1j"),d(h,"class","basket__order__title svelte-mxor1j"),d(w,"href","/"),d(w,"class","svelte-mxor1j"),d(_,"class","basket__order__actions svelte-mxor1j"),d(I,"class","basket__order__list svelte-mxor1j"),d(n,"class","basket__order svelte-mxor1j"),d(A,"class","basket__comment svelte-mxor1j"),d(A,"type","text"),d(A,"placeholder","\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439"),d(V,"class","svelte-mxor1j"),d(j,"class","basket__buy svelte-mxor1j"),d(e,"class","basket svelte-mxor1j")},m(b,k){O(b,e,k),u(e,s),u(s,t),u(t,r),u(s,a),u(s,c),u(c,l),u(e,o),u(e,n),u(n,_),u(_,h),u(h,m),u(_,B),u(_,w),u(w,f),u(n,E),u(n,I);for(let D=0;D<C.length;D+=1)C[D].m(I,null);u(e,S),u(e,V),u(V,A),u(e,q),u(e,j),u(j,$)},p(b,[k]){k&3&&(L=b[1],C=Ce(C,k,H,1,b,L,z,I,De,be,null,ve))},i:U,o:U,d(b){b&&g(e);for(let k=0;k<C.length;k+=1)C[k].d()}}}function Oe(i,e,s){let t={};ie.subscribe(a=>{s(0,t=a)});let r=[];return Ie.subscribe(a=>{s(1,r=a)}),[t,r]}class qe extends ae{constructor(e){super(),le(this,e,Oe,Le,oe,{})}}function He(i){let e,s;return e=new qe({}),{c(){ee(e.$$.fragment)},l(t){te(e.$$.fragment,t)},m(t,r){se(e,t,r),s=!0},p:U,i(t){s||(G(e.$$.fragment,t),s=!0)},o(t){Y(e.$$.fragment,t),s=!1},d(t){re(e,t)}}}function Ge(i){let e,s,t,r,a,c,l,o;function n(f){i[5](f)}function _(f){i[6](f)}let h={};i[1]!==void 0&&(h.categories=i[1]),i[3]!==void 0&&(h.currentCategory=i[3]),e=new Se({props:h}),W.push(()=>X(e,"categories",n)),W.push(()=>X(e,"currentCategory",_));function m(f){i[7](f)}function B(f){i[8](f)}let w={products:i[2],categories:i[1]};return i[0]!==void 0&&(w.basket=i[0]),i[3]!==void 0&&(w.currentCategory=i[3]),a=new Ve({props:w}),W.push(()=>X(a,"basket",m)),W.push(()=>X(a,"currentCategory",B)),{c(){ee(e.$$.fragment),r=M(),ee(a.$$.fragment)},l(f){te(e.$$.fragment,f),r=P(f),te(a.$$.fragment,f)},m(f,E){se(e,f,E),O(f,r,E),se(a,f,E),o=!0},p(f,E){const I={};!s&&E&2&&(s=!0,I.categories=f[1],Q(()=>s=!1)),!t&&E&8&&(t=!0,I.currentCategory=f[3],Q(()=>t=!1)),e.$set(I);const C={};E&4&&(C.products=f[2]),E&2&&(C.categories=f[1]),!c&&E&1&&(c=!0,C.basket=f[0],Q(()=>c=!1)),!l&&E&8&&(l=!0,C.currentCategory=f[3],Q(()=>l=!1)),a.$set(C)},i(f){o||(G(e.$$.fragment,f),G(a.$$.fragment,f),o=!0)},o(f){Y(e.$$.fragment,f),Y(a.$$.fragment,f),o=!1},d(f){re(e,f),f&&g(r),re(a,f)}}}function Ye(i){let e,s,t,r,a;const c=[Ge,He],l=[];function o(n,_){return n[4]==0?0:1}return t=o(i),r=l[t]=c[t](i),{c(){e=p("main"),s=p("div"),r.c(),this.h()},l(n){e=v(n,"MAIN",{class:!0});var _=y(e);s=v(_,"DIV",{class:!0});var h=y(s);r.l(h),h.forEach(g),_.forEach(g),this.h()},h(){d(s,"class","app svelte-10l4d0h"),d(e,"class","svelte-10l4d0h")},m(n,_){O(n,e,_),u(e,s),l[t].m(s,null),a=!0},p(n,[_]){let h=t;t=o(n),t===h?l[t].p(n,_):(ke(),Y(l[h],1,1,()=>{l[h]=null}),Ee(),r=l[t],r?r.p(n,_):(r=l[t]=c[t](n),r.c()),G(r,1),r.m(s,null))},i(n){a||(G(r),a=!0)},o(n){Y(r),a=!1},d(n){n&&g(e),l[t].d()}}}function ze(i,e,s){let t=[],r=[],a={},c={},l=0;Be.subscribe(m=>{s(1,t=m)}),Ie.subscribe(m=>{s(2,r=m)}),je(async()=>{let m=window.Telegram.WebApp;s(3,a=t[0]),m.expand(),m.MainButton.setText("\u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0437\u0430\u043A\u0430\u0437"),m.MainButton.setParams({color:"#31b545"}),m.setBackgroundColor("secondary_bg_color"),m.MainButton.onClick(()=>{s(4,l=l==0?1:0)}),ie.subscribe(B=>{s(0,c=B),Object.keys(c).length!==0?m.MainButton.show():m.MainButton.hide()})});function o(m){t=m,s(1,t)}function n(m){a=m,s(3,a)}function _(m){c=m,s(0,c)}function h(m){a=m,s(3,a)}return i.$$.update=()=>{i.$$.dirty&1&&ie.set(c)},[c,t,r,a,l,o,n,_,h]}class Re extends ae{constructor(e){super(),le(this,e,ze,Ye,oe,{})}}export{Re as default};
