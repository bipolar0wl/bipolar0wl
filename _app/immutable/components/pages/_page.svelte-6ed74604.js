import{S as q,i as z,s as S,k as v,q as W,l as k,m as w,r as Q,h as m,n as d,b as M,G as $,I as R,u as U,B as V,g as X,J as Y,K as Z,d as x,f as B,t as E,o as J,L as p,M as b,e as j,w as A,x as D,y as N,N as C,z as P,a as ee,c as te}from"../../chunks/index-24e95d3e.js";import{c as re,p as ae,b as F}from"../../chunks/store-a10cd813.js";import{P as se}from"../../chunks/ProductList-603e73d8.js";function ne(n){let t,e=n[1].name+"",a,l,c,o,s,r;return{c(){t=v("a"),a=W(e),this.h()},l(i){t=k(i,"A",{href:!0,"data-category-name":!0,class:!0});var g=w(t);a=Q(g,e),g.forEach(m),this.h()},h(){d(t,"href",l="#"+n[1].name),d(t,"data-category-name",c=n[1].name),d(t,"class",o="category "+(n[0].id===n[1].id?"category--active":"")+" svelte-1182b89")},m(i,g){M(i,t,g),$(t,a),s||(r=R(t,"click",n[2]),s=!0)},p(i,[g]){g&2&&e!==(e=i[1].name+"")&&U(a,e),g&2&&l!==(l="#"+i[1].name)&&d(t,"href",l),g&2&&c!==(c=i[1].name)&&d(t,"data-category-name",c),g&3&&o!==(o="category "+(i[0].id===i[1].id?"category--active":"")+" svelte-1182b89")&&d(t,"class",o)},i:V,o:V,d(i){i&&m(t),s=!1,r()}}}function oe(n,t,e){let{category:a={id:0,name:""}}=t,{currentCategory:l={id:0,name:""}}=t;const c=o=>{o.preventDefault(),e(0,l=a);let s=document.getElementById(a.name),r=s?s.offsetTop:0;window.scrollTo({top:r-40,behavior:"smooth"})};return n.$$set=o=>{"category"in o&&e(1,a=o.category),"currentCategory"in o&&e(0,l=o.currentCategory)},[l,a,c]}class ie extends q{constructor(t){super(),z(this,t,oe,ne,S,{category:1,currentCategory:0})}}function G(n,t,e){const a=n.slice();return a[3]=t[e],a}function H(n,t){let e,a,l,c;function o(r){t[2](r)}let s={category:t[3]};return t[0]!==void 0&&(s.currentCategory=t[0]),a=new ie({props:s}),p.push(()=>b(a,"currentCategory",o)),{key:n,first:null,c(){e=j(),A(a.$$.fragment),this.h()},l(r){e=j(),D(a.$$.fragment,r),this.h()},h(){this.first=e},m(r,i){M(r,e,i),N(a,r,i),c=!0},p(r,i){t=r;const g={};i&2&&(g.category=t[3]),!l&&i&1&&(l=!0,g.currentCategory=t[0],C(()=>l=!1)),a.$set(g)},i(r){c||(B(a.$$.fragment,r),c=!0)},o(r){E(a.$$.fragment,r),c=!1},d(r){r&&m(e),P(a,r)}}}function ce(n){let t,e=[],a=new Map,l,c=n[1];const o=s=>s[3].id;for(let s=0;s<c.length;s+=1){let r=G(n,c,s),i=o(r);a.set(i,e[s]=H(i,r))}return{c(){t=v("div");for(let s=0;s<e.length;s+=1)e[s].c();this.h()},l(s){t=k(s,"DIV",{class:!0});var r=w(t);for(let i=0;i<e.length;i+=1)e[i].l(r);r.forEach(m),this.h()},h(){d(t,"class","categories svelte-z5sw7r")},m(s,r){M(s,t,r);for(let i=0;i<e.length;i+=1)e[i].m(t,null);l=!0},p(s,[r]){r&3&&(c=s[1],X(),e=Y(e,r,o,1,s,c,a,t,Z,H,null,G),x())},i(s){if(!l){for(let r=0;r<c.length;r+=1)B(e[r]);l=!0}},o(s){for(let r=0;r<e.length;r+=1)E(e[r]);l=!1},d(s){s&&m(t);for(let r=0;r<e.length;r+=1)e[r].d()}}}function le(n,t,e){let{categories:a=[]}=t,{currentCategory:l={id:0,name:""}}=t;J(()=>{let o=document.getElementsByClassName("category");[].forEach.call(o,function(s,r,i){})});function c(o){l=o,e(0,l)}return n.$$set=o=>{"categories"in o&&e(1,a=o.categories),"currentCategory"in o&&e(0,l=o.currentCategory)},[l,a,c]}class ue extends q{constructor(t){super(),z(this,t,le,ce,S,{categories:1,currentCategory:0})}}function ge(n){let t,e,a,l,c,o,s,r,i,g;function f(u){n[4](u)}function I(u){n[5](u)}let L={};n[1]!==void 0&&(L.categories=n[1]),n[3]!==void 0&&(L.currentCategory=n[3]),a=new ue({props:L}),p.push(()=>b(a,"categories",f)),p.push(()=>b(a,"currentCategory",I));function K(u){n[6](u)}function O(u){n[7](u)}let T={products:n[2],categories:n[1]};return n[0]!==void 0&&(T.basket=n[0]),n[3]!==void 0&&(T.currentCategory=n[3]),s=new se({props:T}),p.push(()=>b(s,"basket",K)),p.push(()=>b(s,"currentCategory",O)),{c(){t=v("main"),e=v("div"),A(a.$$.fragment),o=ee(),A(s.$$.fragment),this.h()},l(u){t=k(u,"MAIN",{class:!0});var _=w(t);e=k(_,"DIV",{class:!0});var h=w(e);D(a.$$.fragment,h),o=te(h),D(s.$$.fragment,h),h.forEach(m),_.forEach(m),this.h()},h(){d(e,"class","app svelte-aona5h"),d(t,"class","svelte-aona5h")},m(u,_){M(u,t,_),$(t,e),N(a,e,null),$(e,o),N(s,e,null),g=!0},p(u,[_]){const h={};!l&&_&2&&(l=!0,h.categories=u[1],C(()=>l=!1)),!c&&_&8&&(c=!0,h.currentCategory=u[3],C(()=>c=!1)),a.$set(h);const y={};_&4&&(y.products=u[2]),_&2&&(y.categories=u[1]),!r&&_&1&&(r=!0,y.basket=u[0],C(()=>r=!1)),!i&&_&8&&(i=!0,y.currentCategory=u[3],C(()=>i=!1)),s.$set(y)},i(u){g||(B(a.$$.fragment,u),B(s.$$.fragment,u),g=!0)},o(u){E(a.$$.fragment,u),E(s.$$.fragment,u),g=!1},d(u){u&&m(t),P(a),P(s)}}}function fe(n,t,e){let a=[],l=[],c={},o={};re.subscribe(f=>{e(1,a=f)}),ae.subscribe(f=>{e(2,l=f)}),J(async()=>{let f=window.Telegram.WebApp;e(3,c=a[0]),f.setBackgroundColor("#ffa"),f.expand(),f.MainButton.setText("\u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0437\u0430\u043A\u0430\u0437"),F.subscribe(I=>{e(0,o=I),Object.keys(o).length!==0?f.MainButton.show():f.MainButton.hide()})});function s(f){a=f,e(1,a)}function r(f){c=f,e(3,c)}function i(f){o=f,e(0,o)}function g(f){c=f,e(3,c)}return n.$$.update=()=>{n.$$.dirty&1&&F.set(o)},[o,a,l,c,s,r,i,g]}class me extends q{constructor(t){super(),z(this,t,fe,ge,S,{})}}export{me as default};
