import{S as N,i as S,s as q,k,q as W,l as v,m as w,r as Q,h,n as d,b as M,G as O,I as R,u as U,B as V,g as X,J as Z,K as x,d as ee,f as B,t as E,o as G,L as p,M as b,e as Y,w as P,x as A,y as D,N as C,z as H,a as te,c as re}from"../../chunks/index-24e95d3e.js";import{c as ae,p as ne,b as $}from"../../chunks/store-a10cd813.js";import{P as se}from"../../chunks/ProductList-e5164dcc.js";function oe(s){let t,e=s[1].name+"",n,l,i,c,r,a;return{c(){t=k("a"),n=W(e),this.h()},l(o){t=v(o,"A",{href:!0,"data-category-name":!0,class:!0});var f=w(t);n=Q(f,e),f.forEach(h),this.h()},h(){d(t,"href",l="#"+s[1].name),d(t,"data-category-name",i=s[1].name),d(t,"class",c="category "+(s[0].id===s[1].id?"category--active":"")+" svelte-adoked")},m(o,f){M(o,t,f),O(t,n),r||(a=R(t,"click",s[3]),r=!0)},p(o,[f]){f&2&&e!==(e=o[1].name+"")&&U(n,e),f&2&&l!==(l="#"+o[1].name)&&d(t,"href",l),f&2&&i!==(i=o[1].name)&&d(t,"data-category-name",i),f&3&&c!==(c="category "+(o[0].id===o[1].id?"category--active":"")+" svelte-adoked")&&d(t,"class",c)},i:V,o:V,d(o){o&&h(t),r=!1,a()}}}const j=40;function ie(s,t,e){let{category:n={id:0,name:""}}=t,{currentCategory:l={id:0,name:""}}=t;function i(){let r=document.getElementById(n.name);setTimeout(()=>{document.documentElement.clientHeight==document.body.scrollHeight-window.pageYOffset||window.pageYOffset+j==r.offsetTop?(e(0,l=n),setTimeout(()=>{e(0,l=n)},100)):i()},100)}const c=r=>{r.preventDefault();let a=document.getElementById(n.name),o=a?a.offsetTop:0;window.scrollTo({top:o-j,behavior:"smooth"}),i()};return s.$$set=r=>{"category"in r&&e(1,n=r.category),"currentCategory"in r&&e(0,l=r.currentCategory)},[l,n,i,c]}class ce extends N{constructor(t){super(),S(this,t,ie,oe,q,{category:1,currentCategory:0})}}function z(s,t,e){const n=s.slice();return n[3]=t[e],n}function F(s,t){let e,n,l,i;function c(a){t[2](a)}let r={category:t[3]};return t[0]!==void 0&&(r.currentCategory=t[0]),n=new ce({props:r}),p.push(()=>b(n,"currentCategory",c)),{key:s,first:null,c(){e=Y(),P(n.$$.fragment),this.h()},l(a){e=Y(),A(n.$$.fragment,a),this.h()},h(){this.first=e},m(a,o){M(a,e,o),D(n,a,o),i=!0},p(a,o){t=a;const f={};o&2&&(f.category=t[3]),!l&&o&1&&(l=!0,f.currentCategory=t[0],C(()=>l=!1)),n.$set(f)},i(a){i||(B(n.$$.fragment,a),i=!0)},o(a){E(n.$$.fragment,a),i=!1},d(a){a&&h(e),H(n,a)}}}function le(s){let t,e=[],n=new Map,l,i=s[1];const c=r=>r[3].id;for(let r=0;r<i.length;r+=1){let a=z(s,i,r),o=c(a);n.set(o,e[r]=F(o,a))}return{c(){t=k("div");for(let r=0;r<e.length;r+=1)e[r].c();this.h()},l(r){t=v(r,"DIV",{class:!0});var a=w(t);for(let o=0;o<e.length;o+=1)e[o].l(a);a.forEach(h),this.h()},h(){d(t,"class","categories svelte-xbh343")},m(r,a){M(r,t,a);for(let o=0;o<e.length;o+=1)e[o].m(t,null);l=!0},p(r,[a]){a&3&&(i=r[1],X(),e=Z(e,a,c,1,r,i,n,t,x,F,null,z),ee())},i(r){if(!l){for(let a=0;a<i.length;a+=1)B(e[a]);l=!0}},o(r){for(let a=0;a<e.length;a+=1)E(e[a]);l=!1},d(r){r&&h(t);for(let a=0;a<e.length;a+=1)e[a].d()}}}function ue(s,t,e){let{categories:n=[]}=t,{currentCategory:l={id:0,name:""}}=t;G(()=>{let c=document.getElementsByClassName("category");[].forEach.call(c,function(r,a,o){})});function i(c){l=c,e(0,l)}return s.$$set=c=>{"categories"in c&&e(1,n=c.categories),"currentCategory"in c&&e(0,l=c.currentCategory)},[l,n,i]}class ge extends N{constructor(t){super(),S(this,t,ue,le,q,{categories:1,currentCategory:0})}}function fe(s){let t,e,n,l,i,c,r,a,o,f;function g(u){s[4](u)}function T(u){s[5](u)}let I={};s[1]!==void 0&&(I.categories=s[1]),s[3]!==void 0&&(I.currentCategory=s[3]),n=new ge({props:I}),p.push(()=>b(n,"categories",g)),p.push(()=>b(n,"currentCategory",T));function J(u){s[6](u)}function K(u){s[7](u)}let L={products:s[2],categories:s[1]};return s[0]!==void 0&&(L.basket=s[0]),s[3]!==void 0&&(L.currentCategory=s[3]),r=new se({props:L}),p.push(()=>b(r,"basket",J)),p.push(()=>b(r,"currentCategory",K)),{c(){t=k("main"),e=k("div"),P(n.$$.fragment),c=te(),P(r.$$.fragment),this.h()},l(u){t=v(u,"MAIN",{class:!0});var _=w(t);e=v(_,"DIV",{class:!0});var m=w(e);A(n.$$.fragment,m),c=re(m),A(r.$$.fragment,m),m.forEach(h),_.forEach(h),this.h()},h(){d(e,"class","app svelte-10l4d0h"),d(t,"class","svelte-10l4d0h")},m(u,_){M(u,t,_),O(t,e),D(n,e,null),O(e,c),D(r,e,null),f=!0},p(u,[_]){const m={};!l&&_&2&&(l=!0,m.categories=u[1],C(()=>l=!1)),!i&&_&8&&(i=!0,m.currentCategory=u[3],C(()=>i=!1)),n.$set(m);const y={};_&4&&(y.products=u[2]),_&2&&(y.categories=u[1]),!a&&_&1&&(a=!0,y.basket=u[0],C(()=>a=!1)),!o&&_&8&&(o=!0,y.currentCategory=u[3],C(()=>o=!1)),r.$set(y)},i(u){f||(B(n.$$.fragment,u),B(r.$$.fragment,u),f=!0)},o(u){E(n.$$.fragment,u),E(r.$$.fragment,u),f=!1},d(u){u&&h(t),H(n),H(r)}}}function _e(s,t,e){let n=[],l=[],i={},c={};ae.subscribe(g=>{e(1,n=g)}),ne.subscribe(g=>{e(2,l=g)}),G(async()=>{let g=window.Telegram.WebApp;e(3,i=n[0]),g.expand(),g.MainButton.setText("\u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0437\u0430\u043A\u0430\u0437"),g.MainButton.setParams({color:"#31b545"}),g.setBackgroundColor("secondary_bg_color"),g.MainButton.onClick(()=>{location.href="/basket"}),$.subscribe(T=>{e(0,c=T),Object.keys(c).length!==0?g.MainButton.show():g.MainButton.hide()})});function r(g){n=g,e(1,n)}function a(g){i=g,e(3,i)}function o(g){c=g,e(0,c)}function f(g){i=g,e(3,i)}return s.$$.update=()=>{s.$$.dirty&1&&$.set(c)},[c,n,l,i,r,a,o,f]}class ye extends N{constructor(t){super(),S(this,t,_e,fe,q,{})}}export{ye as default};
