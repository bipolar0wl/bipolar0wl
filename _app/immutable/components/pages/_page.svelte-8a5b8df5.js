import{S as U,i as X,s as Q,k as y,q as T,l as k,m as C,r as A,h as v,n as h,b as I,G as m,I as de,u as $,B as j,g as he,J as pe,K as be,d as me,f as N,t as P,o as re,L as S,M as L,e as q,w as z,x as J,y as K,N as H,z as R,a as D,c as V,O as ye,P as oe}from"../../chunks/index-981bc336.js";import{b as se,p as ve,c as ke}from"../../chunks/store-69d22bd8.js";import{P as Ce}from"../../chunks/ProductList-4a1e70a6.js";function Be(i){let e,t=i[1].name+"",s,a,o,r,l,n;return{c(){e=y("a"),s=T(t),this.h()},l(_){e=k(_,"A",{href:!0,"data-category-name":!0,class:!0});var p=C(e);s=A(p,t),p.forEach(v),this.h()},h(){h(e,"href",a="#"+i[1].name),h(e,"data-category-name",o=i[1].name),h(e,"class",r="category "+(i[0].id===i[1].id?"category--active":"")+" svelte-1c0y5ce")},m(_,p){I(_,e,p),m(e,s),l||(n=de(e,"click",i[3]),l=!0)},p(_,[p]){p&2&&t!==(t=_[1].name+"")&&$(s,t),p&2&&a!==(a="#"+_[1].name)&&h(e,"href",a),p&2&&o!==(o=_[1].name)&&h(e,"data-category-name",o),p&3&&r!==(r="category "+(_[0].id===_[1].id?"category--active":"")+" svelte-1c0y5ce")&&h(e,"class",r)},i:j,o:j,d(_){_&&v(e),l=!1,n()}}}const ie=40;function Ee(i,e,t){let{category:s={id:0,name:""}}=e,{currentCategory:a={id:0,name:""}}=e;function o(){let l=document.getElementById(s.name);setTimeout(()=>{document.documentElement.clientHeight==document.body.scrollHeight-window.pageYOffset||window.pageYOffset+ie==l.offsetTop?(t(0,a=s),setTimeout(()=>{t(0,a=s)},100)):o()},100)}const r=l=>{l.preventDefault();let n=document.getElementById(s.name),_=n?n.offsetTop:0;window.scrollTo({top:_-ie,behavior:"smooth"}),o()};return i.$$set=l=>{"category"in l&&t(1,s=l.category),"currentCategory"in l&&t(0,a=l.currentCategory)},[a,s,o,r]}class we extends U{constructor(e){super(),X(this,e,Ee,Be,Q,{category:1,currentCategory:0})}}function ce(i,e,t){const s=i.slice();return s[3]=e[t],s}function ue(i,e){let t,s,a,o;function r(n){e[2](n)}let l={category:e[3]};return e[0]!==void 0&&(l.currentCategory=e[0]),s=new we({props:l}),S.push(()=>L(s,"currentCategory",r)),{key:i,first:null,c(){t=q(),z(s.$$.fragment),this.h()},l(n){t=q(),J(s.$$.fragment,n),this.h()},h(){this.first=t},m(n,_){I(n,t,_),K(s,n,_),o=!0},p(n,_){e=n;const p={};_&2&&(p.category=e[3]),!a&&_&1&&(a=!0,p.currentCategory=e[0],H(()=>a=!1)),s.$set(p)},i(n){o||(N(s.$$.fragment,n),o=!0)},o(n){P(s.$$.fragment,n),o=!1},d(n){n&&v(t),R(s,n)}}}function Me(i){let e,t=[],s=new Map,a,o=i[1];const r=l=>l[3].id;for(let l=0;l<o.length;l+=1){let n=ce(i,o,l),_=r(n);s.set(_,t[l]=ue(_,n))}return{c(){e=y("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=k(l,"DIV",{class:!0});var n=C(e);for(let _=0;_<t.length;_+=1)t[_].l(n);n.forEach(v),this.h()},h(){h(e,"class","categories svelte-xbh343")},m(l,n){I(l,e,n);for(let _=0;_<t.length;_+=1)t[_].m(e,null);a=!0},p(l,[n]){n&3&&(o=l[1],he(),t=pe(t,n,r,1,l,o,s,e,be,ue,null,ce),me())},i(l){if(!a){for(let n=0;n<o.length;n+=1)N(t[n]);a=!0}},o(l){for(let n=0;n<t.length;n+=1)P(t[n]);a=!1},d(l){l&&v(e);for(let n=0;n<t.length;n+=1)t[n].d()}}}function Ie(i,e,t){let{categories:s=[]}=e,{currentCategory:a={id:0,name:""}}=e;re(()=>{let r=document.getElementsByClassName("category");[].forEach.call(r,function(l,n,_){})});function o(r){a=r,t(0,a)}return i.$$set=r=>{"categories"in r&&t(1,s=r.categories),"currentCategory"in r&&t(0,a=r.currentCategory)},[a,s,o]}class Te extends U{constructor(e){super(),X(this,e,Ie,Me,Q,{categories:1,currentCategory:0})}}function _e(i,e,t){const s=i.slice();return s[3]=e[t],s}function fe(i){let e,t,s,a,o,r,l,n,_=i[3].name+"",p,f,g=(i[0][i[3].id]||0)+"",b,c,u,d,w=i[3].description+"",M,Z,O,W=i[3].price*i[0][i[3].id]+"",F,x;return{c(){e=y("div"),t=y("div"),s=y("img"),o=D(),r=y("div"),l=y("div"),n=y("span"),p=T(_),f=y("span"),b=T(g),c=T("x"),u=D(),d=y("span"),M=T(w),Z=D(),O=y("div"),F=T(W),x=D(),this.h()},l(B){e=k(B,"DIV",{class:!0});var E=C(e);t=k(E,"DIV",{class:!0});var G=C(t);s=k(G,"IMG",{class:!0,src:!0,alt:!0}),o=V(G),r=k(G,"DIV",{class:!0});var Y=C(r);l=k(Y,"DIV",{class:!0});var ee=C(l);n=k(ee,"SPAN",{class:!0});var ae=C(n);p=A(ae,_),ae.forEach(v),f=k(ee,"SPAN",{class:!0});var te=C(f);b=A(te,g),c=A(te,"x"),te.forEach(v),ee.forEach(v),u=V(Y),d=k(Y,"SPAN",{class:!0});var ne=C(d);M=A(ne,w),ne.forEach(v),Y.forEach(v),G.forEach(v),Z=V(E),O=k(E,"DIV",{class:!0});var le=C(O);F=A(le,W),le.forEach(v),x=V(E),E.forEach(v),this.h()},h(){h(s,"class","item__img svelte-11x6ndh"),oe(s.src,a="/bipolar0wl/"+i[3].image)||h(s,"src",a),h(s,"alt",""),h(n,"class","item__name svelte-11x6ndh"),h(f,"class","item__count svelte-11x6ndh"),h(l,"class","svelte-11x6ndh"),h(d,"class","item__description svelte-11x6ndh"),h(r,"class","item__text svelte-11x6ndh"),h(t,"class","item__info svelte-11x6ndh"),h(O,"class","item__price svelte-11x6ndh"),h(e,"class","item svelte-11x6ndh")},m(B,E){I(B,e,E),m(e,t),m(t,s),m(t,o),m(t,r),m(r,l),m(l,n),m(n,p),m(l,f),m(f,b),m(f,c),m(r,u),m(r,d),m(d,M),m(e,Z),m(e,O),m(O,F),m(e,x)},p(B,E){E&2&&!oe(s.src,a="/bipolar0wl/"+B[3].image)&&h(s,"src",a),E&2&&_!==(_=B[3].name+"")&&$(p,_),E&3&&g!==(g=(B[0][B[3].id]||0)+"")&&$(b,g),E&2&&w!==(w=B[3].description+"")&&$(M,w),E&3&&W!==(W=B[3].price*B[0][B[3].id]+"")&&$(F,W)},d(B){B&&v(e)}}}function ge(i,e){let t,s,a=e[0][e[3].id]!=null&&fe(e);return{key:i,first:null,c(){t=q(),a&&a.c(),s=q(),this.h()},l(o){t=q(),a&&a.l(o),s=q(),this.h()},h(){this.first=t},m(o,r){I(o,t,r),a&&a.m(o,r),I(o,s,r)},p(o,r){e=o,e[0][e[3].id]!=null?a?a.p(e,r):(a=fe(e),a.c(),a.m(s.parentNode,s)):a&&(a.d(1),a=null)},d(o){o&&v(t),a&&a.d(o),o&&v(s)}}}function Ae(i){let e,t,s,a=[],o=new Map,r,l,n,_=i[1];const p=f=>f[3].id;for(let f=0;f<_.length;f+=1){let g=_e(i,_,f),b=p(g);o.set(b,a[f]=ge(b,g))}return{c(){e=y("div"),t=y("div"),s=y("div");for(let f=0;f<a.length;f+=1)a[f].c();r=D(),l=y("div"),n=y("textarea"),this.h()},l(f){e=k(f,"DIV",{class:!0});var g=C(e);t=k(g,"DIV",{class:!0});var b=C(t);s=k(b,"DIV",{class:!0});var c=C(s);for(let d=0;d<a.length;d+=1)a[d].l(c);c.forEach(v),b.forEach(v),r=V(g),l=k(g,"DIV",{class:!0});var u=C(l);n=k(u,"TEXTAREA",{class:!0,type:!0,placeholder:!0}),C(n).forEach(v),u.forEach(v),g.forEach(v),this.h()},h(){h(s,"class","basket__order__list svelte-11x6ndh"),h(t,"class","basket__order svelte-11x6ndh"),h(n,"class","basket__comment svelte-11x6ndh"),h(n,"type","text"),h(n,"placeholder","\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439"),h(l,"class","svelte-11x6ndh"),h(e,"class","basket svelte-11x6ndh")},m(f,g){I(f,e,g),m(e,t),m(t,s);for(let b=0;b<a.length;b+=1)a[b].m(s,null);m(e,r),m(e,l),m(l,n)},p(f,[g]){g&3&&(_=f[1],a=pe(a,g,p,1,f,_,o,s,ye,ge,null,_e))},i:j,o:j,d(f){f&&v(e);for(let g=0;g<a.length;g+=1)a[g].d()}}}function De(i,e,t){let{page:s=1}=e,a={};se.subscribe(r=>{t(0,a=r)});let o=[];return ve.subscribe(r=>{t(1,o=r)}),re(async()=>{let r=window.Telegram.WebApp;r.BackButton.show(),r.BackButton.onClick(()=>{t(2,s=0),r.BackButton.hide()});for(var l=document.querySelectorAll(".basket__back a"),n=0;n<l.length;n++)l[n].addEventListener("click",function(){t(2,s=s==0?1:0)})}),i.$$set=r=>{"page"in r&&t(2,s=r.page)},[a,o,s]}class Ve extends U{constructor(e){super(),X(this,e,De,Ae,Q,{page:2})}}function Ne(i){let e,t,s;function a(r){i[10](r)}let o={};return i[4]!==void 0&&(o.page=i[4]),e=new Ve({props:o}),S.push(()=>L(e,"page",a)),{c(){z(e.$$.fragment)},l(r){J(e.$$.fragment,r)},m(r,l){K(e,r,l),s=!0},p(r,l){const n={};!t&&l&16&&(t=!0,n.page=r[4],H(()=>t=!1)),e.$set(n)},i(r){s||(N(e.$$.fragment,r),s=!0)},o(r){P(e.$$.fragment,r),s=!1},d(r){R(e,r)}}}function Pe(i){let e,t,s,a,o,r,l,n;function _(u){i[6](u)}function p(u){i[7](u)}let f={};i[1]!==void 0&&(f.categories=i[1]),i[3]!==void 0&&(f.currentCategory=i[3]),e=new Te({props:f}),S.push(()=>L(e,"categories",_)),S.push(()=>L(e,"currentCategory",p));function g(u){i[8](u)}function b(u){i[9](u)}let c={products:i[2],categories:i[1]};return i[0]!==void 0&&(c.basket=i[0]),i[3]!==void 0&&(c.currentCategory=i[3]),o=new Ce({props:c}),S.push(()=>L(o,"basket",g)),S.push(()=>L(o,"currentCategory",b)),{c(){z(e.$$.fragment),a=D(),z(o.$$.fragment)},l(u){J(e.$$.fragment,u),a=V(u),J(o.$$.fragment,u)},m(u,d){K(e,u,d),I(u,a,d),K(o,u,d),n=!0},p(u,d){const w={};!t&&d&2&&(t=!0,w.categories=u[1],H(()=>t=!1)),!s&&d&8&&(s=!0,w.currentCategory=u[3],H(()=>s=!1)),e.$set(w);const M={};d&4&&(M.products=u[2]),d&2&&(M.categories=u[1]),!r&&d&1&&(r=!0,M.basket=u[0],H(()=>r=!1)),!l&&d&8&&(l=!0,M.currentCategory=u[3],H(()=>l=!1)),o.$set(M)},i(u){n||(N(e.$$.fragment,u),N(o.$$.fragment,u),n=!0)},o(u){P(e.$$.fragment,u),P(o.$$.fragment,u),n=!1},d(u){R(e,u),u&&v(a),R(o,u)}}}function Oe(i){let e,t,s,a,o,r,l,n,_,p;const f=[Pe,Ne],g=[];function b(c,u){return c[4]==0?0:1}return s=b(i),a=g[s]=f[s](i),{c(){e=y("main"),t=y("div"),a.c(),o=D(),r=y("button"),l=T("click me"),this.h()},l(c){e=k(c,"MAIN",{class:!0});var u=C(e);t=k(u,"DIV",{class:!0});var d=C(t);a.l(d),o=V(d),r=k(d,"BUTTON",{class:!0});var w=C(r);l=A(w,"click me"),w.forEach(v),d.forEach(v),u.forEach(v),this.h()},h(){h(r,"class","svelte-plkv"),h(t,"class","app svelte-plkv"),h(e,"class","svelte-plkv")},m(c,u){I(c,e,u),m(e,t),g[s].m(t,null),m(t,o),m(t,r),m(r,l),n=!0,_||(p=de(r,"click",i[5]),_=!0)},p(c,[u]){let d=s;s=b(c),s===d?g[s].p(c,u):(he(),P(g[d],1,1,()=>{g[d]=null}),me(),a=g[s],a?a.p(c,u):(a=g[s]=f[s](c),a.c()),N(a,1),a.m(t,o))},i(c){n||(N(a),n=!0)},o(c){P(a),n=!1},d(c){c&&v(e),g[s].d(),_=!1,p()}}}function Se(i,e,t){let s=[],a=[],o={},r={},l=0;ke.subscribe(c=>{t(1,s=c)}),ve.subscribe(c=>{t(2,a=c)}),re(async()=>{let c=window.Telegram.WebApp;t(3,o=s[0]),c.expand(),c.MainButton.setText("\u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0437\u0430\u043A\u0430\u0437"),c.MainButton.setParams({color:"#31b545"}),c.setBackgroundColor("secondary_bg_color"),c.MainButton.onClick(()=>{alert(window.Telegram.WebApp.MainButton),c.HapticFeedback.impactOccurred("light"),l==0?(t(4,l=1),alert(c.MainButton.text),c.MainButton.text=`\u041A \u043E\u0444\u043E\u0440\u043C\u043B\u0435\u043D\u0438\u044E ${r.reduce((u,d)=>u+d,0)} \u20BD`,alert(c.MainButton.text)):(alert(c.MainButton.text),c.MainButton.text="\u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0437\u0430\u043A\u0430\u0437",alert(c.MainButton.text))}),se.subscribe(u=>{t(0,r=u),Object.keys(r).length!==0?c.MainButton.show():c.MainButton.hide()})});function n(){let c=window.Telegram.WebApp;l==0?(t(4,l=1),c.MainButton.setText(`\u041A \u043E\u0444\u043E\u0440\u043C\u043B\u0435\u043D\u0438\u044E ${r.reduce((u,d)=>u+d,0)} \u20BD`)):(t(4,l=0),c.MainButton.setText("\u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0437\u0430\u043A\u0430\u0437"))}function _(c){s=c,t(1,s)}function p(c){o=c,t(3,o)}function f(c){r=c,t(0,r)}function g(c){o=c,t(3,o)}function b(c){l=c,t(4,l)}return i.$$.update=()=>{i.$$.dirty&1&&se.set(r)},[r,s,a,o,l,n,_,p,f,g,b]}class We extends U{constructor(e){super(),X(this,e,Se,Oe,Q,{})}}export{We as default};
