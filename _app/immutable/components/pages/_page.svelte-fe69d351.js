import{S as X,i as Q,s as U,k as b,q as V,l as y,m as k,r as A,h,n as d,b as j,G as m,I as ve,u as $,B as Y,g as de,J as pe,K as be,d as he,f as M,t as D,o as re,L as P,M as N,e as S,w as z,x as J,y as K,N as L,z as R,a as O,c as q,O as ye,P as oe}from"../../chunks/index-981bc336.js";import{b as se,p as me,c as ke}from"../../chunks/store-69d22bd8.js";import{P as Ce}from"../../chunks/ProductList-4a1e70a6.js";function Ee(i){let e,t=i[1].name+"",s,r,o,l,a,n;return{c(){e=b("a"),s=V(t),this.h()},l(c){e=y(c,"A",{href:!0,"data-category-name":!0,class:!0});var g=k(e);s=A(g,t),g.forEach(h),this.h()},h(){d(e,"href",r="#"+i[1].name),d(e,"data-category-name",o=i[1].name),d(e,"class",l="category "+(i[0].id===i[1].id?"category--active":"")+" svelte-1c0y5ce")},m(c,g){j(c,e,g),m(e,s),a||(n=ve(e,"click",i[3]),a=!0)},p(c,[g]){g&2&&t!==(t=c[1].name+"")&&$(s,t),g&2&&r!==(r="#"+c[1].name)&&d(e,"href",r),g&2&&o!==(o=c[1].name)&&d(e,"data-category-name",o),g&3&&l!==(l="category "+(c[0].id===c[1].id?"category--active":"")+" svelte-1c0y5ce")&&d(e,"class",l)},i:Y,o:Y,d(c){c&&h(e),a=!1,n()}}}const ie=40;function we(i,e,t){let{category:s={id:0,name:""}}=e,{currentCategory:r={id:0,name:""}}=e;function o(){let a=document.getElementById(s.name);setTimeout(()=>{document.documentElement.clientHeight==document.body.scrollHeight-window.pageYOffset||window.pageYOffset+ie==a.offsetTop?(t(0,r=s),setTimeout(()=>{t(0,r=s)},100)):o()},100)}const l=a=>{a.preventDefault();let n=document.getElementById(s.name),c=n?n.offsetTop:0;window.scrollTo({top:c-ie,behavior:"smooth"}),o()};return i.$$set=a=>{"category"in a&&t(1,s=a.category),"currentCategory"in a&&t(0,r=a.currentCategory)},[r,s,o,l]}class Be extends X{constructor(e){super(),Q(this,e,we,Ee,U,{category:1,currentCategory:0})}}function ce(i,e,t){const s=i.slice();return s[3]=e[t],s}function ue(i,e){let t,s,r,o;function l(n){e[2](n)}let a={category:e[3]};return e[0]!==void 0&&(a.currentCategory=e[0]),s=new Be({props:a}),P.push(()=>N(s,"currentCategory",l)),{key:i,first:null,c(){t=S(),z(s.$$.fragment),this.h()},l(n){t=S(),J(s.$$.fragment,n),this.h()},h(){this.first=t},m(n,c){j(n,t,c),K(s,n,c),o=!0},p(n,c){e=n;const g={};c&2&&(g.category=e[3]),!r&&c&1&&(r=!0,g.currentCategory=e[0],L(()=>r=!1)),s.$set(g)},i(n){o||(M(s.$$.fragment,n),o=!0)},o(n){D(s.$$.fragment,n),o=!1},d(n){n&&h(t),R(s,n)}}}function Ie(i){let e,t=[],s=new Map,r,o=i[1];const l=a=>a[3].id;for(let a=0;a<o.length;a+=1){let n=ce(i,o,a),c=l(n);s.set(c,t[a]=ue(c,n))}return{c(){e=b("div");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=y(a,"DIV",{class:!0});var n=k(e);for(let c=0;c<t.length;c+=1)t[c].l(n);n.forEach(h),this.h()},h(){d(e,"class","categories svelte-xbh343")},m(a,n){j(a,e,n);for(let c=0;c<t.length;c+=1)t[c].m(e,null);r=!0},p(a,[n]){n&3&&(o=a[1],de(),t=pe(t,n,l,1,a,o,s,e,be,ue,null,ce),he())},i(a){if(!r){for(let n=0;n<o.length;n+=1)M(t[n]);r=!0}},o(a){for(let n=0;n<t.length;n+=1)D(t[n]);r=!1},d(a){a&&h(e);for(let n=0;n<t.length;n+=1)t[n].d()}}}function je(i,e,t){let{categories:s=[]}=e,{currentCategory:r={id:0,name:""}}=e;re(()=>{let l=document.getElementsByClassName("category");[].forEach.call(l,function(a,n,c){})});function o(l){r=l,t(0,r)}return i.$$set=l=>{"categories"in l&&t(1,s=l.categories),"currentCategory"in l&&t(0,r=l.currentCategory)},[r,s,o]}class Me extends X{constructor(e){super(),Q(this,e,je,Ie,U,{categories:1,currentCategory:0})}}function fe(i,e,t){const s=i.slice();return s[3]=e[t],s}function _e(i){let e,t,s,r,o,l,a,n,c=i[3].name+"",g,_,p=(i[0][i[3].id]||0)+"",u,C,f,v,I=i[3].description+"",B,Z,T,H=i[3].price*i[0][i[3].id]+"",F,x;return{c(){e=b("div"),t=b("div"),s=b("img"),o=O(),l=b("div"),a=b("div"),n=b("span"),g=V(c),_=b("span"),u=V(p),C=V("x"),f=O(),v=b("span"),B=V(I),Z=O(),T=b("div"),F=V(H),x=O(),this.h()},l(E){e=y(E,"DIV",{class:!0});var w=k(e);t=y(w,"DIV",{class:!0});var G=k(t);s=y(G,"IMG",{class:!0,src:!0,alt:!0}),o=q(G),l=y(G,"DIV",{class:!0});var W=k(l);a=y(W,"DIV",{class:!0});var ee=k(a);n=y(ee,"SPAN",{class:!0});var ae=k(n);g=A(ae,c),ae.forEach(h),_=y(ee,"SPAN",{class:!0});var te=k(_);u=A(te,p),C=A(te,"x"),te.forEach(h),ee.forEach(h),f=q(W),v=y(W,"SPAN",{class:!0});var le=k(v);B=A(le,I),le.forEach(h),W.forEach(h),G.forEach(h),Z=q(w),T=y(w,"DIV",{class:!0});var ne=k(T);F=A(ne,H),ne.forEach(h),x=q(w),w.forEach(h),this.h()},h(){d(s,"class","item__img svelte-1g88fjp"),oe(s.src,r="/bipolar0wl/"+i[3].image)||d(s,"src",r),d(s,"alt",""),d(n,"class","item__name svelte-1g88fjp"),d(_,"class","item__count svelte-1g88fjp"),d(a,"class","svelte-1g88fjp"),d(v,"class","item__description svelte-1g88fjp"),d(l,"class","item__text svelte-1g88fjp"),d(t,"class","item__info svelte-1g88fjp"),d(T,"class","item__price svelte-1g88fjp"),d(e,"class","item svelte-1g88fjp")},m(E,w){j(E,e,w),m(e,t),m(t,s),m(t,o),m(t,l),m(l,a),m(a,n),m(n,g),m(a,_),m(_,u),m(_,C),m(l,f),m(l,v),m(v,B),m(e,Z),m(e,T),m(T,F),m(e,x)},p(E,w){w&2&&!oe(s.src,r="/bipolar0wl/"+E[3].image)&&d(s,"src",r),w&2&&c!==(c=E[3].name+"")&&$(g,c),w&3&&p!==(p=(E[0][E[3].id]||0)+"")&&$(u,p),w&2&&I!==(I=E[3].description+"")&&$(B,I),w&3&&H!==(H=E[3].price*E[0][E[3].id]+"")&&$(F,H)},d(E){E&&h(e)}}}function ge(i,e){let t,s,r=e[0][e[3].id]!=null&&_e(e);return{key:i,first:null,c(){t=S(),r&&r.c(),s=S(),this.h()},l(o){t=S(),r&&r.l(o),s=S(),this.h()},h(){this.first=t},m(o,l){j(o,t,l),r&&r.m(o,l),j(o,s,l)},p(o,l){e=o,e[0][e[3].id]!=null?r?r.p(e,l):(r=_e(e),r.c(),r.m(s.parentNode,s)):r&&(r.d(1),r=null)},d(o){o&&h(t),r&&r.d(o),o&&h(s)}}}function De(i){let e,t,s,r=[],o=new Map,l,a,n,c=i[1];const g=_=>_[3].id;for(let _=0;_<c.length;_+=1){let p=fe(i,c,_),u=g(p);o.set(u,r[_]=ge(u,p))}return{c(){e=b("div"),t=b("div"),s=b("div");for(let _=0;_<r.length;_+=1)r[_].c();l=O(),a=b("div"),n=b("textarea"),this.h()},l(_){e=y(_,"DIV",{class:!0});var p=k(e);t=y(p,"DIV",{class:!0});var u=k(t);s=y(u,"DIV",{class:!0});var C=k(s);for(let v=0;v<r.length;v+=1)r[v].l(C);C.forEach(h),u.forEach(h),l=q(p),a=y(p,"DIV",{class:!0});var f=k(a);n=y(f,"TEXTAREA",{class:!0,type:!0,placeholder:!0}),k(n).forEach(h),f.forEach(h),p.forEach(h),this.h()},h(){d(s,"class","basket__order__list svelte-1g88fjp"),d(t,"class","basket__order svelte-1g88fjp"),d(n,"class","basket__comment svelte-1g88fjp"),d(n,"type","text"),d(n,"placeholder","\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439"),d(a,"class","svelte-1g88fjp"),d(e,"class","basket svelte-1g88fjp")},m(_,p){j(_,e,p),m(e,t),m(t,s);for(let u=0;u<r.length;u+=1)r[u].m(s,null);m(e,l),m(e,a),m(a,n)},p(_,[p]){p&3&&(c=_[1],r=pe(r,p,g,1,_,c,o,s,ye,ge,null,fe))},i:Y,o:Y,d(_){_&&h(e);for(let p=0;p<r.length;p+=1)r[p].d()}}}function Te(i,e,t){let{page:s=1}=e,r={};se.subscribe(l=>{t(0,r=l)});let o=[];return me.subscribe(l=>{t(1,o=l)}),re(async()=>{let l=window.Telegram.WebApp;l.BackButton.show(),l.BackButton.onClick(()=>{t(2,s=s==0?1:0),l.BackButton.hide()});for(var a=document.querySelectorAll(".basket__back a"),n=0;n<a.length;n++)a[n].addEventListener("click",function(){t(2,s=s==0?1:0)})}),i.$$set=l=>{"page"in l&&t(2,s=l.page)},[r,o,s]}class Ve extends X{constructor(e){super(),Q(this,e,Te,De,U,{page:2})}}function Ae(i){let e,t,s;function r(l){i[9](l)}let o={};return i[4]!==void 0&&(o.page=i[4]),e=new Ve({props:o}),P.push(()=>N(e,"page",r)),{c(){z(e.$$.fragment)},l(l){J(e.$$.fragment,l)},m(l,a){K(e,l,a),s=!0},p(l,a){const n={};!t&&a&16&&(t=!0,n.page=l[4],L(()=>t=!1)),e.$set(n)},i(l){s||(M(e.$$.fragment,l),s=!0)},o(l){D(e.$$.fragment,l),s=!1},d(l){R(e,l)}}}function Pe(i){let e,t,s,r,o,l,a,n;function c(f){i[5](f)}function g(f){i[6](f)}let _={};i[1]!==void 0&&(_.categories=i[1]),i[3]!==void 0&&(_.currentCategory=i[3]),e=new Me({props:_}),P.push(()=>N(e,"categories",c)),P.push(()=>N(e,"currentCategory",g));function p(f){i[7](f)}function u(f){i[8](f)}let C={products:i[2],categories:i[1]};return i[0]!==void 0&&(C.basket=i[0]),i[3]!==void 0&&(C.currentCategory=i[3]),o=new Ce({props:C}),P.push(()=>N(o,"basket",p)),P.push(()=>N(o,"currentCategory",u)),{c(){z(e.$$.fragment),r=O(),z(o.$$.fragment)},l(f){J(e.$$.fragment,f),r=q(f),J(o.$$.fragment,f)},m(f,v){K(e,f,v),j(f,r,v),K(o,f,v),n=!0},p(f,v){const I={};!t&&v&2&&(t=!0,I.categories=f[1],L(()=>t=!1)),!s&&v&8&&(s=!0,I.currentCategory=f[3],L(()=>s=!1)),e.$set(I);const B={};v&4&&(B.products=f[2]),v&2&&(B.categories=f[1]),!l&&v&1&&(l=!0,B.basket=f[0],L(()=>l=!1)),!a&&v&8&&(a=!0,B.currentCategory=f[3],L(()=>a=!1)),o.$set(B)},i(f){n||(M(e.$$.fragment,f),M(o.$$.fragment,f),n=!0)},o(f){D(e.$$.fragment,f),D(o.$$.fragment,f),n=!1},d(f){R(e,f),f&&h(r),R(o,f)}}}function Ne(i){let e,t,s,r,o;const l=[Pe,Ae],a=[];function n(c,g){return c[4]==0?0:1}return s=n(i),r=a[s]=l[s](i),{c(){e=b("main"),t=b("div"),r.c(),this.h()},l(c){e=y(c,"MAIN",{class:!0});var g=k(e);t=y(g,"DIV",{class:!0});var _=k(t);r.l(_),_.forEach(h),g.forEach(h),this.h()},h(){d(t,"class","app svelte-plkv"),d(e,"class","svelte-plkv")},m(c,g){j(c,e,g),m(e,t),a[s].m(t,null),o=!0},p(c,[g]){let _=s;s=n(c),s===_?a[s].p(c,g):(de(),D(a[_],1,1,()=>{a[_]=null}),he(),r=a[s],r?r.p(c,g):(r=a[s]=l[s](c),r.c()),M(r,1),r.m(t,null))},i(c){o||(M(r),o=!0)},o(c){D(r),o=!1},d(c){c&&h(e),a[s].d()}}}function Se(i,e,t){let s=[],r=[],o={},l={},a=0;ke.subscribe(u=>{t(1,s=u)}),me.subscribe(u=>{t(2,r=u)}),re(async()=>{let u=window.Telegram.WebApp;t(3,o=s[0]),u.expand(),u.MainButton.setText("\u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0437\u0430\u043A\u0430\u0437"),u.MainButton.setParams({color:"#31b545"}),u.setBackgroundColor("secondary_bg_color"),u.MainButton.onClick(()=>{alert(1),u.HapticFeedback.impactOccurred("light"),alert(2),t(4,a=a==0?1:0),alert(3),a==0?(t(4,a=1),u.MainButton.setText(`\u041A \u043E\u0444\u043E\u0440\u043C\u043B\u0435\u043D\u0438\u044E ${l.reduce((C,f)=>C+f,0)} \u20BD `)):(t(4,a=0),u.MainButton.setText("\u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0437\u0430\u043A\u0430\u0437"))}),se.subscribe(C=>{t(0,l=C),Object.keys(l).length!==0?u.MainButton.show():u.MainButton.hide()})});function n(u){s=u,t(1,s)}function c(u){o=u,t(3,o)}function g(u){l=u,t(0,l)}function _(u){o=u,t(3,o)}function p(u){a=u,t(4,a)}return i.$$.update=()=>{i.$$.dirty&1&&se.set(l)},[l,s,r,o,a,n,c,g,_,p]}class He extends X{constructor(e){super(),Q(this,e,Se,Ne,U,{})}}export{He as default};
