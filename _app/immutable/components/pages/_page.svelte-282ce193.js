import{S as X,i as Q,s as U,k as b,q as V,l as y,m as k,r as P,h,n as g,b as D,G as m,I as ve,u as H,B as Y,g as ge,J as pe,K as be,d as he,f as M,t as A,o as ae,L as N,M as O,e as S,w as z,x as J,y as K,N as $,z as R,a as L,c as q,O as ye,P as ie}from "../../chunks/index-981bc336.js";import{b as se,p as me,c as ke}from "../../chunks/store-69d22bd8.js";import{P as Ce}from "../../chunks/ProductList-4a1e70a6.js";function Ee(o){let e,t=o[1].name+"",s,a,i,r,n,l;return{c(){e=b("a"),s=V(t),this.h()},l(c){e=y(c,"A",{href:!0,"data-category-name":!0,class:!0});var d=k(e);s=P(d,t),d.forEach(h),this.h()},h(){g(e,"href",a="#"+o[1].name),g(e,"data-category-name",i=o[1].name),g(e,"class",r="category "+(o[0].id===o[1].id?"category--active":"")+" svelte-1c0y5ce")},m(c, d){D(c,e,d),m(e,s),n||(l=ve(e,"click",o[3]),n=!0)},p(c, [d]){d&2&&t!==(t=c[1].name+"")&&H(s,t),d&2&&a!==(a="#"+c[1].name)&&g(e,"href",a),d&2&&i!==(i=c[1].name)&&g(e,"data-category-name",i),d&3&&r!==(r="category "+(c[0].id===c[1].id?"category--active":"")+" svelte-1c0y5ce")&&g(e,"class",r)},i:Y,o:Y,d(c){c&&h(e),n=!1,l()}}}const oe=40;function Be(o, e, t){let{category:s={id:0,name:""}}=e,{currentCategory:a={id:0,name:""}}=e;function i(){let n=document.getElementById(s.name);setTimeout(()=>{document.documentElement.clientHeight==document.body.scrollHeight-window.pageYOffset||window.pageYOffset+oe==n.offsetTop?(t(0,a=s),setTimeout(()=>{t(0,a=s)},100)):i()},100)}const r= n=>{n.preventDefault();let l=document.getElementById(s.name),c=l?l.offsetTop:0;window.scrollTo({top:c-oe,behavior:"smooth"}),i()};return o.$$set= n=>{"category"in n&&t(1,s=n.category),"currentCategory"in n&&t(0,a=n.currentCategory)},[a,s,i,r]}class we extends X{constructor(e){super(),Q(this,e,Be,Ee,U,{category:1,currentCategory:0})}}function ce(o, e, t){const s=o.slice();return s[3]=e[t],s}function ue(o, e){let t,s,a,i;function r(l){e[2](l)}let n={category:e[3]};return e[0]!==void 0&&(n.currentCategory=e[0]),s=new we({props:n}),N.push(()=>O(s,"currentCategory",r)),{key:o,first:null,c(){t=S(),z(s.$$.fragment),this.h()},l(l){t=S(),J(s.$$.fragment,l),this.h()},h(){this.first=t},m(l, c){D(l,t,c),K(s,l,c),i=!0},p(l, c){e=l;const d={};c&2&&(d.category=e[3]),!a&&c&1&&(a=!0,d.currentCategory=e[0],$(()=>a=!1)),s.$set(d)},i(l){i||(M(s.$$.fragment,l),i=!0)},o(l){A(s.$$.fragment,l),i=!1},d(l){l&&h(t),R(s,l)}}}function Ie(o){let e,t=[],s=new Map,a,i=o[1];const r= n=>n[3].id;for(let n=0; n<i.length; n+=1){let l=ce(o,i,n),c=r(l);s.set(c,t[n]=ue(c,l))}return{c(){e=b("div");for(let n=0; n<t.length; n+=1)t[n].c();this.h()},l(n){e=y(n,"DIV",{class:!0});var l=k(e);for(let c=0; c<t.length; c+=1)t[c].l(l);l.forEach(h),this.h()},h(){g(e,"class","categories svelte-xbh343")},m(n, l){D(n,e,l);for(let c=0; c<t.length; c+=1)t[c].m(e,null);a=!0},p(n, [l]){l&3&&(i=n[1],ge(),t=pe(t,l,r,1,n,i,s,e,be,ue,null,ce),he())},i(n){if(!a){for(let l=0; l<i.length; l+=1)M(t[l]);a=!0}},o(n){for(let l=0; l<t.length; l+=1)A(t[l]);a=!1},d(n){n&&h(e);for(let l=0; l<t.length; l+=1)t[l].d()}}}function De(o, e, t){let{categories:s=[]}=e,{currentCategory:a={id:0,name:""}}=e;ae(()=>{let r=document.getElementsByClassName("category");[].forEach.call(r,function(n, l, c){})});function i(r){a=r,t(0,a)}return o.$$set= r=>{"categories"in r&&t(1,s=r.categories),"currentCategory"in r&&t(0,a=r.currentCategory)},[a,s,i]}class Me extends X{constructor(e){super(),Q(this,e,De,Ie,U,{categories:1,currentCategory:0})}}function _e(o, e, t){const s=o.slice();return s[3]=e[t],s}function fe(o){let e,t,s,a,i,r,n,l,c=o[3].name+"",d,f,p=(o[0][o[3].id]||0)+"",u,C,_,v,w=o[3].description+"",I,Z,T,W=o[3].price*o[0][o[3].id]+"",j,x;return{c(){e=b("div"),t=b("div"),s=b("img"),i=L(),r=b("div"),n=b("div"),l=b("span"),d=V(c),f=b("span"),u=V(p),C=V("x"),_=L(),v=b("span"),I=V(w),Z=L(),T=b("div"),j=V(W),x=L(),this.h()},l(E){e=y(E,"DIV",{class:!0});var B=k(e);t=y(B,"DIV",{class:!0});var F=k(t);s=y(F,"IMG",{class:!0,src:!0,alt:!0}),i=q(F),r=y(F,"DIV",{class:!0});var G=k(r);n=y(G,"DIV",{class:!0});var ee=k(n);l=y(ee,"SPAN",{class:!0});var re=k(l);d=P(re,c),re.forEach(h),f=y(ee,"SPAN",{class:!0});var te=k(f);u=P(te,p),C=P(te,"x"),te.forEach(h),ee.forEach(h),_=q(G),v=y(G,"SPAN",{class:!0});var ne=k(v);I=P(ne,w),ne.forEach(h),G.forEach(h),F.forEach(h),Z=q(B),T=y(B,"DIV",{class:!0});var le=k(T);j=P(le,W),le.forEach(h),x=q(B),B.forEach(h),this.h()},h(){g(s,"class","item__img svelte-11x6ndh"),ie(s.src,a="/bipolar0wl/"+o[3].image)||g(s,"src",a),g(s,"alt",""),g(l,"class","item__name svelte-11x6ndh"),g(f,"class","item__count svelte-11x6ndh"),g(n,"class","svelte-11x6ndh"),g(v,"class","item__description svelte-11x6ndh"),g(r,"class","item__text svelte-11x6ndh"),g(t,"class","item__info svelte-11x6ndh"),g(T,"class","item__price svelte-11x6ndh"),g(e,"class","item svelte-11x6ndh")},m(E, B){D(E,e,B),m(e,t),m(t,s),m(t,i),m(t,r),m(r,n),m(n,l),m(l,d),m(n,f),m(f,u),m(f,C),m(r,_),m(r,v),m(v,I),m(e,Z),m(e,T),m(T,j),m(e,x)},p(E, B){B&2&&!ie(s.src,a="/bipolar0wl/"+E[3].image)&&g(s,"src",a),B&2&&c!==(c=E[3].name+"")&&H(d,c),B&3&&p!==(p=(E[0][E[3].id]||0)+"")&&H(u,p),B&2&&w!==(w=E[3].description+"")&&H(I,w),B&3&&W!==(W=E[3].price*E[0][E[3].id]+"")&&H(j,W)},d(E){E&&h(e)}}}function de(o, e){let t,s,a=e[0][e[3].id]!=null&&fe(e);return{key:o,first:null,c(){t=S(),a&&a.c(),s=S(),this.h()},l(i){t=S(),a&&a.l(i),s=S(),this.h()},h(){this.first=t},m(i, r){D(i,t,r),a&&a.m(i,r),D(i,s,r)},p(i, r){e=i,e[0][e[3].id]!=null?a?a.p(e,r):(a=fe(e),a.c(),a.m(s.parentNode,s)):a&&(a.d(1),a=null)},d(i){i&&h(t),a&&a.d(i),i&&h(s)}}}function Ae(o){let e,t,s,a=[],i=new Map,r,n,l,c=o[1];const d= f=>f[3].id;for(let f=0; f<c.length; f+=1){let p=_e(o,c,f),u=d(p);i.set(u,a[f]=de(u,p))}return{c(){e=b("div"),t=b("div"),s=b("div");for(let f=0; f<a.length; f+=1)a[f].c();r=L(),n=b("div"),l=b("textarea"),this.h()},l(f){e=y(f,"DIV",{class:!0});var p=k(e);t=y(p,"DIV",{class:!0});var u=k(t);s=y(u,"DIV",{class:!0});var C=k(s);for(let v=0; v<a.length; v+=1)a[v].l(C);C.forEach(h),u.forEach(h),r=q(p),n=y(p,"DIV",{class:!0});var _=k(n);l=y(_,"TEXTAREA",{class:!0,type:!0,placeholder:!0}),k(l).forEach(h),_.forEach(h),p.forEach(h),this.h()},h(){g(s,"class","basket__order__list svelte-11x6ndh"),g(t,"class","basket__order svelte-11x6ndh"),g(l,"class","basket__comment svelte-11x6ndh"),g(l,"type","text"),g(l,"placeholder","\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439"),g(n,"class","svelte-11x6ndh"),g(e,"class","basket svelte-11x6ndh")},m(f, p){D(f,e,p),m(e,t),m(t,s);for(let u=0; u<a.length; u+=1)a[u].m(s,null);m(e,r),m(e,n),m(n,l)},p(f, [p]){p&3&&(c=f[1],a=pe(a,p,d,1,f,c,i,s,ye,de,null,_e))},i:Y,o:Y,d(f){f&&h(e);for(let p=0; p<a.length; p+=1)a[p].d()}}}function Te(o, e, t){let{page:s=1}=e,a={};se.subscribe(r=>{t(0,a=r)});let i=[];return me.subscribe(r=>{t(1,i=r)}),ae(async()=>{let r=window.Telegram.WebApp;r.BackButton.show(),r.BackButton.onClick(()=>{r.MainButton.text="\u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0437\u0430\u043A\u0430\u0437",t(2,s=0),r.BackButton.hide()});for(var n=document.querySelectorAll(".basket__back a"),l=0; l<n.length; l++)n[l].addEventListener("click",function(){t(2,s=s==0?1:0)})}),o.$$set= r=>{"page"in r&&t(2,s=r.page)},[a,i,s]}class Ve extends X{constructor(e){super(),Q(this,e,Te,Ae,U,{page:2})}}function Pe(o){let e,t,s;function a(r){o[9](r)}let i={};return o[4]!==void 0&&(i.page=o[4]),e=new Ve({props:i}),N.push(()=>O(e,"page",a)),{c(){z(e.$$.fragment)},l(r){J(e.$$.fragment,r)},m(r, n){K(e,r,n),s=!0},p(r, n){const l={};!t&&n&16&&(t=!0,l.page=r[4],$(()=>t=!1)),e.$set(l)},i(r){s||(M(e.$$.fragment,r),s=!0)},o(r){A(e.$$.fragment,r),s=!1},d(r){R(e,r)}}}function Ne(o){let e,t,s,a,i,r,n,l;function c(_){o[5](_)}function d(_){o[6](_)}let f={};o[1]!==void 0&&(f.categories=o[1]),o[3]!==void 0&&(f.currentCategory=o[3]),e=new Me({props:f}),N.push(()=>O(e,"categories",c)),N.push(()=>O(e,"currentCategory",d));function p(_){o[7](_)}function u(_){o[8](_)}let C={products:o[2],categories:o[1]};return o[0]!==void 0&&(C.basket=o[0]),o[3]!==void 0&&(C.currentCategory=o[3]),i=new Ce({props:C}),N.push(()=>O(i,"basket",p)),N.push(()=>O(i,"currentCategory",u)),{c(){z(e.$$.fragment),a=L(),z(i.$$.fragment)},l(_){J(e.$$.fragment,_),a=q(_),J(i.$$.fragment,_)},m(_, v){K(e,_,v),D(_,a,v),K(i,_,v),l=!0},p(_, v){const w={};!t&&v&2&&(t=!0,w.categories=_[1],$(()=>t=!1)),!s&&v&8&&(s=!0,w.currentCategory=_[3],$(()=>s=!1)),e.$set(w);const I={};v&4&&(I.products=_[2]),v&2&&(I.categories=_[1]),!r&&v&1&&(r=!0,I.basket=_[0],$(()=>r=!1)),!n&&v&8&&(n=!0,I.currentCategory=_[3],$(()=>n=!1)),i.$set(I)},i(_){l||(M(e.$$.fragment,_),M(i.$$.fragment,_),l=!0)},o(_){A(e.$$.fragment,_),A(i.$$.fragment,_),l=!1},d(_){R(e,_),_&&h(a),R(i,_)}}}function Oe(o){let e,t,s,a,i;const r=[Ne,Pe],n=[];function l(c, d){return c[4]==0?0:1}return s=l(o),a=n[s]=r[s](o),{c(){e=b("main"),t=b("div"),a.c(),this.h()},l(c){e=y(c,"MAIN",{class:!0});var d=k(e);t=y(d,"DIV",{class:!0});var f=k(t);a.l(f),f.forEach(h),d.forEach(h),this.h()},h(){g(t,"class","app svelte-plkv"),g(e,"class","svelte-plkv")},m(c, d){D(c,e,d),m(e,t),n[s].m(t,null),i=!0},p(c, [d]){let f=s;s=l(c),s===f?n[s].p(c,d):(ge(),A(n[f],1,1,()=>{n[f]=null}),he(),a=n[s],a?a.p(c,d):(a=n[s]=r[s](c),a.c()),M(a,1),a.m(t,null))},i(c){i||(M(a),i=!0)},o(c){A(a),i=!1},d(c){c&&h(e),n[s].d()}}}function Se(o, e, t){let s=[],a=[],i={},r={},n=0;ke.subscribe(u=>{t(1,s=u)}),me.subscribe(u=>{t(2,a=u)}),ae(async()=>{let u=window.Telegram.WebApp;alert(u.WebAppInitData),alert(u.WebAppInitData.query_id),alert(u.WebAppInitData.user),t(3,i=s[0]),u.expand(),u.MainButton.setText("\u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0437\u0430\u043A\u0430\u0437"),u.MainButton.setParams({color:"#31b545"}),u.setBackgroundColor("secondary_bg_color"),u.MainButton.onClick(()=>{if(u.HapticFeedback.impactOccurred("light"),n==0){t(4,n=1);let C=u.MainButton.text=Object.keys(r).reduce((v, w)=>v+a.find(I=>I.id==w).price*r[w],0);u.MainButton.setText(`\u041A \u043E\u0444\u043E\u0440\u043C\u043B\u0435\u043D\u0438\u044E ${C} \u20BD`);let _={message_id:5,text:"test text"};u.sendData(_)}else u.MainButton.text="\u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0437\u0430\u043A\u0430\u0437"}),se.subscribe(C=>{t(0,r=C),Object.keys(r).length!==0?u.MainButton.show():u.MainButton.hide()})});function l(u){s=u,t(1,s)}function c(u){i=u,t(3,i)}function d(u){r=u,t(0,r)}function f(u){i=u,t(3,i)}function p(u){n=u,t(4,n)}return o.$$.update=()=>{o.$$.dirty&1&&se.set(r)},[r,s,a,i,n,l,c,d,f,p]}class We extends X{constructor(e){super(),Q(this,e,Se,Oe,U,{})}}export{We as default};
