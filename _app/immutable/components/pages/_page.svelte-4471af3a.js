import{S as X,i as $,s as Q,k as y,q as T,l as k,m as C,r as D,h as v,n as h,b as M,G as m,I as ge,u as j,B as z,g as he,J as pe,K as be,d as me,f as N,t as O,o as re,L as S,M as L,e as q,w as J,x as K,y as R,N as H,z as U,a as A,c as V,O as ye,P as oe}from"../../chunks/index-981bc336.js";import{b as se,p as ve,c as ke}from"../../chunks/store-69d22bd8.js";import{P as Ce}from"../../chunks/ProductList-4a1e70a6.js";function Ee(i){let e,t=i[1].name+"",s,a,o,r,l,n;return{c(){e=y("a"),s=T(t),this.h()},l(_){e=k(_,"A",{href:!0,"data-category-name":!0,class:!0});var p=C(e);s=D(p,t),p.forEach(v),this.h()},h(){h(e,"href",a="#"+i[1].name),h(e,"data-category-name",o=i[1].name),h(e,"class",r="category "+(i[0].id===i[1].id?"category--active":"")+" svelte-1c0y5ce")},m(_,p){M(_,e,p),m(e,s),l||(n=ge(e,"click",i[3]),l=!0)},p(_,[p]){p&2&&t!==(t=_[1].name+"")&&j(s,t),p&2&&a!==(a="#"+_[1].name)&&h(e,"href",a),p&2&&o!==(o=_[1].name)&&h(e,"data-category-name",o),p&3&&r!==(r="category "+(_[0].id===_[1].id?"category--active":"")+" svelte-1c0y5ce")&&h(e,"class",r)},i:z,o:z,d(_){_&&v(e),l=!1,n()}}}const ie=40;function Be(i,e,t){let{category:s={id:0,name:""}}=e,{currentCategory:a={id:0,name:""}}=e;function o(){let l=document.getElementById(s.name);setTimeout(()=>{document.documentElement.clientHeight==document.body.scrollHeight-window.pageYOffset||window.pageYOffset+ie==l.offsetTop?(t(0,a=s),setTimeout(()=>{t(0,a=s)},100)):o()},100)}const r=l=>{l.preventDefault();let n=document.getElementById(s.name),_=n?n.offsetTop:0;window.scrollTo({top:_-ie,behavior:"smooth"}),o()};return i.$$set=l=>{"category"in l&&t(1,s=l.category),"currentCategory"in l&&t(0,a=l.currentCategory)},[a,s,o,r]}class we extends X{constructor(e){super(),$(this,e,Be,Ee,Q,{category:1,currentCategory:0})}}function ce(i,e,t){const s=i.slice();return s[3]=e[t],s}function ue(i,e){let t,s,a,o;function r(n){e[2](n)}let l={category:e[3]};return e[0]!==void 0&&(l.currentCategory=e[0]),s=new we({props:l}),S.push(()=>L(s,"currentCategory",r)),{key:i,first:null,c(){t=q(),J(s.$$.fragment),this.h()},l(n){t=q(),K(s.$$.fragment,n),this.h()},h(){this.first=t},m(n,_){M(n,t,_),R(s,n,_),o=!0},p(n,_){e=n;const p={};_&2&&(p.category=e[3]),!a&&_&1&&(a=!0,p.currentCategory=e[0],H(()=>a=!1)),s.$set(p)},i(n){o||(N(s.$$.fragment,n),o=!0)},o(n){O(s.$$.fragment,n),o=!1},d(n){n&&v(t),U(s,n)}}}function Ie(i){let e,t=[],s=new Map,a,o=i[1];const r=l=>l[3].id;for(let l=0;l<o.length;l+=1){let n=ce(i,o,l),_=r(n);s.set(_,t[l]=ue(_,n))}return{c(){e=y("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=k(l,"DIV",{class:!0});var n=C(e);for(let _=0;_<t.length;_+=1)t[_].l(n);n.forEach(v),this.h()},h(){h(e,"class","categories svelte-xbh343")},m(l,n){M(l,e,n);for(let _=0;_<t.length;_+=1)t[_].m(e,null);a=!0},p(l,[n]){n&3&&(o=l[1],he(),t=pe(t,n,r,1,l,o,s,e,be,ue,null,ce),me())},i(l){if(!a){for(let n=0;n<o.length;n+=1)N(t[n]);a=!0}},o(l){for(let n=0;n<t.length;n+=1)O(t[n]);a=!1},d(l){l&&v(e);for(let n=0;n<t.length;n+=1)t[n].d()}}}function Me(i,e,t){let{categories:s=[]}=e,{currentCategory:a={id:0,name:""}}=e;re(()=>{let r=document.getElementsByClassName("category");[].forEach.call(r,function(l,n,_){})});function o(r){a=r,t(0,a)}return i.$$set=r=>{"categories"in r&&t(1,s=r.categories),"currentCategory"in r&&t(0,a=r.currentCategory)},[a,s,o]}class Te extends X{constructor(e){super(),$(this,e,Me,Ie,Q,{categories:1,currentCategory:0})}}function _e(i,e,t){const s=i.slice();return s[3]=e[t],s}function fe(i){let e,t,s,a,o,r,l,n,_=i[3].name+"",p,f,d=(i[0][i[3].id]||0)+"",b,u,c,g,E=i[3].description+"",I,Z,P,W=i[3].price*i[0][i[3].id]+"",F,x;return{c(){e=y("div"),t=y("div"),s=y("img"),o=A(),r=y("div"),l=y("div"),n=y("span"),p=T(_),f=y("span"),b=T(d),u=T("x"),c=A(),g=y("span"),I=T(E),Z=A(),P=y("div"),F=T(W),x=A(),this.h()},l(B){e=k(B,"DIV",{class:!0});var w=C(e);t=k(w,"DIV",{class:!0});var G=C(t);s=k(G,"IMG",{class:!0,src:!0,alt:!0}),o=V(G),r=k(G,"DIV",{class:!0});var Y=C(r);l=k(Y,"DIV",{class:!0});var ee=C(l);n=k(ee,"SPAN",{class:!0});var ae=C(n);p=D(ae,_),ae.forEach(v),f=k(ee,"SPAN",{class:!0});var te=C(f);b=D(te,d),u=D(te,"x"),te.forEach(v),ee.forEach(v),c=V(Y),g=k(Y,"SPAN",{class:!0});var ne=C(g);I=D(ne,E),ne.forEach(v),Y.forEach(v),G.forEach(v),Z=V(w),P=k(w,"DIV",{class:!0});var le=C(P);F=D(le,W),le.forEach(v),x=V(w),w.forEach(v),this.h()},h(){h(s,"class","item__img svelte-11x6ndh"),oe(s.src,a="/bipolar0wl/"+i[3].image)||h(s,"src",a),h(s,"alt",""),h(n,"class","item__name svelte-11x6ndh"),h(f,"class","item__count svelte-11x6ndh"),h(l,"class","svelte-11x6ndh"),h(g,"class","item__description svelte-11x6ndh"),h(r,"class","item__text svelte-11x6ndh"),h(t,"class","item__info svelte-11x6ndh"),h(P,"class","item__price svelte-11x6ndh"),h(e,"class","item svelte-11x6ndh")},m(B,w){M(B,e,w),m(e,t),m(t,s),m(t,o),m(t,r),m(r,l),m(l,n),m(n,p),m(l,f),m(f,b),m(f,u),m(r,c),m(r,g),m(g,I),m(e,Z),m(e,P),m(P,F),m(e,x)},p(B,w){w&2&&!oe(s.src,a="/bipolar0wl/"+B[3].image)&&h(s,"src",a),w&2&&_!==(_=B[3].name+"")&&j(p,_),w&3&&d!==(d=(B[0][B[3].id]||0)+"")&&j(b,d),w&2&&E!==(E=B[3].description+"")&&j(I,E),w&3&&W!==(W=B[3].price*B[0][B[3].id]+"")&&j(F,W)},d(B){B&&v(e)}}}function de(i,e){let t,s,a=e[0][e[3].id]!=null&&fe(e);return{key:i,first:null,c(){t=q(),a&&a.c(),s=q(),this.h()},l(o){t=q(),a&&a.l(o),s=q(),this.h()},h(){this.first=t},m(o,r){M(o,t,r),a&&a.m(o,r),M(o,s,r)},p(o,r){e=o,e[0][e[3].id]!=null?a?a.p(e,r):(a=fe(e),a.c(),a.m(s.parentNode,s)):a&&(a.d(1),a=null)},d(o){o&&v(t),a&&a.d(o),o&&v(s)}}}function De(i){let e,t,s,a=[],o=new Map,r,l,n,_=i[1];const p=f=>f[3].id;for(let f=0;f<_.length;f+=1){let d=_e(i,_,f),b=p(d);o.set(b,a[f]=de(b,d))}return{c(){e=y("div"),t=y("div"),s=y("div");for(let f=0;f<a.length;f+=1)a[f].c();r=A(),l=y("div"),n=y("textarea"),this.h()},l(f){e=k(f,"DIV",{class:!0});var d=C(e);t=k(d,"DIV",{class:!0});var b=C(t);s=k(b,"DIV",{class:!0});var u=C(s);for(let g=0;g<a.length;g+=1)a[g].l(u);u.forEach(v),b.forEach(v),r=V(d),l=k(d,"DIV",{class:!0});var c=C(l);n=k(c,"TEXTAREA",{class:!0,type:!0,placeholder:!0}),C(n).forEach(v),c.forEach(v),d.forEach(v),this.h()},h(){h(s,"class","basket__order__list svelte-11x6ndh"),h(t,"class","basket__order svelte-11x6ndh"),h(n,"class","basket__comment svelte-11x6ndh"),h(n,"type","text"),h(n,"placeholder","\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0439"),h(l,"class","svelte-11x6ndh"),h(e,"class","basket svelte-11x6ndh")},m(f,d){M(f,e,d),m(e,t),m(t,s);for(let b=0;b<a.length;b+=1)a[b].m(s,null);m(e,r),m(e,l),m(l,n)},p(f,[d]){d&3&&(_=f[1],a=pe(a,d,p,1,f,_,o,s,ye,de,null,_e))},i:z,o:z,d(f){f&&v(e);for(let d=0;d<a.length;d+=1)a[d].d()}}}function Ae(i,e,t){let{page:s=1}=e,a={};se.subscribe(r=>{t(0,a=r)});let o=[];return ve.subscribe(r=>{t(1,o=r)}),re(async()=>{let r=window.Telegram.WebApp;r.BackButton.show(),r.BackButton.onClick(()=>{t(2,s=0),r.BackButton.hide()});for(var l=document.querySelectorAll(".basket__back a"),n=0;n<l.length;n++)l[n].addEventListener("click",function(){t(2,s=s==0?1:0)})}),i.$$set=r=>{"page"in r&&t(2,s=r.page)},[a,o,s]}class Ve extends X{constructor(e){super(),$(this,e,Ae,De,Q,{page:2})}}function Ne(i){let e,t,s;function a(r){i[10](r)}let o={};return i[4]!==void 0&&(o.page=i[4]),e=new Ve({props:o}),S.push(()=>L(e,"page",a)),{c(){J(e.$$.fragment)},l(r){K(e.$$.fragment,r)},m(r,l){R(e,r,l),s=!0},p(r,l){const n={};!t&&l&16&&(t=!0,n.page=r[4],H(()=>t=!1)),e.$set(n)},i(r){s||(N(e.$$.fragment,r),s=!0)},o(r){O(e.$$.fragment,r),s=!1},d(r){U(e,r)}}}function Oe(i){let e,t,s,a,o,r,l,n;function _(c){i[6](c)}function p(c){i[7](c)}let f={};i[1]!==void 0&&(f.categories=i[1]),i[3]!==void 0&&(f.currentCategory=i[3]),e=new Te({props:f}),S.push(()=>L(e,"categories",_)),S.push(()=>L(e,"currentCategory",p));function d(c){i[8](c)}function b(c){i[9](c)}let u={products:i[2],categories:i[1]};return i[0]!==void 0&&(u.basket=i[0]),i[3]!==void 0&&(u.currentCategory=i[3]),o=new Ce({props:u}),S.push(()=>L(o,"basket",d)),S.push(()=>L(o,"currentCategory",b)),{c(){J(e.$$.fragment),a=A(),J(o.$$.fragment)},l(c){K(e.$$.fragment,c),a=V(c),K(o.$$.fragment,c)},m(c,g){R(e,c,g),M(c,a,g),R(o,c,g),n=!0},p(c,g){const E={};!t&&g&2&&(t=!0,E.categories=c[1],H(()=>t=!1)),!s&&g&8&&(s=!0,E.currentCategory=c[3],H(()=>s=!1)),e.$set(E);const I={};g&4&&(I.products=c[2]),g&2&&(I.categories=c[1]),!r&&g&1&&(r=!0,I.basket=c[0],H(()=>r=!1)),!l&&g&8&&(l=!0,I.currentCategory=c[3],H(()=>l=!1)),o.$set(I)},i(c){n||(N(e.$$.fragment,c),N(o.$$.fragment,c),n=!0)},o(c){O(e.$$.fragment,c),O(o.$$.fragment,c),n=!1},d(c){U(e,c),c&&v(a),U(o,c)}}}function Pe(i){let e,t,s,a,o,r,l,n,_,p;const f=[Oe,Ne],d=[];function b(u,c){return u[4]==0?0:1}return s=b(i),a=d[s]=f[s](i),{c(){e=y("main"),t=y("div"),a.c(),o=A(),r=y("button"),l=T("click me"),this.h()},l(u){e=k(u,"MAIN",{class:!0});var c=C(e);t=k(c,"DIV",{class:!0});var g=C(t);a.l(g),o=V(g),r=k(g,"BUTTON",{class:!0});var E=C(r);l=D(E,"click me"),E.forEach(v),g.forEach(v),c.forEach(v),this.h()},h(){h(r,"class","svelte-plkv"),h(t,"class","app svelte-plkv"),h(e,"class","svelte-plkv")},m(u,c){M(u,e,c),m(e,t),d[s].m(t,null),m(t,o),m(t,r),m(r,l),n=!0,_||(p=ge(r,"click",i[5]),_=!0)},p(u,[c]){let g=s;s=b(u),s===g?d[s].p(u,c):(he(),O(d[g],1,1,()=>{d[g]=null}),me(),a=d[s],a?a.p(u,c):(a=d[s]=f[s](u),a.c()),N(a,1),a.m(t,o))},i(u){n||(N(a),n=!0)},o(u){O(a),n=!1},d(u){u&&v(e),d[s].d(),_=!1,p()}}}function Se(i,e,t){let s=[],a=[],o={},r={},l=0;ke.subscribe(u=>{t(1,s=u)}),ve.subscribe(u=>{t(2,a=u)}),re(async()=>{let u=window.Telegram.WebApp;t(3,o=s[0]),u.expand(),u.MainButton.setText("\u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0437\u0430\u043A\u0430\u0437"),u.MainButton.setParams({color:"#31b545"}),u.setBackgroundColor("secondary_bg_color"),u.MainButton.onClick(()=>{u.HapticFeedback.impactOccurred("light"),l==0?(t(4,l=1),u.MainButton.text=Object.keys(r).reduce((c,g)=>c+a.find(E=>E.id==g).price*r[g],0)):(t(4,l=0),u.MainButton.text="\u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0437\u0430\u043A\u0430\u0437")}),se.subscribe(c=>{t(0,r=c),Object.keys(r).length!==0?u.MainButton.show():u.MainButton.hide()})});function n(){let u=window.Telegram.WebApp;l==0?(t(4,l=1),u.MainButton.setText(`\u041A \u043E\u0444\u043E\u0440\u043C\u043B\u0435\u043D\u0438\u044E ${r.reduce((c,g)=>c+g,0)} \u20BD`)):(t(4,l=0),u.MainButton.setText("\u041F\u043E\u0441\u043C\u043E\u0442\u0440\u0435\u0442\u044C \u0437\u0430\u043A\u0430\u0437"))}function _(u){s=u,t(1,s)}function p(u){o=u,t(3,o)}function f(u){r=u,t(0,r)}function d(u){o=u,t(3,o)}function b(u){l=u,t(4,l)}return i.$$.update=()=>{i.$$.dirty&1&&se.set(r)},[r,s,a,o,l,n,_,p,f,d,b]}class We extends X{constructor(e){super(),$(this,e,Se,Pe,Q,{})}}export{We as default};
