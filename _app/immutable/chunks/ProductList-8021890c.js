import{S as U,i as z,s as J,k,l as v,m as y,h as g,n as m,b as T,B as K,q as V,a as N,r as C,c as S,G as h,I as Q,u as A,Q as fe,L as Y,M as F,w as H,x as R,P as te,y as W,N as X,f as L,t as M,z as Z,g as ce,J as ae,K as ue,d as ie,e as G,o as de}from"./index-981bc336.js";import{b as _e}from"./store-6888a841.js";function he(a){let e,t,l,n,r,u,o,s,c,_,i;return{c(){e=k("div"),t=k("button"),l=V("-"),n=N(),r=k("span"),u=V(a[0]),o=N(),s=k("button"),c=V("+"),this.h()},l(b){e=v(b,"DIV",{class:!0});var p=y(e);t=v(p,"BUTTON",{class:!0});var d=y(t);l=C(d,"-"),d.forEach(g),n=S(p),r=v(p,"SPAN",{class:!0});var f=y(r);u=C(f,a[0]),f.forEach(g),o=S(p),s=v(p,"BUTTON",{class:!0});var w=y(s);c=C(w,"+"),w.forEach(g),p.forEach(g),this.h()},h(){m(t,"class","decrement svelte-1ap7wl4"),m(r,"class","count svelte-1ap7wl4"),m(s,"class","increment svelte-1ap7wl4"),m(e,"class","counter-edit svelte-1ap7wl4")},m(b,p){T(b,e,p),h(e,t),h(t,l),h(e,n),h(e,r),h(r,u),h(e,o),h(e,s),h(s,c),_||(i=[Q(t,"click",a[2]),Q(s,"click",a[1])],_=!0)},p(b,p){p&1&&A(u,b[0])},d(b){b&&g(e),_=!1,fe(i)}}}function ge(a){let e,t,l,n,r,u,o;return{c(){e=k("div"),t=k("button"),l=k("span"),n=V(a[3]),r=V(" \u20BD"),this.h()},l(s){e=v(s,"DIV",{class:!0});var c=y(e);t=v(c,"BUTTON",{class:!0});var _=y(t);l=v(_,"SPAN",{class:!0});var i=y(l);n=C(i,a[3]),r=C(i," \u20BD"),i.forEach(g),_.forEach(g),c.forEach(g),this.h()},h(){m(l,"class","svelte-1ap7wl4"),m(t,"class","add-button svelte-1ap7wl4"),m(e,"class","counter-new svelte-1ap7wl4")},m(s,c){T(s,e,c),h(e,t),h(t,l),h(l,n),h(l,r),u||(o=Q(t,"click",a[1]),u=!0)},p:K,d(s){s&&g(e),u=!1,o()}}}function be(a){let e;function t(r,u){return r[0]==0?ge:he}let l=t(a),n=l(a);return{c(){e=k("div"),n.c(),this.h()},l(r){e=v(r,"DIV",{class:!0});var u=y(e);n.l(u),u.forEach(g),this.h()},h(){m(e,"class","counter svelte-1ap7wl4")},m(r,u){T(r,e,u),n.m(e,null)},p(r,[u]){l===(l=t(r))&&n?n.p(r,u):(n.d(1),n=l(r),n&&(n.c(),n.m(e,null)))},i:K,o:K,d(r){r&&g(e),n.d()}}}function pe(a,e,t){let{product:l={id:0,name:"",description:"",price:0}}=e,{basket:n={}}=e;_e.subscribe(c=>{t(4,n=c)});let r=n[l.id]||0;const u=()=>{t(0,r+=1),t(4,n[l.id]=r,n)},o=()=>{t(0,r-=1),n[l.id]&&r<=0?(delete n[l.id],t(4,n)):t(4,n[l.id]=r,n)};let s=l.price.toString();return a.$$set=c=>{"product"in c&&t(5,l=c.product),"basket"in c&&t(4,n=c.basket)},[r,u,o,s,n,l]}class me extends U{constructor(e){super(),z(this,e,pe,be,J,{product:5,basket:4})}}function se(a){let e,t;return{c(){e=k("button"),t=V("\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C")},l(l){e=v(l,"BUTTON",{});var n=y(e);t=C(n,"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C"),n.forEach(g)},m(l,n){T(l,e,n),h(e,t)},d(l){l&&g(e)}}}function ke(a){let e,t,l,n,r,u,o,s=a[1].name+"",c,_,i,b=a[1].description+"",p,d,f,w,j,D;function q(E){a[3](E)}let x={product:a[1]};a[0]!==void 0&&(x.basket=a[0]),f=new me({props:x}),Y.push(()=>F(f,"basket",q));let P=a[2].edit&&se();return{c(){e=k("div"),t=k("img"),n=N(),r=k("div"),u=k("div"),o=k("p"),c=V(s),_=N(),i=k("p"),p=V(b),d=N(),H(f.$$.fragment),j=N(),P&&P.c(),this.h()},l(E){e=v(E,"DIV",{class:!0});var I=y(e);t=v(I,"IMG",{class:!0,src:!0,alt:!0}),n=S(I),r=v(I,"DIV",{class:!0});var B=y(r);u=v(B,"DIV",{});var O=y(u);o=v(O,"P",{class:!0});var $=y(o);c=C($,s),$.forEach(g),_=S(O),i=v(O,"P",{class:!0});var ee=y(i);p=C(ee,b),ee.forEach(g),O.forEach(g),d=S(B),R(f.$$.fragment,B),B.forEach(g),j=S(I),P&&P.l(I),I.forEach(g),this.h()},h(){m(t,"class","product__img svelte-16lu9jb"),te(t.src,l=a[1].image)||m(t,"src",l),m(t,"alt","Nothing here"),m(o,"class","product__name svelte-16lu9jb"),m(i,"class","product__description svelte-16lu9jb"),m(r,"class","product__info svelte-16lu9jb"),m(e,"class","product svelte-16lu9jb")},m(E,I){T(E,e,I),h(e,t),h(e,n),h(e,r),h(r,u),h(u,o),h(o,c),h(u,_),h(u,i),h(i,p),h(r,d),W(f,r,null),h(e,j),P&&P.m(e,null),D=!0},p(E,[I]){(!D||I&2&&!te(t.src,l=E[1].image))&&m(t,"src",l),(!D||I&2)&&s!==(s=E[1].name+"")&&A(c,s),(!D||I&2)&&b!==(b=E[1].description+"")&&A(p,b);const B={};I&2&&(B.product=E[1]),!w&&I&1&&(w=!0,B.basket=E[0],X(()=>w=!1)),f.$set(B),E[2].edit?P||(P=se(),P.c(),P.m(e,null)):P&&(P.d(1),P=null)},i(E){D||(L(f.$$.fragment,E),D=!0)},o(E){M(f.$$.fragment,E),D=!1},d(E){E&&g(e),Z(f),P&&P.d()}}}function ve(a,e,t){let{product:l={id:0,name:"",description:"",price:0}}=e,{rules:n={edit:!1}}=e,{basket:r={}}=e;function u(o){r=o,t(0,r)}return a.$$set=o=>{"product"in o&&t(1,l=o.product),"rules"in o&&t(2,n=o.rules),"basket"in o&&t(0,r=o.basket)},[r,l,n,u]}class ye extends U{constructor(e){super(),z(this,e,ve,ke,J,{product:1,rules:2,basket:0})}}function le(a,e,t){const l=a.slice();return l[5]=e[t],l}function re(a,e){let t,l,n,r;function u(s){e[4](s)}let o={product:e[5],rules:e[3]};return e[0]!==void 0&&(o.basket=e[0]),l=new ye({props:o}),Y.push(()=>F(l,"basket",u)),{key:a,first:null,c(){t=G(),H(l.$$.fragment),this.h()},l(s){t=G(),R(l.$$.fragment,s),this.h()},h(){this.first=t},m(s,c){T(s,t,c),W(l,s,c),r=!0},p(s,c){e=s;const _={};c&4&&(_.product=e[5]),c&8&&(_.rules=e[3]),!n&&c&1&&(n=!0,_.basket=e[0],X(()=>n=!1)),l.$set(_)},i(s){r||(L(l.$$.fragment,s),r=!0)},o(s){M(l.$$.fragment,s),r=!1},d(s){s&&g(t),Z(l,s)}}}function Ee(a){let e,t,l,n=a[1].name+"",r,u,o,s=[],c=new Map,_,i,b=a[2];const p=d=>d[5].id;for(let d=0;d<b.length;d+=1){let f=le(a,b,d),w=p(f);c.set(w,s[d]=re(w,f))}return{c(){e=k("div"),t=k("div"),l=k("b"),r=V(n),u=N(),o=k("div");for(let d=0;d<s.length;d+=1)s[d].c();this.h()},l(d){e=v(d,"DIV",{class:!0,id:!0});var f=y(e);t=v(f,"DIV",{class:!0});var w=y(t);l=v(w,"B",{});var j=y(l);r=C(j,n),j.forEach(g),w.forEach(g),u=S(f),o=v(f,"DIV",{class:!0});var D=y(o);for(let q=0;q<s.length;q+=1)s[q].l(D);D.forEach(g),f.forEach(g),this.h()},h(){m(t,"class","product__group__category svelte-1o5fudi"),m(o,"class","product__group__produtcs svelte-1o5fudi"),m(e,"class","product__group svelte-1o5fudi"),m(e,"id",_=a[1].name)},m(d,f){T(d,e,f),h(e,t),h(t,l),h(l,r),h(e,u),h(e,o);for(let w=0;w<s.length;w+=1)s[w].m(o,null);i=!0},p(d,[f]){(!i||f&2)&&n!==(n=d[1].name+"")&&A(r,n),f&13&&(b=d[2],ce(),s=ae(s,f,p,1,d,b,c,o,ue,re,null,le),ie()),(!i||f&2&&_!==(_=d[1].name))&&m(e,"id",_)},i(d){if(!i){for(let f=0;f<b.length;f+=1)L(s[f]);i=!0}},o(d){for(let f=0;f<s.length;f+=1)M(s[f]);i=!1},d(d){d&&g(e);for(let f=0;f<s.length;f+=1)s[f].d()}}}function we(a,e,t){let{category:l={id:0,name:""}}=e,{products:n=[{id:0,title:"",body:""}]}=e,{basket:r={}}=e,{rules:u={edit:!1}}=e;function o(s){r=s,t(0,r)}return a.$$set=s=>{"category"in s&&t(1,l=s.category),"products"in s&&t(2,n=s.products),"basket"in s&&t(0,r=s.basket),"rules"in s&&t(3,u=s.rules)},[r,l,n,u,o]}class Pe extends U{constructor(e){super(),z(this,e,we,Ee,J,{category:1,products:2,basket:0,rules:3})}}function ne(a,e,t){const l=a.slice();return l[8]=e[t],l}function oe(a,e){let t,l,n,r;function u(...c){return e[5](e[8],...c)}function o(c){e[6](c)}let s={category:e[8],products:e[3].filter(u),rules:e[1]};return e[0]!==void 0&&(s.basket=e[0]),l=new Pe({props:s}),Y.push(()=>F(l,"basket",o)),{key:a,first:null,c(){t=G(),H(l.$$.fragment),this.h()},l(c){t=G(),R(l.$$.fragment,c),this.h()},h(){this.first=t},m(c,_){T(c,t,_),W(l,c,_),r=!0},p(c,_){e=c;const i={};_&4&&(i.category=e[8]),_&12&&(i.products=e[3].filter(u)),_&2&&(i.rules=e[1]),!n&&_&1&&(n=!0,i.basket=e[0],X(()=>n=!1)),l.$set(i)},i(c){r||(L(l.$$.fragment,c),r=!0)},o(c){M(l.$$.fragment,c),r=!1},d(c){c&&g(t),Z(l,c)}}}function Ie(a){let e,t=[],l=new Map,n,r=a[2];const u=o=>o[8].id;for(let o=0;o<r.length;o+=1){let s=ne(a,r,o),c=u(s);l.set(c,t[o]=oe(c,s))}return{c(){e=k("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=v(o,"DIV",{class:!0});var s=y(e);for(let c=0;c<t.length;c+=1)t[c].l(s);s.forEach(g),this.h()},h(){m(e,"class","products svelte-1iufgiz")},m(o,s){T(o,e,s);for(let c=0;c<t.length;c+=1)t[c].m(e,null);n=!0},p(o,[s]){s&15&&(r=o[2],ce(),t=ae(t,s,u,1,o,r,l,e,ue,oe,null,ne),ie())},i(o){if(!n){for(let s=0;s<r.length;s+=1)L(t[s]);n=!0}},o(o){for(let s=0;s<t.length;s+=1)M(t[s]);n=!1},d(o){o&&g(e);for(let s=0;s<t.length;s+=1)t[s].d()}}}function De(a,e,t){let{rules:l={edit:!1}}=e,{basket:n={}}=e,{categories:r=[]}=e,{products:u=[]}=e,{currentCategory:o={id:0,name:""}}=e;de(async()=>{document.querySelectorAll(".product__group").forEach(b=>{b.addEventListener("click",function(p){},!1)}),window.addEventListener("scroll",b=>{s()})});function s(i){let b=document.querySelectorAll(".product__group");for(let p=0;p<b.length;p++){let d=b[p];if(t(4,o=r[p]),window.pageYOffset<d.offsetTop)break}}const c=(i,b)=>b.category_id==i.id;function _(i){n=i,t(0,n)}return a.$$set=i=>{"rules"in i&&t(1,l=i.rules),"basket"in i&&t(0,n=i.basket),"categories"in i&&t(2,r=i.categories),"products"in i&&t(3,u=i.products),"currentCategory"in i&&t(4,o=i.currentCategory)},[n,l,r,u,o,c,_]}class Te extends U{constructor(e){super(),z(this,e,De,Ie,J,{rules:1,basket:0,categories:2,products:3,currentCategory:4})}}export{Te as P};
