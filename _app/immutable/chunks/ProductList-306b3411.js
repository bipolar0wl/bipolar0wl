import{S as U,i as z,s as J,k as p,l as v,m as y,h as g,n as m,b as T,B as K,q as V,a as N,r as C,c as S,G as h,I as Y,u as A,O as fe,L as F,M as H,w as Q,x as R,P as te,y as W,N as X,f as q,t as L,z as Z,g as ce,J as ue,K as ae,d as ie,e as G,o as de}from"./index-24e95d3e.js";import{b as _e}from"./store-a10cd813.js";function he(u){let e,t,l,n,r,a,o,s,c,_,i;return{c(){e=p("div"),t=p("button"),l=V("-"),n=N(),r=p("span"),a=V(u[0]),o=N(),s=p("button"),c=V("+"),this.h()},l(b){e=v(b,"DIV",{class:!0});var k=y(e);t=v(k,"BUTTON",{class:!0});var d=y(t);l=C(d,"-"),d.forEach(g),n=S(k),r=v(k,"SPAN",{class:!0});var f=y(r);a=C(f,u[0]),f.forEach(g),o=S(k),s=v(k,"BUTTON",{class:!0});var P=y(s);c=C(P,"+"),P.forEach(g),k.forEach(g),this.h()},h(){m(t,"class","decrement svelte-145hd6k"),m(r,"class","count svelte-145hd6k"),m(s,"class","increment svelte-145hd6k"),m(e,"class","counter-edit svelte-145hd6k")},m(b,k){T(b,e,k),h(e,t),h(t,l),h(e,n),h(e,r),h(r,a),h(e,o),h(e,s),h(s,c),_||(i=[Y(t,"click",u[2]),Y(s,"click",u[1])],_=!0)},p(b,k){k&1&&A(a,b[0])},d(b){b&&g(e),_=!1,fe(i)}}}function ge(u){let e,t,l,n,r,a,o;return{c(){e=p("div"),t=p("button"),l=p("span"),n=V(u[3]),r=V(" \u20BD"),this.h()},l(s){e=v(s,"DIV",{class:!0});var c=y(e);t=v(c,"BUTTON",{class:!0});var _=y(t);l=v(_,"SPAN",{class:!0});var i=y(l);n=C(i,u[3]),r=C(i," \u20BD"),i.forEach(g),_.forEach(g),c.forEach(g),this.h()},h(){m(l,"class","svelte-145hd6k"),m(t,"class","add-button svelte-145hd6k"),m(e,"class","counter-new svelte-145hd6k")},m(s,c){T(s,e,c),h(e,t),h(t,l),h(l,n),h(l,r),a||(o=Y(t,"click",u[1]),a=!0)},p:K,d(s){s&&g(e),a=!1,o()}}}function be(u){let e;function t(r,a){return r[0]==0?ge:he}let l=t(u),n=l(u);return{c(){e=p("div"),n.c(),this.h()},l(r){e=v(r,"DIV",{class:!0});var a=y(e);n.l(a),a.forEach(g),this.h()},h(){m(e,"class","counter svelte-145hd6k")},m(r,a){T(r,e,a),n.m(e,null)},p(r,[a]){l===(l=t(r))&&n?n.p(r,a):(n.d(1),n=l(r),n&&(n.c(),n.m(e,null)))},i:K,o:K,d(r){r&&g(e),n.d()}}}function ke(u,e,t){let{product:l={id:0,name:"",description:"",price:0}}=e,{basket:n={}}=e;_e.subscribe(c=>{t(4,n=c)});let r=n[l.id]||0;const a=()=>{t(0,r+=1),t(4,n[l.id]=r,n)},o=()=>{t(0,r-=1),n[l.id]&&r<=0?(delete n[l.id],t(4,n)):t(4,n[l.id]=r,n)};let s=l.price.toString();return u.$$set=c=>{"product"in c&&t(5,l=c.product),"basket"in c&&t(4,n=c.basket)},[r,a,o,s,n,l]}class me extends U{constructor(e){super(),z(this,e,ke,be,J,{product:5,basket:4})}}function se(u){let e,t;return{c(){e=p("button"),t=V("\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C")},l(l){e=v(l,"BUTTON",{});var n=y(e);t=C(n,"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C"),n.forEach(g)},m(l,n){T(l,e,n),h(e,t)},d(l){l&&g(e)}}}function pe(u){let e,t,l,n,r,a,o,s=u[1].name+"",c,_,i,b=u[1].description+"",k,d,f,P,O,D;function j(E){u[3](E)}let x={product:u[1]};u[0]!==void 0&&(x.basket=u[0]),f=new me({props:x}),F.push(()=>H(f,"basket",j));let I=u[2].edit&&se();return{c(){e=p("div"),t=p("img"),n=N(),r=p("div"),a=p("div"),o=p("p"),c=V(s),_=N(),i=p("p"),k=V(b),d=N(),Q(f.$$.fragment),O=N(),I&&I.c(),this.h()},l(E){e=v(E,"DIV",{class:!0});var w=y(e);t=v(w,"IMG",{class:!0,src:!0,alt:!0}),n=S(w),r=v(w,"DIV",{class:!0});var B=y(r);a=v(B,"DIV",{});var M=y(a);o=v(M,"P",{class:!0});var $=y(o);c=C($,s),$.forEach(g),_=S(M),i=v(M,"P",{class:!0});var ee=y(i);k=C(ee,b),ee.forEach(g),M.forEach(g),d=S(B),R(f.$$.fragment,B),B.forEach(g),O=S(w),I&&I.l(w),w.forEach(g),this.h()},h(){m(t,"class","product__img svelte-16lu9jb"),te(t.src,l=u[1].image)||m(t,"src",l),m(t,"alt","Nothing here"),m(o,"class","product__name svelte-16lu9jb"),m(i,"class","product__description svelte-16lu9jb"),m(r,"class","product__info svelte-16lu9jb"),m(e,"class","product svelte-16lu9jb")},m(E,w){T(E,e,w),h(e,t),h(e,n),h(e,r),h(r,a),h(a,o),h(o,c),h(a,_),h(a,i),h(i,k),h(r,d),W(f,r,null),h(e,O),I&&I.m(e,null),D=!0},p(E,[w]){(!D||w&2&&!te(t.src,l=E[1].image))&&m(t,"src",l),(!D||w&2)&&s!==(s=E[1].name+"")&&A(c,s),(!D||w&2)&&b!==(b=E[1].description+"")&&A(k,b);const B={};w&2&&(B.product=E[1]),!P&&w&1&&(P=!0,B.basket=E[0],X(()=>P=!1)),f.$set(B),E[2].edit?I||(I=se(),I.c(),I.m(e,null)):I&&(I.d(1),I=null)},i(E){D||(q(f.$$.fragment,E),D=!0)},o(E){L(f.$$.fragment,E),D=!1},d(E){E&&g(e),Z(f),I&&I.d()}}}function ve(u,e,t){let{product:l={id:0,name:"",description:"",price:0}}=e,{rules:n={edit:!1}}=e,{basket:r={}}=e;function a(o){r=o,t(0,r)}return u.$$set=o=>{"product"in o&&t(1,l=o.product),"rules"in o&&t(2,n=o.rules),"basket"in o&&t(0,r=o.basket)},[r,l,n,a]}class ye extends U{constructor(e){super(),z(this,e,ve,pe,J,{product:1,rules:2,basket:0})}}function le(u,e,t){const l=u.slice();return l[5]=e[t],l}function re(u,e){let t,l,n,r;function a(s){e[4](s)}let o={product:e[5],rules:e[3]};return e[0]!==void 0&&(o.basket=e[0]),l=new ye({props:o}),F.push(()=>H(l,"basket",a)),{key:u,first:null,c(){t=G(),Q(l.$$.fragment),this.h()},l(s){t=G(),R(l.$$.fragment,s),this.h()},h(){this.first=t},m(s,c){T(s,t,c),W(l,s,c),r=!0},p(s,c){e=s;const _={};c&4&&(_.product=e[5]),c&8&&(_.rules=e[3]),!n&&c&1&&(n=!0,_.basket=e[0],X(()=>n=!1)),l.$set(_)},i(s){r||(q(l.$$.fragment,s),r=!0)},o(s){L(l.$$.fragment,s),r=!1},d(s){s&&g(t),Z(l,s)}}}function Ee(u){let e,t,l,n=u[1].name+"",r,a,o,s=[],c=new Map,_,i,b=u[2];const k=d=>d[5].id;for(let d=0;d<b.length;d+=1){let f=le(u,b,d),P=k(f);c.set(P,s[d]=re(P,f))}return{c(){e=p("div"),t=p("div"),l=p("b"),r=V(n),a=N(),o=p("div");for(let d=0;d<s.length;d+=1)s[d].c();this.h()},l(d){e=v(d,"DIV",{class:!0,id:!0});var f=y(e);t=v(f,"DIV",{class:!0});var P=y(t);l=v(P,"B",{});var O=y(l);r=C(O,n),O.forEach(g),P.forEach(g),a=S(f),o=v(f,"DIV",{class:!0});var D=y(o);for(let j=0;j<s.length;j+=1)s[j].l(D);D.forEach(g),f.forEach(g),this.h()},h(){m(t,"class","product__group__category svelte-1o5fudi"),m(o,"class","product__group__produtcs svelte-1o5fudi"),m(e,"class","product__group svelte-1o5fudi"),m(e,"id",_=u[1].name)},m(d,f){T(d,e,f),h(e,t),h(t,l),h(l,r),h(e,a),h(e,o);for(let P=0;P<s.length;P+=1)s[P].m(o,null);i=!0},p(d,[f]){(!i||f&2)&&n!==(n=d[1].name+"")&&A(r,n),f&13&&(b=d[2],ce(),s=ue(s,f,k,1,d,b,c,o,ae,re,null,le),ie()),(!i||f&2&&_!==(_=d[1].name))&&m(e,"id",_)},i(d){if(!i){for(let f=0;f<b.length;f+=1)q(s[f]);i=!0}},o(d){for(let f=0;f<s.length;f+=1)L(s[f]);i=!1},d(d){d&&g(e);for(let f=0;f<s.length;f+=1)s[f].d()}}}function Pe(u,e,t){let{category:l={id:0,name:""}}=e,{products:n=[{id:0,title:"",body:""}]}=e,{basket:r={}}=e,{rules:a={edit:!1}}=e;function o(s){r=s,t(0,r)}return u.$$set=s=>{"category"in s&&t(1,l=s.category),"products"in s&&t(2,n=s.products),"basket"in s&&t(0,r=s.basket),"rules"in s&&t(3,a=s.rules)},[r,l,n,a,o]}class Ie extends U{constructor(e){super(),z(this,e,Pe,Ee,J,{category:1,products:2,basket:0,rules:3})}}function ne(u,e,t){const l=u.slice();return l[8]=e[t],l}function oe(u,e){let t,l,n,r;function a(...c){return e[5](e[8],...c)}function o(c){e[6](c)}let s={category:e[8],products:e[3].filter(a),rules:e[1]};return e[0]!==void 0&&(s.basket=e[0]),l=new Ie({props:s}),F.push(()=>H(l,"basket",o)),{key:u,first:null,c(){t=G(),Q(l.$$.fragment),this.h()},l(c){t=G(),R(l.$$.fragment,c),this.h()},h(){this.first=t},m(c,_){T(c,t,_),W(l,c,_),r=!0},p(c,_){e=c;const i={};_&4&&(i.category=e[8]),_&12&&(i.products=e[3].filter(a)),_&2&&(i.rules=e[1]),!n&&_&1&&(n=!0,i.basket=e[0],X(()=>n=!1)),l.$set(i)},i(c){r||(q(l.$$.fragment,c),r=!0)},o(c){L(l.$$.fragment,c),r=!1},d(c){c&&g(t),Z(l,c)}}}function we(u){let e,t=[],l=new Map,n,r=u[2];const a=o=>o[8].id;for(let o=0;o<r.length;o+=1){let s=ne(u,r,o),c=a(s);l.set(c,t[o]=oe(c,s))}return{c(){e=p("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=v(o,"DIV",{class:!0});var s=y(e);for(let c=0;c<t.length;c+=1)t[c].l(s);s.forEach(g),this.h()},h(){m(e,"class","products svelte-1bi10gg")},m(o,s){T(o,e,s);for(let c=0;c<t.length;c+=1)t[c].m(e,null);n=!0},p(o,[s]){s&15&&(r=o[2],ce(),t=ue(t,s,a,1,o,r,l,e,ae,oe,null,ne),ie())},i(o){if(!n){for(let s=0;s<r.length;s+=1)q(t[s]);n=!0}},o(o){for(let s=0;s<t.length;s+=1)L(t[s]);n=!1},d(o){o&&g(e);for(let s=0;s<t.length;s+=1)t[s].d()}}}function De(u,e,t){let{rules:l={edit:!1}}=e,{basket:n={}}=e,{categories:r=[]}=e,{products:a=[]}=e,{currentCategory:o={id:0,name:""}}=e;de(async()=>{document.querySelectorAll(".product__group").forEach(b=>{b.addEventListener("click",function(k){},!1)}),window.addEventListener("scroll",b=>{s()})});function s(i){let b=document.querySelectorAll(".product__group");for(let k=0;k<b.length;k++){let d=b[k];if(t(4,o=r[k]),window.pageYOffset<d.offsetTop)break}}const c=(i,b)=>b.category_id==i.id;function _(i){n=i,t(0,n)}return u.$$set=i=>{"rules"in i&&t(1,l=i.rules),"basket"in i&&t(0,n=i.basket),"categories"in i&&t(2,r=i.categories),"products"in i&&t(3,a=i.products),"currentCategory"in i&&t(4,o=i.currentCategory)},[n,l,r,a,o,c,_]}class Te extends U{constructor(e){super(),z(this,e,De,we,J,{rules:1,basket:0,categories:2,products:3,currentCategory:4})}}export{Te as P};
