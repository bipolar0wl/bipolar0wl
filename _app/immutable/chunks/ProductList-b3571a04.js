import{S as O,i as A,s as G,k,l as v,m as y,h as g,n as b,b as T,B as Z,q as B,a as V,r as D,c as N,G as h,I as U,u as S,O as ue,K as z,L as J,w as K,x as F,P as x,y as H,M as Q,f as q,t as L,z as R,g as re,J as ne,N as ce,d as oe,e as M,o as ie}from"./index-b4b8f34e.js";function fe(u){let e,t,l,n,r,i,c,s,o,a,_;return{c(){e=k("div"),t=k("button"),l=B("-"),n=V(),r=k("span"),i=B(u[1]),c=V(),s=k("button"),o=B("+"),this.h()},l(m){e=v(m,"DIV",{class:!0});var d=y(e);t=v(d,"BUTTON",{class:!0});var f=y(t);l=D(f,"-"),f.forEach(g),n=N(d),r=v(d,"SPAN",{class:!0});var E=y(r);i=D(E,u[1]),E.forEach(g),c=N(d),s=v(d,"BUTTON",{class:!0});var j=y(s);o=D(j,"+"),j.forEach(g),d.forEach(g),this.h()},h(){b(t,"class","decrement svelte-180mjcx"),b(r,"class","count svelte-180mjcx"),b(s,"class","increment svelte-180mjcx"),b(e,"class","counter-edit svelte-180mjcx")},m(m,d){T(m,e,d),h(e,t),h(t,l),h(e,n),h(e,r),h(r,i),h(e,c),h(e,s),h(s,o),a||(_=[U(t,"click",u[3]),U(s,"click",u[2])],a=!0)},p(m,d){d&2&&S(i,m[1])},d(m){m&&g(e),a=!1,ue(_)}}}function de(u){let e,t,l,n=u[0].price+"",r,i,c,s;return{c(){e=k("div"),t=k("button"),l=k("span"),r=B(n),i=B(" \u20BD"),this.h()},l(o){e=v(o,"DIV",{class:!0});var a=y(e);t=v(a,"BUTTON",{class:!0});var _=y(t);l=v(_,"SPAN",{class:!0});var m=y(l);r=D(m,n),i=D(m," \u20BD"),m.forEach(g),_.forEach(g),a.forEach(g),this.h()},h(){b(l,"class","svelte-180mjcx"),b(t,"class","add-button svelte-180mjcx"),b(e,"class","counter-new svelte-180mjcx")},m(o,a){T(o,e,a),h(e,t),h(t,l),h(l,r),h(l,i),c||(s=U(t,"click",u[2]),c=!0)},p(o,a){a&1&&n!==(n=o[0].price+"")&&S(r,n)},d(o){o&&g(e),c=!1,s()}}}function _e(u){let e;function t(r,i){return r[1]==0?de:fe}let l=t(u),n=l(u);return{c(){e=k("div"),n.c(),this.h()},l(r){e=v(r,"DIV",{class:!0});var i=y(e);n.l(i),i.forEach(g),this.h()},h(){b(e,"class","counter svelte-180mjcx")},m(r,i){T(r,e,i),n.m(e,null)},p(r,[i]){l===(l=t(r))&&n?n.p(r,i):(n.d(1),n=l(r),n&&(n.c(),n.m(e,null)))},i:Z,o:Z,d(r){r&&g(e),n.d()}}}function he(u,e,t){let{product:l={id:0,name:"",description:"",price:0}}=e,{basket:n={}}=e,r=0;const i=()=>{t(1,r+=1),t(4,n[l.id]=r,n)},c=()=>{t(1,r-=1),n[l.id]&&r<=0?(delete n[l.id],t(4,n)):t(4,n[l.id]=r,n)};return u.$$set=s=>{"product"in s&&t(0,l=s.product),"basket"in s&&t(4,n=s.basket)},[l,r,i,c,n]}class ge extends O{constructor(e){super(),A(this,e,he,_e,G,{product:0,basket:4})}}function $(u){let e,t;return{c(){e=k("button"),t=B("\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C")},l(l){e=v(l,"BUTTON",{});var n=y(e);t=D(n,"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C"),n.forEach(g)},m(l,n){T(l,e,n),h(e,t)},d(l){l&&g(e)}}}function me(u){let e,t,l,n,r,i,c=u[1].name+"",s,o,a,_=u[1].description+"",m,d,f,E,j,w;function ae(p){u[4](p)}let W={product:u[1]};u[0]!==void 0&&(W.basket=u[0]),f=new ge({props:W}),z.push(()=>J(f,"basket",ae));let P=u[2].edit&&$();return{c(){e=k("div"),t=k("img"),n=V(),r=k("div"),i=k("p"),s=B(c),o=V(),a=k("p"),m=B(_),d=V(),K(f.$$.fragment),j=V(),P&&P.c(),this.h()},l(p){e=v(p,"DIV",{class:!0});var I=y(e);t=v(I,"IMG",{class:!0,src:!0,alt:!0}),n=N(I),r=v(I,"DIV",{class:!0});var C=y(r);i=v(C,"P",{class:!0});var X=y(i);s=D(X,c),X.forEach(g),o=N(C),a=v(C,"P",{class:!0});var Y=y(a);m=D(Y,_),Y.forEach(g),d=N(C),F(f.$$.fragment,C),C.forEach(g),j=N(I),P&&P.l(I),I.forEach(g),this.h()},h(){b(t,"class","product__img svelte-lusbox"),x(t.src,l=u[3][u[1].id%4])||b(t,"src",l),b(t,"alt","https://random.imagecdn.app/120/120"),b(i,"class","product__name svelte-lusbox"),b(a,"class","product__description svelte-lusbox"),b(r,"class","product__info svelte-lusbox"),b(e,"class","product svelte-lusbox")},m(p,I){T(p,e,I),h(e,t),h(e,n),h(e,r),h(r,i),h(i,s),h(r,o),h(r,a),h(a,m),h(r,d),H(f,r,null),h(e,j),P&&P.m(e,null),w=!0},p(p,[I]){(!w||I&2&&!x(t.src,l=p[3][p[1].id%4]))&&b(t,"src",l),(!w||I&2)&&c!==(c=p[1].name+"")&&S(s,c),(!w||I&2)&&_!==(_=p[1].description+"")&&S(m,_);const C={};I&2&&(C.product=p[1]),!E&&I&1&&(E=!0,C.basket=p[0],Q(()=>E=!1)),f.$set(C),p[2].edit?P||(P=$(),P.c(),P.m(e,null)):P&&(P.d(1),P=null)},i(p){w||(q(f.$$.fragment,p),w=!0)},o(p){L(f.$$.fragment,p),w=!1},d(p){p&&g(e),R(f),P&&P.d()}}}function be(u,e,t){let{product:l={id:0,name:"",description:"",price:0}}=e,{rules:n={edit:!1}}=e,{basket:r={}}=e,i=["/src/data/images/dress.png","/src/data/images/hood.png","/src/data/images/tie.png","/src/data/images/shoe.png"];function c(s){r=s,t(0,r)}return u.$$set=s=>{"product"in s&&t(1,l=s.product),"rules"in s&&t(2,n=s.rules),"basket"in s&&t(0,r=s.basket)},[r,l,n,i,c]}class pe extends O{constructor(e){super(),A(this,e,be,me,G,{product:1,rules:2,basket:0})}}function ee(u,e,t){const l=u.slice();return l[5]=e[t],l}function te(u,e){let t,l,n,r;function i(s){e[4](s)}let c={product:e[5],rules:e[3]};return e[0]!==void 0&&(c.basket=e[0]),l=new pe({props:c}),z.push(()=>J(l,"basket",i)),{key:u,first:null,c(){t=M(),K(l.$$.fragment),this.h()},l(s){t=M(),F(l.$$.fragment,s),this.h()},h(){this.first=t},m(s,o){T(s,t,o),H(l,s,o),r=!0},p(s,o){e=s;const a={};o&4&&(a.product=e[5]),o&8&&(a.rules=e[3]),!n&&o&1&&(n=!0,a.basket=e[0],Q(()=>n=!1)),l.$set(a)},i(s){r||(q(l.$$.fragment,s),r=!0)},o(s){L(l.$$.fragment,s),r=!1},d(s){s&&g(t),R(l,s)}}}function ke(u){let e,t,l,n=u[1].name+"",r,i,c=[],s=new Map,o,a,_=u[2];const m=d=>d[5].id;for(let d=0;d<_.length;d+=1){let f=ee(u,_,d),E=m(f);s.set(E,c[d]=te(E,f))}return{c(){e=k("div"),t=k("div"),l=k("b"),r=B(n),i=V();for(let d=0;d<c.length;d+=1)c[d].c();this.h()},l(d){e=v(d,"DIV",{class:!0,id:!0});var f=y(e);t=v(f,"DIV",{class:!0});var E=y(t);l=v(E,"B",{});var j=y(l);r=D(j,n),j.forEach(g),E.forEach(g),i=N(f);for(let w=0;w<c.length;w+=1)c[w].l(f);f.forEach(g),this.h()},h(){b(t,"class","product__group__category svelte-1siy40s"),b(e,"class","product__group svelte-1siy40s"),b(e,"id",o=u[1].name)},m(d,f){T(d,e,f),h(e,t),h(t,l),h(l,r),h(e,i);for(let E=0;E<c.length;E+=1)c[E].m(e,null);a=!0},p(d,[f]){(!a||f&2)&&n!==(n=d[1].name+"")&&S(r,n),f&13&&(_=d[2],re(),c=ne(c,f,m,1,d,_,s,e,ce,te,null,ee),oe()),(!a||f&2&&o!==(o=d[1].name))&&b(e,"id",o)},i(d){if(!a){for(let f=0;f<_.length;f+=1)q(c[f]);a=!0}},o(d){for(let f=0;f<c.length;f+=1)L(c[f]);a=!1},d(d){d&&g(e);for(let f=0;f<c.length;f+=1)c[f].d()}}}function ve(u,e,t){let{category:l={id:0,name:""}}=e,{products:n=[{id:0,title:"",body:""}]}=e,{basket:r={}}=e,{rules:i={edit:!1}}=e;function c(s){r=s,t(0,r)}return u.$$set=s=>{"category"in s&&t(1,l=s.category),"products"in s&&t(2,n=s.products),"basket"in s&&t(0,r=s.basket),"rules"in s&&t(3,i=s.rules)},[r,l,n,i,c]}class ye extends O{constructor(e){super(),A(this,e,ve,ke,G,{category:1,products:2,basket:0,rules:3})}}function se(u,e,t){const l=u.slice();return l[7]=e[t],l}function le(u,e){let t,l,n,r;function i(...o){return e[5](e[7],...o)}function c(o){e[6](o)}let s={category:e[7],products:e[3].filter(i),rules:e[1]};return e[0]!==void 0&&(s.basket=e[0]),l=new ye({props:s}),z.push(()=>J(l,"basket",c)),{key:u,first:null,c(){t=M(),K(l.$$.fragment),this.h()},l(o){t=M(),F(l.$$.fragment,o),this.h()},h(){this.first=t},m(o,a){T(o,t,a),H(l,o,a),r=!0},p(o,a){e=o;const _={};a&4&&(_.category=e[7]),a&12&&(_.products=e[3].filter(i)),a&2&&(_.rules=e[1]),!n&&a&1&&(n=!0,_.basket=e[0],Q(()=>n=!1)),l.$set(_)},i(o){r||(q(l.$$.fragment,o),r=!0)},o(o){L(l.$$.fragment,o),r=!1},d(o){o&&g(t),R(l,o)}}}function Ee(u){let e,t=[],l=new Map,n,r=u[2];const i=c=>c[7].id;for(let c=0;c<r.length;c+=1){let s=se(u,r,c),o=i(s);l.set(o,t[c]=le(o,s))}return{c(){e=k("div");for(let c=0;c<t.length;c+=1)t[c].c();this.h()},l(c){e=v(c,"DIV",{class:!0});var s=y(e);for(let o=0;o<t.length;o+=1)t[o].l(s);s.forEach(g),this.h()},h(){b(e,"class","products svelte-2t318u")},m(c,s){T(c,e,s);for(let o=0;o<t.length;o+=1)t[o].m(e,null);n=!0},p(c,[s]){s&15&&(r=c[2],re(),t=ne(t,s,i,1,c,r,l,e,ce,le,null,se),oe())},i(c){if(!n){for(let s=0;s<r.length;s+=1)q(t[s]);n=!0}},o(c){for(let s=0;s<t.length;s+=1)L(t[s]);n=!1},d(c){c&&g(e);for(let s=0;s<t.length;s+=1)t[s].d()}}}function Pe(u,e,t){let{rules:l={edit:!1}}=e,{basket:n={}}=e,{categories:r={0:{id:0,name:""}}}=e,{products:i=[]}=e,{currentCategory:c={0:{id:0,name:""}}}=e;ie(async()=>{document.querySelectorAll(".product__group").forEach(_=>{console.log(_),_.addEventListener("click",function(m){console.log(m)},!1)}),window.addEventListener("scroll",function(){document.querySelectorAll(".product__group")[1]})});const s=(a,_)=>_.category_id==a.id;function o(a){n=a,t(0,n)}return u.$$set=a=>{"rules"in a&&t(1,l=a.rules),"basket"in a&&t(0,n=a.basket),"categories"in a&&t(2,r=a.categories),"products"in a&&t(3,i=a.products),"currentCategory"in a&&t(4,c=a.currentCategory)},[n,l,r,i,c,s,o]}class we extends O{constructor(e){super(),A(this,e,Pe,Ee,G,{rules:1,basket:0,categories:2,products:3,currentCategory:4})}}export{we as P};
