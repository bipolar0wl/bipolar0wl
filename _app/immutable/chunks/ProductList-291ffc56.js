import{S as A,i as G,s as U,k as p,l as v,m as E,h as g,n as m,b as T,B as J,q as C,a as V,r as D,c as B,G as h,I as K,u as L,O as ae,L as Y,M as F,w as H,x as Q,P as $,y as R,N as W,f as S,t as O,z as X,g as ne,J as ce,K as oe,d as ue,e as M,o as ie}from"./index-24e95d3e.js";import{b as fe}from"./store-a10cd813.js";function de(u){let e,t,l,n,r,a,c,s,o,d,i;return{c(){e=p("div"),t=p("button"),l=C("-"),n=V(),r=p("span"),a=C(u[0]),c=V(),s=p("button"),o=C("+"),this.h()},l(b){e=v(b,"DIV",{class:!0});var k=E(e);t=v(k,"BUTTON",{class:!0});var f=E(t);l=D(f,"-"),f.forEach(g),n=B(k),r=v(k,"SPAN",{class:!0});var _=E(r);a=D(_,u[0]),_.forEach(g),c=B(k),s=v(k,"BUTTON",{class:!0});var P=E(s);o=D(P,"+"),P.forEach(g),k.forEach(g),this.h()},h(){m(t,"class","decrement svelte-j5xe9z"),m(r,"class","count svelte-j5xe9z"),m(s,"class","increment svelte-j5xe9z"),m(e,"class","counter-edit svelte-j5xe9z")},m(b,k){T(b,e,k),h(e,t),h(t,l),h(e,n),h(e,r),h(r,a),h(e,c),h(e,s),h(s,o),d||(i=[K(t,"click",u[2]),K(s,"click",u[1])],d=!0)},p(b,k){k&1&&L(a,b[0])},d(b){b&&g(e),d=!1,ae(i)}}}function _e(u){let e,t,l,n,r,a,c;return{c(){e=p("div"),t=p("button"),l=p("span"),n=C(u[3]),r=C(" \u20BD"),this.h()},l(s){e=v(s,"DIV",{class:!0});var o=E(e);t=v(o,"BUTTON",{class:!0});var d=E(t);l=v(d,"SPAN",{class:!0});var i=E(l);n=D(i,u[3]),r=D(i," \u20BD"),i.forEach(g),d.forEach(g),o.forEach(g),this.h()},h(){m(l,"class","svelte-j5xe9z"),m(t,"class","add-button svelte-j5xe9z"),m(e,"class","counter-new svelte-j5xe9z")},m(s,o){T(s,e,o),h(e,t),h(t,l),h(l,n),h(l,r),a||(c=K(t,"click",u[1]),a=!0)},p:J,d(s){s&&g(e),a=!1,c()}}}function he(u){let e;function t(r,a){return r[0]==0?_e:de}let l=t(u),n=l(u);return{c(){e=p("div"),n.c(),this.h()},l(r){e=v(r,"DIV",{class:!0});var a=E(e);n.l(a),a.forEach(g),this.h()},h(){m(e,"class","counter svelte-j5xe9z")},m(r,a){T(r,e,a),n.m(e,null)},p(r,[a]){l===(l=t(r))&&n?n.p(r,a):(n.d(1),n=l(r),n&&(n.c(),n.m(e,null)))},i:J,o:J,d(r){r&&g(e),n.d()}}}function ge(u,e,t){let{product:l={id:0,name:"",description:"",price:0}}=e,{basket:n={}}=e;fe.subscribe(o=>{t(4,n=o)});let r=n[l.id]||0;const a=()=>{t(0,r+=1),t(4,n[l.id]=r,n)},c=()=>{t(0,r-=1),n[l.id]&&r<=0?(delete n[l.id],t(4,n)):t(4,n[l.id]=r,n)};let s=l.price.toString();return u.$$set=o=>{"product"in o&&t(5,l=o.product),"basket"in o&&t(4,n=o.basket)},[r,a,c,s,n,l]}class be extends A{constructor(e){super(),G(this,e,ge,he,U,{product:5,basket:4})}}function ee(u){let e,t;return{c(){e=p("button"),t=C("\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C")},l(l){e=v(l,"BUTTON",{});var n=E(e);t=D(n,"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C"),n.forEach(g)},m(l,n){T(l,e,n),h(e,t)},d(l){l&&g(e)}}}function ke(u){let e,t,l,n,r,a,c=u[1].name+"",s,o,d,i=u[1].description+"",b,k,f,_,P,I;function q(y){u[3](y)}let N={product:u[1]};u[0]!==void 0&&(N.basket=u[0]),f=new be({props:N}),Y.push(()=>F(f,"basket",q));let j=u[2].edit&&ee();return{c(){e=p("div"),t=p("img"),n=V(),r=p("div"),a=p("p"),s=C(c),o=V(),d=p("p"),b=C(i),k=V(),H(f.$$.fragment),P=V(),j&&j.c(),this.h()},l(y){e=v(y,"DIV",{class:!0});var w=E(e);t=v(w,"IMG",{class:!0,src:!0,alt:!0}),n=B(w),r=v(w,"DIV",{class:!0});var z=E(r);a=v(z,"P",{class:!0});var Z=E(a);s=D(Z,c),Z.forEach(g),o=B(z),d=v(z,"P",{class:!0});var x=E(d);b=D(x,i),x.forEach(g),k=B(z),Q(f.$$.fragment,z),z.forEach(g),P=B(w),j&&j.l(w),w.forEach(g),this.h()},h(){m(t,"class","product__img svelte-10skn8t"),$(t.src,l=u[1].image)||m(t,"src",l),m(t,"alt","Nothing here"),m(a,"class","product__name svelte-10skn8t"),m(d,"class","product__description svelte-10skn8t"),m(r,"class","product__info svelte-10skn8t"),m(e,"class","product svelte-10skn8t")},m(y,w){T(y,e,w),h(e,t),h(e,n),h(e,r),h(r,a),h(a,s),h(r,o),h(r,d),h(d,b),h(r,k),R(f,r,null),h(e,P),j&&j.m(e,null),I=!0},p(y,[w]){(!I||w&2&&!$(t.src,l=y[1].image))&&m(t,"src",l),(!I||w&2)&&c!==(c=y[1].name+"")&&L(s,c),(!I||w&2)&&i!==(i=y[1].description+"")&&L(b,i);const z={};w&2&&(z.product=y[1]),!_&&w&1&&(_=!0,z.basket=y[0],W(()=>_=!1)),f.$set(z),y[2].edit?j||(j=ee(),j.c(),j.m(e,null)):j&&(j.d(1),j=null)},i(y){I||(S(f.$$.fragment,y),I=!0)},o(y){O(f.$$.fragment,y),I=!1},d(y){y&&g(e),X(f),j&&j.d()}}}function me(u,e,t){let{product:l={id:0,name:"",description:"",price:0}}=e,{rules:n={edit:!1}}=e,{basket:r={}}=e;function a(c){r=c,t(0,r)}return u.$$set=c=>{"product"in c&&t(1,l=c.product),"rules"in c&&t(2,n=c.rules),"basket"in c&&t(0,r=c.basket)},[r,l,n,a]}class pe extends A{constructor(e){super(),G(this,e,me,ke,U,{product:1,rules:2,basket:0})}}function te(u,e,t){const l=u.slice();return l[5]=e[t],l}function se(u,e){let t,l,n,r;function a(s){e[4](s)}let c={product:e[5],rules:e[3]};return e[0]!==void 0&&(c.basket=e[0]),l=new pe({props:c}),Y.push(()=>F(l,"basket",a)),{key:u,first:null,c(){t=M(),H(l.$$.fragment),this.h()},l(s){t=M(),Q(l.$$.fragment,s),this.h()},h(){this.first=t},m(s,o){T(s,t,o),R(l,s,o),r=!0},p(s,o){e=s;const d={};o&4&&(d.product=e[5]),o&8&&(d.rules=e[3]),!n&&o&1&&(n=!0,d.basket=e[0],W(()=>n=!1)),l.$set(d)},i(s){r||(S(l.$$.fragment,s),r=!0)},o(s){O(l.$$.fragment,s),r=!1},d(s){s&&g(t),X(l,s)}}}function ve(u){let e,t,l,n=u[1].name+"",r,a,c,s=[],o=new Map,d,i,b=u[2];const k=f=>f[5].id;for(let f=0;f<b.length;f+=1){let _=te(u,b,f),P=k(_);o.set(P,s[f]=se(P,_))}return{c(){e=p("div"),t=p("div"),l=p("b"),r=C(n),a=V(),c=p("div");for(let f=0;f<s.length;f+=1)s[f].c();this.h()},l(f){e=v(f,"DIV",{class:!0,id:!0});var _=E(e);t=v(_,"DIV",{class:!0});var P=E(t);l=v(P,"B",{});var I=E(l);r=D(I,n),I.forEach(g),P.forEach(g),a=B(_),c=v(_,"DIV",{class:!0});var q=E(c);for(let N=0;N<s.length;N+=1)s[N].l(q);q.forEach(g),_.forEach(g),this.h()},h(){m(t,"class","product__group__category svelte-10uji5k"),m(c,"class","product__group__produtcs svelte-10uji5k"),m(e,"class","product__group svelte-10uji5k"),m(e,"id",d=u[1].name)},m(f,_){T(f,e,_),h(e,t),h(t,l),h(l,r),h(e,a),h(e,c);for(let P=0;P<s.length;P+=1)s[P].m(c,null);i=!0},p(f,[_]){(!i||_&2)&&n!==(n=f[1].name+"")&&L(r,n),_&13&&(b=f[2],ne(),s=ce(s,_,k,1,f,b,o,c,oe,se,null,te),ue()),(!i||_&2&&d!==(d=f[1].name))&&m(e,"id",d)},i(f){if(!i){for(let _=0;_<b.length;_+=1)S(s[_]);i=!0}},o(f){for(let _=0;_<s.length;_+=1)O(s[_]);i=!1},d(f){f&&g(e);for(let _=0;_<s.length;_+=1)s[_].d()}}}function ye(u,e,t){let{category:l={id:0,name:""}}=e,{products:n=[{id:0,title:"",body:""}]}=e,{basket:r={}}=e,{rules:a={edit:!1}}=e;function c(s){r=s,t(0,r)}return u.$$set=s=>{"category"in s&&t(1,l=s.category),"products"in s&&t(2,n=s.products),"basket"in s&&t(0,r=s.basket),"rules"in s&&t(3,a=s.rules)},[r,l,n,a,c]}class Ee extends A{constructor(e){super(),G(this,e,ye,ve,U,{category:1,products:2,basket:0,rules:3})}}function le(u,e,t){const l=u.slice();return l[8]=e[t],l}function re(u,e){let t,l,n,r;function a(...o){return e[5](e[8],...o)}function c(o){e[6](o)}let s={category:e[8],products:e[3].filter(a),rules:e[1]};return e[0]!==void 0&&(s.basket=e[0]),l=new Ee({props:s}),Y.push(()=>F(l,"basket",c)),{key:u,first:null,c(){t=M(),H(l.$$.fragment),this.h()},l(o){t=M(),Q(l.$$.fragment,o),this.h()},h(){this.first=t},m(o,d){T(o,t,d),R(l,o,d),r=!0},p(o,d){e=o;const i={};d&4&&(i.category=e[8]),d&12&&(i.products=e[3].filter(a)),d&2&&(i.rules=e[1]),!n&&d&1&&(n=!0,i.basket=e[0],W(()=>n=!1)),l.$set(i)},i(o){r||(S(l.$$.fragment,o),r=!0)},o(o){O(l.$$.fragment,o),r=!1},d(o){o&&g(t),X(l,o)}}}function Pe(u){let e,t=[],l=new Map,n,r=u[2];const a=c=>c[8].id;for(let c=0;c<r.length;c+=1){let s=le(u,r,c),o=a(s);l.set(o,t[c]=re(o,s))}return{c(){e=p("div");for(let c=0;c<t.length;c+=1)t[c].c();this.h()},l(c){e=v(c,"DIV",{class:!0});var s=E(e);for(let o=0;o<t.length;o+=1)t[o].l(s);s.forEach(g),this.h()},h(){m(e,"class","products svelte-1bi10gg")},m(c,s){T(c,e,s);for(let o=0;o<t.length;o+=1)t[o].m(e,null);n=!0},p(c,[s]){s&15&&(r=c[2],ne(),t=ce(t,s,a,1,c,r,l,e,oe,re,null,le),ue())},i(c){if(!n){for(let s=0;s<r.length;s+=1)S(t[s]);n=!0}},o(c){for(let s=0;s<t.length;s+=1)O(t[s]);n=!1},d(c){c&&g(e);for(let s=0;s<t.length;s+=1)t[s].d()}}}function je(u,e,t){let{rules:l={edit:!1}}=e,{basket:n={}}=e,{categories:r=[]}=e,{products:a=[]}=e,{currentCategory:c={id:0,name:""}}=e;ie(async()=>{document.querySelectorAll(".product__group").forEach(b=>{b.addEventListener("click",function(k){},!1)}),window.addEventListener("scroll",b=>{s()})});function s(i){let b=document.querySelectorAll(".product__group");for(let k=0;k<b.length;k++){let f=b[k];if(t(4,c=r[k]),window.pageYOffset<f.offsetTop)break}}const o=(i,b)=>b.category_id==i.id;function d(i){n=i,t(0,n)}return u.$$set=i=>{"rules"in i&&t(1,l=i.rules),"basket"in i&&t(0,n=i.basket),"categories"in i&&t(2,r=i.categories),"products"in i&&t(3,a=i.products),"currentCategory"in i&&t(4,c=i.currentCategory)},[n,l,r,a,c,o,d]}class ze extends A{constructor(e){super(),G(this,e,je,Pe,U,{rules:1,basket:0,categories:2,products:3,currentCategory:4})}}export{ze as P};
