import{S as U,i as z,s as J,k,l as v,m as y,h as g,n as p,b as T,B as K,q as V,a as N,r as C,c as S,G as h,I as Y,u as A,O as fe,L as F,M as H,w as Q,x as R,P as te,y as W,N as X,f as q,t as L,z as Z,g as ce,J as ue,K as ae,d as ie,e as G,o as de}from"./index-24e95d3e.js";import{b as _e}from"./store-a10cd813.js";function he(u){let e,t,r,n,l,a,o,s,c,_,i;return{c(){e=k("div"),t=k("button"),r=V("-"),n=N(),l=k("span"),a=V(u[0]),o=N(),s=k("button"),c=V("+"),this.h()},l(b){e=v(b,"DIV",{class:!0});var m=y(e);t=v(m,"BUTTON",{class:!0});var d=y(t);r=C(d,"-"),d.forEach(g),n=S(m),l=v(m,"SPAN",{class:!0});var f=y(l);a=C(f,u[0]),f.forEach(g),o=S(m),s=v(m,"BUTTON",{class:!0});var w=y(s);c=C(w,"+"),w.forEach(g),m.forEach(g),this.h()},h(){p(t,"class","decrement svelte-19dw3re"),p(l,"class","count svelte-19dw3re"),p(s,"class","increment svelte-19dw3re"),p(e,"class","counter-edit svelte-19dw3re")},m(b,m){T(b,e,m),h(e,t),h(t,r),h(e,n),h(e,l),h(l,a),h(e,o),h(e,s),h(s,c),_||(i=[Y(t,"click",u[2]),Y(s,"click",u[1])],_=!0)},p(b,m){m&1&&A(a,b[0])},d(b){b&&g(e),_=!1,fe(i)}}}function ge(u){let e,t,r,n,l,a,o;return{c(){e=k("div"),t=k("button"),r=k("span"),n=V(u[3]),l=V(" \u20BD"),this.h()},l(s){e=v(s,"DIV",{class:!0});var c=y(e);t=v(c,"BUTTON",{class:!0});var _=y(t);r=v(_,"SPAN",{class:!0});var i=y(r);n=C(i,u[3]),l=C(i," \u20BD"),i.forEach(g),_.forEach(g),c.forEach(g),this.h()},h(){p(r,"class","svelte-19dw3re"),p(t,"class","add-button svelte-19dw3re"),p(e,"class","counter-new svelte-19dw3re")},m(s,c){T(s,e,c),h(e,t),h(t,r),h(r,n),h(r,l),a||(o=Y(t,"click",u[1]),a=!0)},p:K,d(s){s&&g(e),a=!1,o()}}}function be(u){let e;function t(l,a){return l[0]==0?ge:he}let r=t(u),n=r(u);return{c(){e=k("div"),n.c(),this.h()},l(l){e=v(l,"DIV",{class:!0});var a=y(e);n.l(a),a.forEach(g),this.h()},h(){p(e,"class","counter svelte-19dw3re")},m(l,a){T(l,e,a),n.m(e,null)},p(l,[a]){r===(r=t(l))&&n?n.p(l,a):(n.d(1),n=r(l),n&&(n.c(),n.m(e,null)))},i:K,o:K,d(l){l&&g(e),n.d()}}}function me(u,e,t){let{product:r={id:0,name:"",description:"",price:0}}=e,{basket:n={}}=e;_e.subscribe(c=>{t(4,n=c)});let l=n[r.id]||0;const a=()=>{t(0,l+=1),t(4,n[r.id]=l,n)},o=()=>{t(0,l-=1),n[r.id]&&l<=0?(delete n[r.id],t(4,n)):t(4,n[r.id]=l,n)};let s=r.price.toString();return u.$$set=c=>{"product"in c&&t(5,r=c.product),"basket"in c&&t(4,n=c.basket)},[l,a,o,s,n,r]}class pe extends U{constructor(e){super(),z(this,e,me,be,J,{product:5,basket:4})}}function se(u){let e,t;return{c(){e=k("button"),t=V("\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C")},l(r){e=v(r,"BUTTON",{});var n=y(e);t=C(n,"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C"),n.forEach(g)},m(r,n){T(r,e,n),h(e,t)},d(r){r&&g(e)}}}function ke(u){let e,t,r,n,l,a,o,s=u[1].name+"",c,_,i,b=u[1].description+"",m,d,f,w,O,D;function j(E){u[3](E)}let x={product:u[1]};u[0]!==void 0&&(x.basket=u[0]),f=new pe({props:x}),F.push(()=>H(f,"basket",j));let P=u[2].edit&&se();return{c(){e=k("div"),t=k("img"),n=N(),l=k("div"),a=k("div"),o=k("p"),c=V(s),_=N(),i=k("p"),m=V(b),d=N(),Q(f.$$.fragment),O=N(),P&&P.c(),this.h()},l(E){e=v(E,"DIV",{class:!0});var I=y(e);t=v(I,"IMG",{class:!0,src:!0,alt:!0}),n=S(I),l=v(I,"DIV",{class:!0});var B=y(l);a=v(B,"DIV",{});var M=y(a);o=v(M,"P",{class:!0});var $=y(o);c=C($,s),$.forEach(g),_=S(M),i=v(M,"P",{class:!0});var ee=y(i);m=C(ee,b),ee.forEach(g),M.forEach(g),d=S(B),R(f.$$.fragment,B),B.forEach(g),O=S(I),P&&P.l(I),I.forEach(g),this.h()},h(){p(t,"class","product__img svelte-16lu9jb"),te(t.src,r=u[1].image)||p(t,"src",r),p(t,"alt","Nothing here"),p(o,"class","product__name svelte-16lu9jb"),p(i,"class","product__description svelte-16lu9jb"),p(l,"class","product__info svelte-16lu9jb"),p(e,"class","product svelte-16lu9jb")},m(E,I){T(E,e,I),h(e,t),h(e,n),h(e,l),h(l,a),h(a,o),h(o,c),h(a,_),h(a,i),h(i,m),h(l,d),W(f,l,null),h(e,O),P&&P.m(e,null),D=!0},p(E,[I]){(!D||I&2&&!te(t.src,r=E[1].image))&&p(t,"src",r),(!D||I&2)&&s!==(s=E[1].name+"")&&A(c,s),(!D||I&2)&&b!==(b=E[1].description+"")&&A(m,b);const B={};I&2&&(B.product=E[1]),!w&&I&1&&(w=!0,B.basket=E[0],X(()=>w=!1)),f.$set(B),E[2].edit?P||(P=se(),P.c(),P.m(e,null)):P&&(P.d(1),P=null)},i(E){D||(q(f.$$.fragment,E),D=!0)},o(E){L(f.$$.fragment,E),D=!1},d(E){E&&g(e),Z(f),P&&P.d()}}}function ve(u,e,t){let{product:r={id:0,name:"",description:"",price:0}}=e,{rules:n={edit:!1}}=e,{basket:l={}}=e;function a(o){l=o,t(0,l)}return u.$$set=o=>{"product"in o&&t(1,r=o.product),"rules"in o&&t(2,n=o.rules),"basket"in o&&t(0,l=o.basket)},[l,r,n,a]}class ye extends U{constructor(e){super(),z(this,e,ve,ke,J,{product:1,rules:2,basket:0})}}function re(u,e,t){const r=u.slice();return r[5]=e[t],r}function le(u,e){let t,r,n,l;function a(s){e[4](s)}let o={product:e[5],rules:e[3]};return e[0]!==void 0&&(o.basket=e[0]),r=new ye({props:o}),F.push(()=>H(r,"basket",a)),{key:u,first:null,c(){t=G(),Q(r.$$.fragment),this.h()},l(s){t=G(),R(r.$$.fragment,s),this.h()},h(){this.first=t},m(s,c){T(s,t,c),W(r,s,c),l=!0},p(s,c){e=s;const _={};c&4&&(_.product=e[5]),c&8&&(_.rules=e[3]),!n&&c&1&&(n=!0,_.basket=e[0],X(()=>n=!1)),r.$set(_)},i(s){l||(q(r.$$.fragment,s),l=!0)},o(s){L(r.$$.fragment,s),l=!1},d(s){s&&g(t),Z(r,s)}}}function Ee(u){let e,t,r,n=u[1].name+"",l,a,o,s=[],c=new Map,_,i,b=u[2];const m=d=>d[5].id;for(let d=0;d<b.length;d+=1){let f=re(u,b,d),w=m(f);c.set(w,s[d]=le(w,f))}return{c(){e=k("div"),t=k("div"),r=k("b"),l=V(n),a=N(),o=k("div");for(let d=0;d<s.length;d+=1)s[d].c();this.h()},l(d){e=v(d,"DIV",{class:!0,id:!0});var f=y(e);t=v(f,"DIV",{class:!0});var w=y(t);r=v(w,"B",{});var O=y(r);l=C(O,n),O.forEach(g),w.forEach(g),a=S(f),o=v(f,"DIV",{class:!0});var D=y(o);for(let j=0;j<s.length;j+=1)s[j].l(D);D.forEach(g),f.forEach(g),this.h()},h(){p(t,"class","product__group__category svelte-1o5fudi"),p(o,"class","product__group__produtcs svelte-1o5fudi"),p(e,"class","product__group svelte-1o5fudi"),p(e,"id",_=u[1].name)},m(d,f){T(d,e,f),h(e,t),h(t,r),h(r,l),h(e,a),h(e,o);for(let w=0;w<s.length;w+=1)s[w].m(o,null);i=!0},p(d,[f]){(!i||f&2)&&n!==(n=d[1].name+"")&&A(l,n),f&13&&(b=d[2],ce(),s=ue(s,f,m,1,d,b,c,o,ae,le,null,re),ie()),(!i||f&2&&_!==(_=d[1].name))&&p(e,"id",_)},i(d){if(!i){for(let f=0;f<b.length;f+=1)q(s[f]);i=!0}},o(d){for(let f=0;f<s.length;f+=1)L(s[f]);i=!1},d(d){d&&g(e);for(let f=0;f<s.length;f+=1)s[f].d()}}}function we(u,e,t){let{category:r={id:0,name:""}}=e,{products:n=[{id:0,title:"",body:""}]}=e,{basket:l={}}=e,{rules:a={edit:!1}}=e;function o(s){l=s,t(0,l)}return u.$$set=s=>{"category"in s&&t(1,r=s.category),"products"in s&&t(2,n=s.products),"basket"in s&&t(0,l=s.basket),"rules"in s&&t(3,a=s.rules)},[l,r,n,a,o]}class Pe extends U{constructor(e){super(),z(this,e,we,Ee,J,{category:1,products:2,basket:0,rules:3})}}function ne(u,e,t){const r=u.slice();return r[8]=e[t],r}function oe(u,e){let t,r,n,l;function a(...c){return e[5](e[8],...c)}function o(c){e[6](c)}let s={category:e[8],products:e[3].filter(a),rules:e[1]};return e[0]!==void 0&&(s.basket=e[0]),r=new Pe({props:s}),F.push(()=>H(r,"basket",o)),{key:u,first:null,c(){t=G(),Q(r.$$.fragment),this.h()},l(c){t=G(),R(r.$$.fragment,c),this.h()},h(){this.first=t},m(c,_){T(c,t,_),W(r,c,_),l=!0},p(c,_){e=c;const i={};_&4&&(i.category=e[8]),_&12&&(i.products=e[3].filter(a)),_&2&&(i.rules=e[1]),!n&&_&1&&(n=!0,i.basket=e[0],X(()=>n=!1)),r.$set(i)},i(c){l||(q(r.$$.fragment,c),l=!0)},o(c){L(r.$$.fragment,c),l=!1},d(c){c&&g(t),Z(r,c)}}}function Ie(u){let e,t=[],r=new Map,n,l=u[2];const a=o=>o[8].id;for(let o=0;o<l.length;o+=1){let s=ne(u,l,o),c=a(s);r.set(c,t[o]=oe(c,s))}return{c(){e=k("div");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=v(o,"DIV",{class:!0});var s=y(e);for(let c=0;c<t.length;c+=1)t[c].l(s);s.forEach(g),this.h()},h(){p(e,"class","products svelte-1iufgiz")},m(o,s){T(o,e,s);for(let c=0;c<t.length;c+=1)t[c].m(e,null);n=!0},p(o,[s]){s&15&&(l=o[2],ce(),t=ue(t,s,a,1,o,l,r,e,ae,oe,null,ne),ie())},i(o){if(!n){for(let s=0;s<l.length;s+=1)q(t[s]);n=!0}},o(o){for(let s=0;s<t.length;s+=1)L(t[s]);n=!1},d(o){o&&g(e);for(let s=0;s<t.length;s+=1)t[s].d()}}}function De(u,e,t){let{rules:r={edit:!1}}=e,{basket:n={}}=e,{categories:l=[]}=e,{products:a=[]}=e,{currentCategory:o={id:0,name:""}}=e;de(async()=>{document.querySelectorAll(".product__group").forEach(b=>{b.addEventListener("click",function(m){},!1)}),window.addEventListener("scroll",b=>{s()})});function s(i){let b=document.querySelectorAll(".product__group");for(let m=0;m<b.length;m++){let d=b[m];if(t(4,o=l[m]),window.pageYOffset<d.offsetTop)break}}const c=(i,b)=>b.category_id==i.id;function _(i){n=i,t(0,n)}return u.$$set=i=>{"rules"in i&&t(1,r=i.rules),"basket"in i&&t(0,n=i.basket),"categories"in i&&t(2,l=i.categories),"products"in i&&t(3,a=i.products),"currentCategory"in i&&t(4,o=i.currentCategory)},[n,r,l,a,o,c,_]}class Te extends U{constructor(e){super(),z(this,e,De,Ie,J,{rules:1,basket:0,categories:2,products:3,currentCategory:4})}}export{Te as P};
