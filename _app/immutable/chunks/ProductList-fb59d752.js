import{S as G,i as U,s as J,k as p,l as v,m as E,h as g,n as m,b as T,B as K,q as C,a as V,r as D,c as B,G as h,I as Y,u as M,O as ue,L as j,M as F,w as H,x as Q,P as $,y as R,N as W,f as S,t as O,z as X,g as ne,J as ce,K as oe,d as ae,e as A,o as ie}from"./index-24e95d3e.js";import{b as fe}from"./store-a10cd813.js";function de(a){let e,t,r,n,l,u,c,s,o,d,i;return{c(){e=p("div"),t=p("button"),r=C("-"),n=V(),l=p("span"),u=C(a[0]),c=V(),s=p("button"),o=C("+"),this.h()},l(b){e=v(b,"DIV",{class:!0});var k=E(e);t=v(k,"BUTTON",{class:!0});var f=E(t);r=D(f,"-"),f.forEach(g),n=B(k),l=v(k,"SPAN",{class:!0});var _=E(l);u=D(_,a[0]),_.forEach(g),c=B(k),s=v(k,"BUTTON",{class:!0});var P=E(s);o=D(P,"+"),P.forEach(g),k.forEach(g),this.h()},h(){m(t,"class","decrement svelte-4cxk95"),m(l,"class","count svelte-4cxk95"),m(s,"class","increment svelte-4cxk95"),m(e,"class","counter-edit svelte-4cxk95")},m(b,k){T(b,e,k),h(e,t),h(t,r),h(e,n),h(e,l),h(l,u),h(e,c),h(e,s),h(s,o),d||(i=[Y(t,"click",a[2]),Y(s,"click",a[1])],d=!0)},p(b,k){k&1&&M(u,b[0])},d(b){b&&g(e),d=!1,ue(i)}}}function _e(a){let e,t,r,n,l,u,c;return{c(){e=p("div"),t=p("button"),r=p("span"),n=C(a[3]),l=C(" \u20BD"),this.h()},l(s){e=v(s,"DIV",{class:!0});var o=E(e);t=v(o,"BUTTON",{class:!0});var d=E(t);r=v(d,"SPAN",{class:!0});var i=E(r);n=D(i,a[3]),l=D(i," \u20BD"),i.forEach(g),d.forEach(g),o.forEach(g),this.h()},h(){m(r,"class","svelte-4cxk95"),m(t,"class","add-button svelte-4cxk95"),m(e,"class","counter-new svelte-4cxk95")},m(s,o){T(s,e,o),h(e,t),h(t,r),h(r,n),h(r,l),u||(c=Y(t,"click",a[1]),u=!0)},p:K,d(s){s&&g(e),u=!1,c()}}}function he(a){let e;function t(l,u){return l[0]==0?_e:de}let r=t(a),n=r(a);return{c(){e=p("div"),n.c(),this.h()},l(l){e=v(l,"DIV",{class:!0});var u=E(e);n.l(u),u.forEach(g),this.h()},h(){m(e,"class","counter svelte-4cxk95")},m(l,u){T(l,e,u),n.m(e,null)},p(l,[u]){r===(r=t(l))&&n?n.p(l,u):(n.d(1),n=r(l),n&&(n.c(),n.m(e,null)))},i:K,o:K,d(l){l&&g(e),n.d()}}}function ge(a,e,t){let{product:r={id:0,name:"",description:"",price:0}}=e,{basket:n={}}=e;fe.subscribe(o=>{t(4,n=o)});let l=n[r.id]||0;const u=()=>{t(0,l+=1),t(4,n[r.id]=l,n)},c=()=>{t(0,l-=1),n[r.id]&&l<=0?(delete n[r.id],t(4,n)):t(4,n[r.id]=l,n)};let s=r.price.toString();return a.$$set=o=>{"product"in o&&t(5,r=o.product),"basket"in o&&t(4,n=o.basket)},[l,u,c,s,n,r]}class be extends G{constructor(e){super(),U(this,e,ge,he,J,{product:5,basket:4})}}function ee(a){let e,t;return{c(){e=p("button"),t=C("\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C")},l(r){e=v(r,"BUTTON",{});var n=E(e);t=D(n,"\u0420\u0435\u0434\u0430\u043A\u0442\u0438\u0440\u043E\u0432\u0430\u0442\u044C"),n.forEach(g)},m(r,n){T(r,e,n),h(e,t)},d(r){r&&g(e)}}}function ke(a){let e,t,r,n,l,u,c=a[1].name+"",s,o,d,i=a[1].description+"",b,k,f,_,P,q;function L(y){a[3](y)}let N={product:a[1]};a[0]!==void 0&&(N.basket=a[0]),f=new be({props:N}),j.push(()=>F(f,"basket",L));let w=a[2].edit&&ee();return{c(){e=p("div"),t=p("img"),n=V(),l=p("div"),u=p("p"),s=C(c),o=V(),d=p("p"),b=C(i),k=V(),H(f.$$.fragment),P=V(),w&&w.c(),this.h()},l(y){e=v(y,"DIV",{class:!0});var I=E(e);t=v(I,"IMG",{class:!0,src:!0,alt:!0}),n=B(I),l=v(I,"DIV",{class:!0});var z=E(l);u=v(z,"P",{class:!0});var Z=E(u);s=D(Z,c),Z.forEach(g),o=B(z),d=v(z,"P",{class:!0});var x=E(d);b=D(x,i),x.forEach(g),k=B(z),Q(f.$$.fragment,z),z.forEach(g),P=B(I),w&&w.l(I),I.forEach(g),this.h()},h(){m(t,"class","product__img svelte-1qtz4fd"),$(t.src,r=a[1].image)||m(t,"src",r),m(t,"alt","Nothing here"),m(u,"class","product__name svelte-1qtz4fd"),m(d,"class","product__description svelte-1qtz4fd"),m(l,"class","product__info svelte-1qtz4fd"),m(e,"class","product svelte-1qtz4fd")},m(y,I){T(y,e,I),h(e,t),h(e,n),h(e,l),h(l,u),h(u,s),h(l,o),h(l,d),h(d,b),h(l,k),R(f,l,null),h(e,P),w&&w.m(e,null),q=!0},p(y,[I]){(!q||I&2&&!$(t.src,r=y[1].image))&&m(t,"src",r),(!q||I&2)&&c!==(c=y[1].name+"")&&M(s,c),(!q||I&2)&&i!==(i=y[1].description+"")&&M(b,i);const z={};I&2&&(z.product=y[1]),!_&&I&1&&(_=!0,z.basket=y[0],W(()=>_=!1)),f.$set(z),y[2].edit?w||(w=ee(),w.c(),w.m(e,null)):w&&(w.d(1),w=null)},i(y){q||(S(f.$$.fragment,y),q=!0)},o(y){O(f.$$.fragment,y),q=!1},d(y){y&&g(e),X(f),w&&w.d()}}}function me(a,e,t){let{product:r={id:0,name:"",description:"",price:0}}=e,{rules:n={edit:!1}}=e,{basket:l={}}=e;function u(c){l=c,t(0,l)}return a.$$set=c=>{"product"in c&&t(1,r=c.product),"rules"in c&&t(2,n=c.rules),"basket"in c&&t(0,l=c.basket)},[l,r,n,u]}class pe extends G{constructor(e){super(),U(this,e,me,ke,J,{product:1,rules:2,basket:0})}}function te(a,e,t){const r=a.slice();return r[5]=e[t],r}function se(a,e){let t,r,n,l;function u(s){e[4](s)}let c={product:e[5],rules:e[3]};return e[0]!==void 0&&(c.basket=e[0]),r=new pe({props:c}),j.push(()=>F(r,"basket",u)),{key:a,first:null,c(){t=A(),H(r.$$.fragment),this.h()},l(s){t=A(),Q(r.$$.fragment,s),this.h()},h(){this.first=t},m(s,o){T(s,t,o),R(r,s,o),l=!0},p(s,o){e=s;const d={};o&4&&(d.product=e[5]),o&8&&(d.rules=e[3]),!n&&o&1&&(n=!0,d.basket=e[0],W(()=>n=!1)),r.$set(d)},i(s){l||(S(r.$$.fragment,s),l=!0)},o(s){O(r.$$.fragment,s),l=!1},d(s){s&&g(t),X(r,s)}}}function ve(a){let e,t,r,n=a[1].name+"",l,u,c,s=[],o=new Map,d,i,b=a[2];const k=f=>f[5].id;for(let f=0;f<b.length;f+=1){let _=te(a,b,f),P=k(_);o.set(P,s[f]=se(P,_))}return{c(){e=p("div"),t=p("div"),r=p("b"),l=C(n),u=V(),c=p("div");for(let f=0;f<s.length;f+=1)s[f].c();this.h()},l(f){e=v(f,"DIV",{class:!0,id:!0});var _=E(e);t=v(_,"DIV",{class:!0});var P=E(t);r=v(P,"B",{});var q=E(r);l=D(q,n),q.forEach(g),P.forEach(g),u=B(_),c=v(_,"DIV",{class:!0});var L=E(c);for(let N=0;N<s.length;N+=1)s[N].l(L);L.forEach(g),_.forEach(g),this.h()},h(){m(t,"class","product__group__category svelte-68rz2h"),m(c,"class","product__group__produtcs svelte-68rz2h"),m(e,"class","product__group svelte-68rz2h"),m(e,"id",d=a[1].name)},m(f,_){T(f,e,_),h(e,t),h(t,r),h(r,l),h(e,u),h(e,c);for(let P=0;P<s.length;P+=1)s[P].m(c,null);i=!0},p(f,[_]){(!i||_&2)&&n!==(n=f[1].name+"")&&M(l,n),_&13&&(b=f[2],ne(),s=ce(s,_,k,1,f,b,o,c,oe,se,null,te),ae()),(!i||_&2&&d!==(d=f[1].name))&&m(e,"id",d)},i(f){if(!i){for(let _=0;_<b.length;_+=1)S(s[_]);i=!0}},o(f){for(let _=0;_<s.length;_+=1)O(s[_]);i=!1},d(f){f&&g(e);for(let _=0;_<s.length;_+=1)s[_].d()}}}function ye(a,e,t){let{category:r={id:0,name:""}}=e,{products:n=[{id:0,title:"",body:""}]}=e,{basket:l={}}=e,{rules:u={edit:!1}}=e;function c(s){l=s,t(0,l)}return a.$$set=s=>{"category"in s&&t(1,r=s.category),"products"in s&&t(2,n=s.products),"basket"in s&&t(0,l=s.basket),"rules"in s&&t(3,u=s.rules)},[l,r,n,u,c]}class Ee extends G{constructor(e){super(),U(this,e,ye,ve,J,{category:1,products:2,basket:0,rules:3})}}function re(a,e,t){const r=a.slice();return r[8]=e[t],r}function le(a,e){let t,r,n,l;function u(...o){return e[5](e[8],...o)}function c(o){e[6](o)}let s={category:e[8],products:e[3].filter(u),rules:e[1]};return e[0]!==void 0&&(s.basket=e[0]),r=new Ee({props:s}),j.push(()=>F(r,"basket",c)),{key:a,first:null,c(){t=A(),H(r.$$.fragment),this.h()},l(o){t=A(),Q(r.$$.fragment,o),this.h()},h(){this.first=t},m(o,d){T(o,t,d),R(r,o,d),l=!0},p(o,d){e=o;const i={};d&4&&(i.category=e[8]),d&12&&(i.products=e[3].filter(u)),d&2&&(i.rules=e[1]),!n&&d&1&&(n=!0,i.basket=e[0],W(()=>n=!1)),r.$set(i)},i(o){l||(S(r.$$.fragment,o),l=!0)},o(o){O(r.$$.fragment,o),l=!1},d(o){o&&g(t),X(r,o)}}}function Pe(a){let e,t=[],r=new Map,n,l=a[2];const u=c=>c[8].id;for(let c=0;c<l.length;c+=1){let s=re(a,l,c),o=u(s);r.set(o,t[c]=le(o,s))}return{c(){e=p("div");for(let c=0;c<t.length;c+=1)t[c].c();this.h()},l(c){e=v(c,"DIV",{class:!0});var s=E(e);for(let o=0;o<t.length;o+=1)t[o].l(s);s.forEach(g),this.h()},h(){m(e,"class","products svelte-1bi10gg")},m(c,s){T(c,e,s);for(let o=0;o<t.length;o+=1)t[o].m(e,null);n=!0},p(c,[s]){s&15&&(l=c[2],ne(),t=ce(t,s,u,1,c,l,r,e,oe,le,null,re),ae())},i(c){if(!n){for(let s=0;s<l.length;s+=1)S(t[s]);n=!0}},o(c){for(let s=0;s<t.length;s+=1)O(t[s]);n=!1},d(c){c&&g(e);for(let s=0;s<t.length;s+=1)t[s].d()}}}function we(a,e,t){let{rules:r={edit:!1}}=e,{basket:n={}}=e,{categories:l=[]}=e,{products:u=[]}=e,{currentCategory:c={id:0,name:""}}=e;ie(async()=>{document.querySelectorAll(".product__group").forEach(b=>{b.addEventListener("click",function(k){},!1)}),window.addEventListener("scroll",b=>{s()})});function s(i){let b=document.querySelectorAll(".product__group");for(let k=0;k<b.length;k++){let f=b[k];if(t(4,c=l[k]),window.pageYOffset<f.offsetTop)break}}const o=(i,b)=>b.category_id==i.id;function d(i){n=i,t(0,n)}return a.$$set=i=>{"rules"in i&&t(1,r=i.rules),"basket"in i&&t(0,n=i.basket),"categories"in i&&t(2,l=i.categories),"products"in i&&t(3,u=i.products),"currentCategory"in i&&t(4,c=i.currentCategory)},[n,r,l,u,c,o,d]}class ze extends G{constructor(e){super(),U(this,e,we,Pe,J,{rules:1,basket:0,categories:2,products:3,currentCategory:4})}}export{ze as P};
